var _m=Object.defineProperty,xm=Object.defineProperties;var Mm=Object.getOwnPropertyDescriptors;var pd=Object.getOwnPropertySymbols;var Rm=Object.prototype.hasOwnProperty,Nm=Object.prototype.propertyIsEnumerable;var hd=(e,t,n)=>t in e?_m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||={})Rm.call(t,n)&&hd(e,n,t[n]);if(pd)for(var n of pd(t))Nm.call(t,n)&&hd(e,n,t[n]);return e},q=(e,t)=>xm(e,Mm(t));var va;function Bo(){return va}function Qe(e){let t=va;return va=e,t}var gd=Symbol("NotFound");function xn(e){return e===gd||e?.name==="\u0275NotFound"}function md(e,t){return Object.is(e,t)}var de=null,Uo=!1,ba=1,Am=null,at=Symbol("SIGNAL");function O(e){let t=de;return de=e,t}function Ho(){return de}var Vo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $o(e){if(Uo)throw new Error("");if(de===null)return;de.consumerOnSignalRead(e);let t=de.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=de.recomputing;if(r&&(n=t!==void 0?t.nextProducer:de.producers,n!==void 0&&n.producer===e)){de.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===de&&(!r||Pm(o,de)))return;let i=Mn(de),s={producer:e,consumer:de,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};de.producersTail=s,t!==void 0?t.nextProducer=s:de.producers=s,i&&bd(e,s)}function vd(){ba++}function yd(e){if(!(Mn(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ba)){if(!e.producerMustRecompute(e)&&!zo(e)){ya(e);return}e.producerRecomputeValue(e),ya(e)}}function Ea(e){if(e.consumers===void 0)return;let t=Uo;Uo=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Om(r)}}finally{Uo=t}}function Ia(){return de?.consumerAllowSignalWrites!==!1}function Om(e){e.dirty=!0,Ea(e),e.consumerMarkedDirty?.(e)}function ya(e){e.dirty=!1,e.lastCleanEpoch=ba}function Go(e){return e&&(e.producersTail=void 0,e.recomputing=!0),O(e)}function wa(e,t){if(O(t),!e)return;e.recomputing=!1;let n=e.producersTail,r=n!==void 0?n.nextProducer:e.producers;if(r!==void 0){if(Mn(e))do r=Ca(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:e.producers=void 0}}function zo(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(yd(n),r!==n.version))return!0}return!1}function Wo(e){if(Mn(e)){let t=e.producers;for(;t!==void 0;)t=Ca(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function bd(e,t){let n=e.consumersTail,r=Mn(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let o=e.producers;o!==void 0;o=o.nextProducer)bd(o.producer,o)}function Ca(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(t.consumers=r,!Mn(t)){let i=t.producers;for(;i!==void 0;)i=Ca(i)}return n}function Mn(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Ed(e){Am?.(e)}function Pm(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lm(){throw new Error}var Id=Lm;function wd(e){Id(e)}function Sa(e){Id=e}var km=null;function Da(e,t){let n=Object.create(qo);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Cd(n);return r[at]=n,Ed(n),[r,s=>Dr(n,s),s=>Sd(n,s)]}function Cd(e){return $o(e),e.value}function Dr(e,t){Ia()||wd(e),e.equal(e.value,t)||(e.value=t,Fm(e))}function Sd(e,t){Ia()||wd(e),Dr(e,t(e.value))}var qo=q(E({},Vo),{equal:md,value:void 0,kind:"signal"});function Fm(e){e.version++,vd(),Ea(e),km?.(e)}function R(e){return typeof e=="function"}function Rn(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zo=Rn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var K=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(R(r))try{r()}catch(i){t=i instanceof Zo?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Dd(i)}catch(s){t=t??[],s instanceof Zo?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Zo(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Dd(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Tr(n,t)}remove(t){let{_finalizers:n}=this;n&&Tr(n,t),t instanceof e&&t._removeParent(this)}};K.EMPTY=(()=>{let e=new K;return e.closed=!0,e})();var Ta=K.EMPTY;function Yo(e){return e instanceof K||e&&"closed"in e&&R(e.remove)&&R(e.add)&&R(e.unsubscribe)}function Dd(e){R(e)?e():e.unsubscribe()}var $e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nn={setTimeout(e,t,...n){let{delegate:r}=Nn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Nn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Qo(e){Nn.setTimeout(()=>{let{onUnhandledError:t}=$e;if(t)t(e);else throw e})}function _r(){}var Td=_a("C",void 0,void 0);function _d(e){return _a("E",void 0,e)}function xd(e){return _a("N",e,void 0)}function _a(e,t,n){return{kind:e,value:t,error:n}}var Yt=null;function An(e){if($e.useDeprecatedSynchronousErrorHandling){let t=!Yt;if(t&&(Yt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Yt;if(Yt=null,n)throw r}}else e()}function Md(e){$e.useDeprecatedSynchronousErrorHandling&&Yt&&(Yt.errorThrown=!0,Yt.error=e)}var Qt=class extends K{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Yo(t)&&t.add(this)):this.destination=Um}static create(t,n,r){return new On(t,n,r)}next(t){this.isStopped?Ma(xd(t),this):this._next(t)}error(t){this.isStopped?Ma(_d(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ma(Td,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jm=Function.prototype.bind;function xa(e,t){return jm.call(e,t)}var Ra=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ko(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ko(r)}else Ko(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ko(n)}}},On=class extends Qt{constructor(t,n,r){super();let o;if(R(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&$e.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&xa(t.next,i),error:t.error&&xa(t.error,i),complete:t.complete&&xa(t.complete,i)}):o=t}this.destination=new Ra(o)}};function Ko(e){$e.useDeprecatedSynchronousErrorHandling?Md(e):Qo(e)}function Bm(e){throw e}function Ma(e,t){let{onStoppedNotification:n}=$e;n&&Nn.setTimeout(()=>n(e,t))}var Um={closed:!0,next:_r,error:Bm,complete:_r};var Pn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function De(e){return e}function Na(...e){return Aa(e)}function Aa(e){return e.length===0?De:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var H=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=Vm(n)?n:new On(n,r,o);return An(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Rd(r),new r((o,i)=>{let s=new On({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Pn](){return this}pipe(...n){return Aa(n)(this)}toPromise(n){return n=Rd(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function Rd(e){var t;return(t=e??$e.Promise)!==null&&t!==void 0?t:Promise}function Hm(e){return e&&R(e.next)&&R(e.error)&&R(e.complete)}function Vm(e){return e&&e instanceof Qt||Hm(e)&&Yo(e)}function Oa(e){return R(e?.lift)}function F(e){return t=>{if(Oa(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,r,o){return new Pa(e,t,n,r,o)}var Pa=class extends Qt{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ln(){return F((e,t)=>{let n=null;e._refCount++;let r=j(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var kn=class extends H{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Oa(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new K;let n=this.getSubject();t.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=K.EMPTY)}return t}refCount(){return Ln()(this)}};var Nd=Rn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=(()=>{class e extends H{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Xo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Nd}next(n){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){An(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Ta:(this.currentObservers=null,i.push(n),new K(()=>{this.currentObservers=null,Tr(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new H;return n.source=this,n}}return e.create=(t,n)=>new Xo(t,n),e})(),Xo=class extends ne{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Ta}};var ae=class extends ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var me=new H(e=>e.complete());function Ad(e){return e&&R(e.schedule)}function Od(e){return e[e.length-1]}function Pd(e){return R(Od(e))?e.pop():void 0}function Rt(e){return Ad(Od(e))?e.pop():void 0}function kd(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?i(d.value):o(d.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Ld(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(e){return this instanceof Kt?(this.v=e,this):new Kt(e)}function Fd(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(p){return function(y){return Promise.resolve(y).then(p,f)}}function a(p,y){r[p]&&(o[p]=function(w){return new Promise(function(M,L){i.push([p,w,M,L])>1||c(p,w)})},y&&(o[p]=y(o[p])))}function c(p,y){try{l(r[p](y))}catch(w){m(i[0][3],w)}}function l(p){p.value instanceof Kt?Promise.resolve(p.value.v).then(d,f):m(i[0][2],p)}function d(p){c("next",p)}function f(p){c("throw",p)}function m(p,y){p(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function jd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ld=="function"?Ld(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Jo=e=>e&&typeof e.length=="number"&&typeof e!="function";function ei(e){return R(e?.then)}function ti(e){return R(e[Pn])}function ni(e){return Symbol.asyncIterator&&R(e?.[Symbol.asyncIterator])}function ri(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $m(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oi=$m();function ii(e){return R(e?.[oi])}function si(e){return Fd(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield Kt(n.read());if(o)return yield Kt(void 0);yield yield Kt(r)}}finally{n.releaseLock()}})}function ai(e){return R(e?.getReader)}function re(e){if(e instanceof H)return e;if(e!=null){if(ti(e))return Gm(e);if(Jo(e))return zm(e);if(ei(e))return Wm(e);if(ni(e))return Bd(e);if(ii(e))return qm(e);if(ai(e))return Zm(e)}throw ri(e)}function Gm(e){return new H(t=>{let n=e[Pn]();if(R(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zm(e){return new H(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Wm(e){return new H(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Qo)})}function qm(e){return new H(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Bd(e){return new H(t=>{Ym(e,t).catch(n=>t.error(n))})}function Zm(e){return Bd(si(e))}function Ym(e,t){var n,r,o,i;return kd(this,void 0,void 0,function*(){try{for(n=jd(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function ve(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function ci(e,t=0){return F((n,r)=>{n.subscribe(j(r,o=>ve(r,e,()=>r.next(o),t),()=>ve(r,e,()=>r.complete(),t),o=>ve(r,e,()=>r.error(o),t)))})}function li(e,t=0){return F((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Ud(e,t){return re(e).pipe(li(t),ci(t))}function Hd(e,t){return re(e).pipe(li(t),ci(t))}function Vd(e,t){return new H(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function $d(e,t){return new H(n=>{let r;return ve(n,t,()=>{r=e[oi](),ve(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>R(r?.return)&&r.return()})}function ui(e,t){if(!e)throw new Error("Iterable cannot be null");return new H(n=>{ve(n,t,()=>{let r=e[Symbol.asyncIterator]();ve(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Gd(e,t){return ui(si(e),t)}function zd(e,t){if(e!=null){if(ti(e))return Ud(e,t);if(Jo(e))return Vd(e,t);if(ei(e))return Hd(e,t);if(ni(e))return ui(e,t);if(ii(e))return $d(e,t);if(ai(e))return Gd(e,t)}throw ri(e)}function X(e,t){return t?zd(e,t):re(e)}function x(...e){let t=Rt(e);return X(e,t)}function Fn(e,t){let n=R(e)?e:()=>e,r=o=>o.error(n());return new H(t?o=>t.schedule(r,0,o):r)}function La(e){return!!e&&(e instanceof H||R(e.lift)&&R(e.subscribe))}var ct=Rn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function B(e,t){return F((n,r)=>{let o=0;n.subscribe(j(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:Qm}=Array;function Km(e,t){return Qm(t)?e(...t):e(t)}function Wd(e){return B(t=>Km(e,t))}var{isArray:Xm}=Array,{getPrototypeOf:Jm,prototype:ev,keys:tv}=Object;function qd(e){if(e.length===1){let t=e[0];if(Xm(t))return{args:t,keys:null};if(nv(t)){let n=tv(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function nv(e){return e&&typeof e=="object"&&Jm(e)===ev}function Zd(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function di(...e){let t=Rt(e),n=Pd(e),{args:r,keys:o}=qd(e);if(r.length===0)return X([],t);let i=new H(rv(r,t,o?s=>Zd(o,s):De));return n?i.pipe(Wd(n)):i}function rv(e,t,n=De){return r=>{Yd(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)Yd(t,()=>{let l=X(e[c],t),d=!1;l.subscribe(j(r,f=>{i[c]=f,d||(d=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yd(e,t,n){e?ve(n,e,t):t()}function Qd(e,t,n,r,o,i,s,a){let c=[],l=0,d=0,f=!1,m=()=>{f&&!c.length&&!l&&t.complete()},p=w=>l<r?y(w):c.push(w),y=w=>{i&&t.next(w),l++;let M=!1;re(n(w,d++)).subscribe(j(t,L=>{o?.(L),i?p(L):t.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let L=c.shift();s?ve(t,s,()=>y(L)):y(L)}m()}catch(L){t.error(L)}}))};return e.subscribe(j(t,p,()=>{f=!0,m()})),()=>{a?.()}}function J(e,t,n=1/0){return R(t)?J((r,o)=>B((i,s)=>t(r,i,o,s))(re(e(r,o))),n):(typeof t=="number"&&(n=t),F((r,o)=>Qd(r,o,e,n)))}function Kd(e=1/0){return J(De,e)}function Xd(){return Kd(1)}function jn(...e){return Xd()(X(e,Rt(e)))}function xr(e){return new H(t=>{re(e()).subscribe(t)})}function Le(e,t){return F((n,r)=>{let o=0;n.subscribe(j(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Nt(e){return F((t,n)=>{let r=null,o=!1,i;r=t.subscribe(j(n,void 0,void 0,s=>{i=re(e(s,Nt(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Jd(e,t,n,r,o){return(i,s)=>{let a=n,c=t,l=0;i.subscribe(j(s,d=>{let f=l++;c=a?e(c,d,f):(a=!0,d),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function Bn(e,t){return R(t)?J(e,t,1):J(e,1)}function At(e){return F((t,n)=>{let r=!1;t.subscribe(j(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function lt(e){return e<=0?()=>me:F((t,n)=>{let r=0;t.subscribe(j(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function fi(e=ov){return F((t,n)=>{let r=!1;t.subscribe(j(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function ov(){return new ct}function Mr(e){return F((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ut(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Le((o,i)=>e(o,i,r)):De,lt(1),n?At(t):fi(()=>new ct))}function Un(e){return e<=0?()=>me:F((t,n)=>{let r=[];t.subscribe(j(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function ka(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Le((o,i)=>e(o,i,r)):De,Un(1),n?At(t):fi(()=>new ct))}function Fa(e,t){return F(Jd(e,t,arguments.length>=2,!0))}function ja(...e){let t=Rt(e);return F((n,r)=>{(t?jn(e,n,t):jn(e,n)).subscribe(r)})}function ye(e,t){return F((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(j(r,c=>{o?.unsubscribe();let l=0,d=i++;re(e(c,d)).subscribe(o=j(r,f=>r.next(t?t(c,f,d,l++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function pi(e){return F((t,n)=>{re(e).subscribe(j(n,()=>n.complete(),_r)),!n.closed&&t.subscribe(n)})}function oe(e,t,n){let r=R(e)||t||n?{next:e,error:t,complete:n}:e;return r?F((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(j(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):De}var Qa="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",S=class extends Error{code;constructor(t,n){super(bi(t,n)),this.code=t}};function sv(e){return`NG0${Math.abs(e)}`}function bi(e,t){return`${sv(e)}${t?": "+t:""}`}function V(e){for(let t in e)if(e[t]===V)return t;throw Error("")}function ft(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(ft).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ka(e,t){return e?t?`${e} ${t}`:e:t||""}var av=V({__forward_ref__:V});function Ei(e){return e.__forward_ref__=Ei,e.toString=function(){return ft(this())},e}function be(e){return Xa(e)?e():e}function Xa(e){return typeof e=="function"&&e.hasOwnProperty(av)&&e.__forward_ref__===Ei}function nf(e,t){e==null&&Ja(t,e,null,"!=")}function Ja(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(r==null?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Pr(e){return cv(e,Ii)}function ec(e){return Pr(e)!==null}function cv(e,t){return e.hasOwnProperty(t)&&e[t]||null}function lv(e){let t=e?.[Ii]??null;return t||null}function Ua(e){return e&&e.hasOwnProperty(gi)?e[gi]:null}var Ii=V({\u0275prov:V}),gi=V({\u0275inj:V}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function tc(e){return e&&!!e.\u0275providers}var nc=V({\u0275cmp:V}),rc=V({\u0275dir:V}),oc=V({\u0275pipe:V}),ic=V({\u0275mod:V}),Ar=V({\u0275fac:V}),rn=V({__NG_ELEMENT_ID__:V}),ef=V({__NG_ENV_ID__:V});function sc(e){return typeof e=="string"?e:e==null?"":String(e)}function mi(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():sc(e)}var ac=V({ngErrorCode:V}),rf=V({ngErrorMessage:V}),Nr=V({ngTokenPath:V});function cc(e,t){return of("",-200,t)}function wi(e,t){throw new S(-201,!1)}function uv(e,t){e[Nr]??=[];let n=e[Nr],r;typeof t=="object"&&"multi"in t&&t?.multi===!0?(nf(t.provide,"Token with multi: true should have a provide property"),r=mi(t.provide)):r=mi(t),n[0]!==r&&e[Nr].unshift(r)}function dv(e,t){let n=e[Nr],r=e[ac],o=e[rf]||e.message;return e.message=pv(o,r,n,t),e}function of(e,t,n){let r=new S(t,e);return r[ac]=t,r[rf]=e,n&&(r[Nr]=n),r}function fv(e){return e[ac]}function pv(e,t,n=[],r=null){let o="";n&&n.length>1&&(o=` Path: ${n.join(" -> ")}.`);let i=r?` Source: ${r}.`:"";return bi(t,`${e}${i}${o}`)}var Ha;function sf(){return Ha}function Te(e){let t=Ha;return Ha=e,t}function lc(e,t,n){let r=Pr(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;wi(e,"Injector")}var hv={},Xt=hv,gv="__NG_DI_FLAG__",Va=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Jt(n)||0;try{return this.injector.get(t,r&8?null:Xt,r)}catch(o){if(xn(o))return o;throw o}}};function mv(e,t=0){let n=Bo();if(n===void 0)throw new S(-203,!1);if(n===null)return lc(e,void 0,t);{let r=vv(t),o=n.retrieve(e,r);if(xn(o)){if(r.optional)return null;throw o}return o}}function P(e,t=0){return(sf()||mv)(be(e),t)}function b(e,t){return P(e,Jt(t))}function Jt(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function vv(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function $a(e){let t=[];for(let n=0;n<e.length;n++){let r=be(e[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=yv(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(P(o,i))}else t.push(P(r))}return t}function yv(e){return e[gv]}function en(e,t){let n=e.hasOwnProperty(Ar);return n?e[Ar]:null}function af(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function cf(e){return e.flat(Number.POSITIVE_INFINITY)}function Ci(e,t){e.forEach(n=>Array.isArray(n)?Ci(n,t):t(n))}function uc(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Lr(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lf(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function uf(e,t,n){let r=Vn(e,t);return r>=0?e[r|1]=n:(r=~r,lf(e,r,t,n)),r}function Si(e,t){let n=Vn(e,t);if(n>=0)return e[n|1]}function Vn(e,t){return bv(e,t,1)}function bv(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var on={},Ot=[],pt=new D(""),dc=new D("",-1),fc=new D(""),Or=class{get(t,n=Xt){if(n===Xt){let o=of("",-201);throw o.name="\u0275NotFound",o}return n}};function pc(e){return e[ic]||null}function Lt(e){return e[nc]||null}function hc(e){return e[rc]||null}function df(e){return e[oc]||null}function sn(e){return{\u0275providers:e}}function ff(e){return sn([{provide:pt,multi:!0,useValue:e}])}function pf(...e){return{\u0275providers:gc(!0,e),\u0275fromNgModule:!0}}function gc(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return Ci(t,s=>{let a=s;vi(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&hf(o,i),n}function hf(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];mc(o,i=>{t(i,r)})}}function vi(e,t,n,r){if(e=be(e),!e)return!1;let o=null,i=Ua(e),s=!i&&Lt(e);if(!i&&!s){let c=e.ngModule;if(i=Ua(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)vi(l,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{Ci(i.imports,d=>{vi(d,t,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&hf(l,t)}if(!a){let l=en(o)||(()=>new o);t({provide:o,useFactory:l,deps:Ot},o),t({provide:fc,useValue:o,multi:!0},o),t({provide:pt,useValue:()=>P(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=e;mc(c,d=>{t(d,l)})}}else return!1;return o!==e&&e.providers!==void 0}function mc(e,t){for(let n of e)tc(n)&&(n=n.\u0275providers),Array.isArray(n)?mc(n,t):t(n)}var Ev=V({provide:String,useValue:V});function gf(e){return e!==null&&typeof e=="object"&&Ev in e}function Iv(e){return!!(e&&e.useExisting)}function wv(e){return!!(e&&e.useFactory)}function yi(e){return typeof e=="function"}var kr=new D(""),hi={},tf={},Ba;function Fr(){return Ba===void 0&&(Ba=new Or),Ba}var ce=class{},tn=class extends ce{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,za(t,s=>this.processProvider(s)),this.records.set(dc,Hn(void 0,this)),o.has("environment")&&this.records.set(ce,Hn(void 0,this));let i=this.records.get(kr);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(fc,Ot,{self:!0}))}retrieve(t,n){let r=Jt(n)||0;try{return this.get(t,Xt,r)}catch(o){if(xn(o))return o;throw o}}destroy(){Rr(this),this._destroyed=!0;let t=O(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),O(t)}}onDestroy(t){return Rr(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Rr(this);let n=Qe(this),r=Te(void 0),o;try{return t()}finally{Qe(n),Te(r)}}get(t,n=Xt,r){if(Rr(this),t.hasOwnProperty(ef))return t[ef](this);let o=Jt(r),i,s=Qe(this),a=Te(void 0);try{if(!(o&4)){let l=this.records.get(t);if(l===void 0){let d=_v(t)&&Pr(t);d&&this.injectableDefInScope(d)?l=Hn(Ga(t),hi):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,o)}let c=o&2?Fr():this.parent;return n=o&8&&n===Xt?null:n,c.get(t,n)}catch(c){let l=fv(c);throw l===-200||l===-201?new S(l,null):c}finally{Te(a),Qe(s)}}resolveInjectorInitializers(){let t=O(null),n=Qe(this),r=Te(void 0),o;try{let i=this.get(pt,Ot,{self:!0});for(let s of i)s()}finally{Qe(n),Te(r),O(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(ft(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=be(t);let n=yi(t)?t:be(t&&t.provide),r=Sv(t);if(!yi(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Hn(void 0,hi,!0),o.factory=()=>$a(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let o=O(null);try{if(n.value===tf)throw cc(ft(t));return n.value===hi&&(n.value=tf,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Tv(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{O(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=be(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ga(e){let t=Pr(e),n=t!==null?t.factory:en(e);if(n!==null)return n;if(e instanceof D)throw new S(204,!1);if(e instanceof Function)return Cv(e);throw new S(204,!1)}function Cv(e){if(e.length>0)throw new S(204,!1);let n=lv(e);return n!==null?()=>n.factory(e):()=>new e}function Sv(e){if(gf(e))return Hn(void 0,e.useValue);{let t=mf(e);return Hn(t,hi)}}function mf(e,t,n){let r;if(yi(e)){let o=be(e);return en(o)||Ga(o)}else if(gf(e))r=()=>be(e.useValue);else if(wv(e))r=()=>e.useFactory(...$a(e.deps||[]));else if(Iv(e))r=(o,i)=>P(be(e.useExisting),i!==void 0&&i&8?8:void 0);else{let o=be(e&&(e.useClass||e.provide));if(Dv(e))r=()=>new o(...$a(e.deps));else return en(o)||Ga(o)}return r}function Rr(e){if(e.destroyed)throw new S(205,!1)}function Hn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Dv(e){return!!e.deps}function Tv(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function _v(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function za(e,t){for(let n of e)Array.isArray(n)?za(n,t):n&&tc(n)?za(n.\u0275providers,t):t(n)}function fe(e,t){let n;e instanceof tn?(Rr(e),n=e):n=new Va(e);let r,o=Qe(n),i=Te(void 0);try{return t()}finally{Qe(o),Te(i)}}function vf(){return sf()!==void 0||Bo()!=null}var Ge=0,_=1,N=2,ee=3,ke=4,Fe=5,$n=6,Gn=7,Z=8,an=9,ht=10,te=11,zn=12,vc=13,cn=14,_e=15,kt=16,ln=17,Je=18,jr=19,yc=20,dt=21,Di=22,Br=23,xe=24,Ti=25,le=26,yf=1,bc=6,Ft=7,Ur=8,un=9,ie=10;function gt(e){return Array.isArray(e)&&typeof e[yf]=="object"}function ze(e){return Array.isArray(e)&&e[yf]===!0}function Ec(e){return(e.flags&4)!==0}function dn(e){return e.componentOffset>-1}function _i(e){return(e.flags&1)===1}function fn(e){return!!e.template}function Wn(e){return(e[N]&512)!==0}function pn(e){return(e[N]&256)===256}var bf="svg",Ef="math";function je(e){for(;Array.isArray(e);)e=e[Ge];return e}function Ic(e,t){return je(t[e])}function mt(e,t){return je(t[e.index])}function xi(e,t){return e.data[t]}function et(e,t){let n=t[e];return gt(n)?n:n[Ge]}function If(e){return(e[N]&4)===4}function Mi(e){return(e[N]&128)===128}function wf(e){return ze(e[ee])}function tt(e,t){return t==null?null:e[t]}function wc(e){e[ln]=0}function Cc(e){e[N]&1024||(e[N]|=1024,Mi(e)&&Vr(e))}function Cf(e,t){for(;e>0;)t=t[cn],e--;return t}function Hr(e){return!!(e[N]&9216||e[xe]?.dirty)}function Ri(e){e[ht].changeDetectionScheduler?.notify(8),e[N]&64&&(e[N]|=1024),Hr(e)&&Vr(e)}function Vr(e){e[ht].changeDetectionScheduler?.notify(0);let t=Pt(e);for(;t!==null&&!(t[N]&8192||(t[N]|=8192,!Mi(t)));)t=Pt(t)}function Sc(e,t){if(pn(e))throw new S(911,!1);e[dt]===null&&(e[dt]=[]),e[dt].push(t)}function Sf(e,t){if(e[dt]===null)return;let n=e[dt].indexOf(t);n!==-1&&e[dt].splice(n,1)}function Pt(e){let t=e[ee];return ze(t)?t[ee]:t}function Dc(e){return e[Gn]??=[]}function Tc(e){return e.cleanup??=[]}function Df(e,t,n,r){let o=Dc(t);o.push(n),e.firstCreatePass&&Tc(e).push(r,o.length-1)}var k={lFrame:Bf(null),bindingsEnabled:!0,skipHydrationRootTNode:null},$r=function(e){return e[e.Off=0]="Off",e[e.Exhaustive=1]="Exhaustive",e[e.OnlyDirtyViews=2]="OnlyDirtyViews",e}($r||{}),xv=0,Wa=!1;function Tf(){return k.lFrame.elementDepthCount}function _f(){k.lFrame.elementDepthCount++}function _c(){k.lFrame.elementDepthCount--}function xf(){return k.bindingsEnabled}function Mf(){return k.skipHydrationRootTNode!==null}function xc(e){return k.skipHydrationRootTNode===e}function Mc(){k.skipHydrationRootTNode=null}function G(){return k.lFrame.lView}function Be(){return k.lFrame.tView}function Ni(e){return k.lFrame.contextLView=e,e[Z]}function Ai(e){return k.lFrame.contextLView=null,e}function Me(){let e=Rc();for(;e!==null&&e.type===64;)e=e.parent;return e}function Rc(){return k.lFrame.currentTNode}function Rf(){let e=k.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function qn(e,t){let n=k.lFrame;n.currentTNode=e,n.isParent=t}function Nc(){return k.lFrame.isParent}function Nf(){k.lFrame.isParent=!1}function Ac(e){Ja("Must never be called in production mode"),xv=e}function Oc(){return Wa}function Pc(e){let t=Wa;return Wa=e,t}function Af(e){return k.lFrame.bindingIndex=e}function Oi(){return k.lFrame.bindingIndex++}function Of(e){let t=k.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Pf(){return k.lFrame.inI18n}function Lf(e,t){let n=k.lFrame;n.bindingIndex=n.bindingRootIndex=e,Pi(t)}function kf(){return k.lFrame.currentDirectiveIndex}function Pi(e){k.lFrame.currentDirectiveIndex=e}function Ff(e){let t=k.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Lc(){return k.lFrame.currentQueryIndex}function Li(e){k.lFrame.currentQueryIndex=e}function Mv(e){let t=e[_];return t.type===2?t.declTNode:t.type===1?e[Fe]:null}function kc(e,t,n){if(n&4){let o=t,i=e;for(;o=o.parent,o===null&&!(n&1);)if(o=Mv(i),o===null||(i=i[cn],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=k.lFrame=jf();return r.currentTNode=t,r.lView=e,!0}function ki(e){let t=jf(),n=e[_];k.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function jf(){let e=k.lFrame,t=e===null?null:e.child;return t===null?Bf(e):t}function Bf(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Uf(){let e=k.lFrame;return k.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Fc=Uf;function Fi(){let e=Uf();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Hf(e){return(k.lFrame.contextLView=Cf(e,k.lFrame.contextLView))[Z]}function jt(){return k.lFrame.selectedIndex}function Bt(e){k.lFrame.selectedIndex=e}function Vf(){return k.lFrame.currentNamespace}var $f=!0;function ji(){return $f}function Bi(e){$f=e}function qa(e,t=null,n=null,r){let o=jc(e,t,n,r);return o.resolveInjectorInitializers(),o}function jc(e,t=null,n=null,r,o=new Set){let i=[n||Ot,pf(e)];return r=r||(typeof e=="object"?void 0:ft(e)),new tn(i,t||Fr(),r||null,o)}var Ke=class e{static THROW_IF_NOT_FOUND=Xt;static NULL=new Or;static create(t,n){if(Array.isArray(t))return qa({name:""},n,t,"");{let r=t.name??"";return qa({name:r},t.parent,t.providers,r)}}static \u0275prov=T({token:e,providedIn:"any",factory:()=>P(dc)});static __NG_ELEMENT_ID__=-1},se=new D(""),hn=(()=>{class e{static __NG_ELEMENT_ID__=Rv;static __NG_ENV_ID__=n=>n}return e})(),Za=class extends hn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return pn(this._lView)}onDestroy(t){let n=this._lView;return Sc(n,t),()=>Sf(n,t)}};function Rv(){return new Za(G())}var Xe=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Ue=new D("",{providedIn:"root",factory:()=>{let e=b(ce),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Xe),t.handleError(n))}}}),Gf={provide:pt,useValue:()=>void b(Xe),multi:!0},Nv=new D("",{providedIn:"root",factory:()=>{let e=b(se).defaultView;if(!e)return;let t=b(Ue),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),b(hn).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Bc(){return sn([ff(()=>void b(Nv))])}function Gr(e,t){let[n,r,o]=Da(e,t?.equal),i=n,s=i[at];return i.set=r,i.update=o,i.asReadonly=zf.bind(i),i}function zf(){let e=this[at];if(e.readonlyFn===void 0){let t=()=>this();t[at]=e,e.readonlyFn=t}return e.readonlyFn}var nn=class{},zr=new D("",{providedIn:"root",factory:()=>!1});var Uc=new D(""),Hc=new D("");var vt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ae(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new H(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}return e})();function Wr(...e){}var Vc=(()=>{class e{static \u0275prov=T({token:e,providedIn:"root",factory:()=>new Ya})}return e})(),Ya=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function us(e){return{toString:e}.toString()}function $v(e){return typeof e=="function"}var Wi=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Cp(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Tl=(()=>{let e=()=>Sp;return e.ngInherit=!0,e})();function Sp(e){return e.type.prototype.ngOnChanges&&(e.setInput=zv),Gv}function Gv(){let e=Tp(this),t=e?.current;if(t){let n=e.previous;if(n===on)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function zv(e,t,n,r,o){let i=this.declaredInputs[r],s=Tp(e)||Wv(e,{previous:on,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Wi(l&&l.currentValue,n,c===on),Cp(e,t,o,n)}var Dp="__ngSimpleChanges__";function Tp(e){return e[Dp]||null}function Wv(e,t){return e[Dp]=t}var Wf=[];var W=function(e,t=null,n){for(let r=0;r<Wf.length;r++){let o=Wf[r];o(e,t,n)}};function qv(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=Sp(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function Zv(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),d!=null&&(e.destroyHooks??=[]).push(n,d)}}function Hi(e,t,n){_p(e,t,3,n)}function Vi(e,t,n,r){(e[N]&3)===n&&_p(e,t,n,r)}function $c(e,t){let n=e[N];(n&3)===t&&(n&=16383,n+=1,e[N]=n)}function _p(e,t,n,r){let o=r!==void 0?e[ln]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[ln]+=65536),(a<i||i==-1)&&(Yv(e,n,t,c),e[ln]=(e[ln]&4294901760)+c+2),c++}function qf(e,t){W(4,e,t);let n=O(null);try{t.call(e)}finally{O(n),W(5,e,t)}}function Yv(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[N]>>14<e[ln]>>16&&(e[N]&3)===t&&(e[N]+=16384,qf(a,i)):qf(a,i)}var Yn=-1,Yr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function Qv(e){return(e.flags&8)!==0}function Kv(e){return(e.flags&16)!==0}function Xv(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];ey(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function Jv(e){return e===3||e===4||e===6}function ey(e){return e.charCodeAt(0)===64}function ds(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Zf(e,n,o,null,t[++r]):Zf(e,n,o,null,null))}}return e}function Zf(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){o!==null&&(e[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),o!==null&&e.splice(i++,0,o)}function xp(e){return e!==Yn}function qi(e){return e&32767}function ty(e){return e>>16}function Zi(e,t){let n=ty(e),r=t;for(;n>0;)r=r[cn],n--;return r}var Qc=!0;function Yf(e){let t=Qc;return Qc=e,t}var ny=256,Mp=ny-1,Rp=5,ry=0,nt={};function oy(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(rn)&&(r=n[rn]),r==null&&(r=n[rn]=ry++);let o=r&Mp,i=1<<o;t.data[e+(o>>Rp)]|=i}function Np(e,t){let n=Ap(e,t);if(n!==-1)return n;let r=t[_];r.firstCreatePass&&(e.injectorIndex=t.length,Gc(r.data,e),Gc(t,null),Gc(r.blueprint,null));let o=_l(e,t),i=e.injectorIndex;if(xp(o)){let s=qi(o),a=Zi(o,t),c=a[_].data;for(let l=0;l<8;l++)t[i+l]=a[s+l]|c[s+l]}return t[i+8]=o,i}function Gc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ap(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function _l(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=Fp(o),r===null)return Yn;if(n++,o=o[cn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Yn}function iy(e,t,n){oy(e,t,n)}function Op(e,t,n){if(n&8||e!==void 0)return e;wi(t,"NodeInjector")}function Pp(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=e[an],i=Te(void 0);try{return o?o.get(t,r,n&8):lc(t,r,n&8)}finally{Te(i)}}return Op(r,t,n)}function Lp(e,t,n,r=0,o){if(e!==null){if(t[N]&2048&&!(r&2)){let s=ly(e,t,n,r,nt);if(s!==nt)return s}let i=kp(e,t,n,r,nt);if(i!==nt)return i}return Pp(t,n,r,o)}function kp(e,t,n,r,o){let i=ay(n);if(typeof i=="function"){if(!kc(t,e,r))return r&1?Op(o,n,r):Pp(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))wi(n);else return s}finally{Fc()}}else if(typeof i=="number"){let s=null,a=Ap(e,t),c=Yn,l=r&1?t[_e][Fe]:null;for((a===-1||r&4)&&(c=a===-1?_l(e,t):t[a+8],c===Yn||!Kf(r,!1)?a=-1:(s=t[_],a=qi(c),t=Zi(c,t)));a!==-1;){let d=t[_];if(Qf(i,a,d.data)){let f=sy(a,t,n,s,r,l);if(f!==nt)return f}c=t[a+8],c!==Yn&&Kf(r,t[_].data[a+8]===l)&&Qf(i,a,t)?(s=d,a=qi(c),t=Zi(c,t)):a=-1}}return o}function sy(e,t,n,r,o,i){let s=t[_],a=s.data[e+8],c=r==null?dn(a)&&Qc:r!=s&&(a.type&3)!==0,l=o&1&&i===a,d=$i(a,s,n,c,l);return d!==null?Yi(t,s,d,a,o):nt}function $i(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,l=e.directiveEnd,d=i>>20,f=r?a:a+d,m=o?a+d:l;for(let p=f;p<m;p++){let y=s[p];if(p<c&&n===y||p>=c&&y.type===n)return p}if(o){let p=s[c];if(p&&fn(p)&&p.type===n)return c}return null}function Yi(e,t,n,r,o){let i=e[n],s=t.data;if(i instanceof Yr){let a=i;if(a.resolving){let p=mi(s[n]);throw cc(p)}let c=Yf(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],d,f=a.injectImpl?Te(a.injectImpl):null,m=kc(e,r,0);try{i=e[n]=a.factory(void 0,o,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&qv(n,s[n],t)}finally{f!==null&&Te(f),Yf(c),a.resolving=!1,Fc()}}return i}function ay(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(rn)?e[rn]:void 0;return typeof t=="number"?t>=0?t&Mp:cy:t}function Qf(e,t,n){let r=1<<e;return!!(n[t+(e>>Rp)]&r)}function Kf(e,t){return!(e&2)&&!(e&1&&t)}var gn=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Lp(this._tNode,this._lView,t,Jt(r),n)}};function cy(){return new gn(Me(),G())}function fs(e){return us(()=>{let t=e.prototype.constructor,n=t[Ar]||Kc(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[Ar]||Kc(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Kc(e){return Xa(e)?()=>{let t=Kc(be(e));return t&&t()}:en(e)}function ly(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[N]&2048&&!Wn(s);){let a=kp(i,s,n,r|2,nt);if(a!==nt)return a;let c=i.parent;if(!c){let l=s[yc];if(l){let d=l.get(n,nt,r);if(d!==nt)return d}c=Fp(s),s=s[cn]}i=c}return o}function Fp(e){let t=e[_],n=t.type;return n===2?t.declTNode:n===1?e[Fe]:null}function uy(){return er(Me(),G())}function er(e,t){return new no(mt(e,t))}var no=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=uy}return e})();function dy(e){return e instanceof no?e.nativeElement:e}function fy(){return this._results[Symbol.iterator]()}var Qi=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ne}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=cf(t);(this._changesDetected=!af(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fy};function jp(e){return(e.flags&128)===128}var xl=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(xl||{}),Bp=new Map,py=0;function hy(){return py++}function gy(e){Bp.set(e[jr],e)}function Xc(e){Bp.delete(e[jr])}var Xf="__ngContext__";function Qn(e,t){gt(t)?(e[Xf]=t[jr],gy(t)):e[Xf]=t}function Up(e){return Vp(e[zn])}function Hp(e){return Vp(e[ke])}function Vp(e){for(;e!==null&&!ze(e);)e=e[ke];return e}var Jc;function Ml(e){Jc=e}function $p(){if(Jc!==void 0)return Jc;if(typeof document<"u")return document;throw new S(210,!1)}var ps=new D("",{providedIn:"root",factory:()=>my}),my="ng",hs=new D(""),tr=new D("",{providedIn:"platform",factory:()=>"unknown"});var gs=new D("",{providedIn:"root",factory:()=>$p().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vy="h",yy="b";var Gp="r";var zp="di";var Wp=!1,qp=new D("",{providedIn:"root",factory:()=>Wp});var by=(e,t,n,r)=>{};function Ey(e,t,n,r){by(e,t,n,r)}function Rl(e){return(e.flags&32)===32}var Iy=()=>null;function Zp(e,t,n=!1){return Iy(e,t,n)}function Yp(e,t){let n=e.contentQueries;if(n!==null){let r=O(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Li(i),a.contentQueries(2,t[s],s)}}}finally{O(r)}}}function el(e,t,n){Li(0);let r=O(null);try{t(e,n)}finally{O(r)}}function Qp(e,t,n){if(Ec(t)){let r=O(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{O(r)}}}var yt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(yt||{});var tl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qa})`}};function Kp(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function Re(e){return e.ownerDocument.defaultView}function Xp(e){return e instanceof Function?e():e}function wy(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var Jp="ng-template";function Cy(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&wy(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Nl(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Nl(e){return e.type===4&&e.value!==Jp}function Sy(e,t,n){let r=e.type===4&&!n?Jp:e.value;return t===r}function Dy(e,t,n){let r=4,o=e.attrs,i=o!==null?xy(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!We(r)&&!We(c))return!1;if(s&&We(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Sy(e,c,n)||c===""&&t.length===1){if(We(r))return!1;s=!0}}else if(r&8){if(o===null||!Cy(e,o,c,n)){if(We(r))return!1;s=!0}}else{let l=t[++a],d=Ty(c,o,Nl(e),n);if(d===-1){if(We(r))return!1;s=!0;continue}if(l!==""){let f;if(d>i?f="":f=o[d+1].toLowerCase(),r&2&&l!==f){if(We(r))return!1;s=!0}}}}return We(r)||s}function We(e){return(e&1)===0}function Ty(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return My(t,e)}function _y(e,t,n=!1){for(let r=0;r<t.length;r++)if(Dy(e,t[r],n))return!0;return!1}function xy(e){for(let t=0;t<e.length;t++){let n=e[t];if(Jv(n))return t}return e.length}function My(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Jf(e,t){return e?":not("+t.trim()+")":t}function Ry(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!We(s)&&(t+=Jf(i,o),o=""),r=s,i=i||!We(r);n++}return o!==""&&(t+=Jf(i,o)),t}function Ny(e){return e.map(Ry).join(",")}function Ay(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!We(o))break;o=i}r++}return n.length&&t.push(1,...n),t}var Et={};function Oy(e,t){return e.createText(t)}function Py(e,t,n){e.setValue(t,n)}function eh(e,t,n){return e.createElement(t,n)}function Ki(e,t,n,r,o){e.insertBefore(t,n,r,o)}function th(e,t,n){e.appendChild(t,n)}function ep(e,t,n,r,o){r!==null?Ki(e,t,n,r,o):th(e,t,n)}function nh(e,t,n){e.removeChild(null,t,n)}function Ly(e,t,n){e.setAttribute(t,"style",n)}function ky(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function rh(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&Xv(e,t,r),o!==null&&ky(e,t,o),i!==null&&Ly(e,t,i)}function Al(e,t,n,r,o,i,s,a,c,l,d){let f=le+r,m=f+o,p=Fy(f,m),y=typeof l=="function"?l():l;return p[_]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1,ssrId:d}}function Fy(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Et);return n}function jy(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Al(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Ol(e,t,n,r,o,i,s,a,c,l,d){let f=t.blueprint.slice();return f[Ge]=o,f[N]=r|4|128|8|64|1024,(l!==null||e&&e[N]&2048)&&(f[N]|=2048),wc(f),f[ee]=f[cn]=e,f[Z]=n,f[ht]=s||e&&e[ht],f[te]=a||e&&e[te],f[an]=c||e&&e[an]||null,f[Fe]=i,f[jr]=hy(),f[$n]=d,f[yc]=l,f[_e]=t.type==2?e[_e]:f,f}function By(e,t,n){let r=mt(t,e),o=jy(n),i=e[ht].rendererFactory,s=Pl(e,Ol(e,o,null,oh(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=s}function oh(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function ih(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Pl(e,t){return e[zn]?e[vc][ke]=t:e[zn]=t,e[vc]=t,t}function yn(e=1){sh(Be(),G(),jt()+e,!1)}function sh(e,t,n,r){if(!r)if((t[N]&3)===3){let i=e.preOrderCheckHooks;i!==null&&Hi(t,i,n)}else{let i=e.preOrderHooks;i!==null&&Vi(t,i,0,n)}Bt(n)}var ms=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ms||{});function nl(e,t,n,r){let o=O(null);try{let[i,s,a]=e.inputs[n],c=null;(s&ms.SignalBased)!==0&&(c=t[i][at]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,i):Cp(t,c,i,r)}finally{O(o)}}var bt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(bt||{}),Uy;function Ll(e,t){return Uy(e,t)}function Zn(e,t,n,r,o){if(r!=null){let i,s=!1;ze(r)?i=r:gt(r)&&(s=!0,r=r[Ge]);let a=je(r);e===0&&n!==null?o==null?th(t,n,a):Ki(t,n,a,o||null,!0):e===1&&n!==null?Ki(t,n,a,o||null,!0):e===2?nh(t,a,s):e===3&&t.destroyNode(a),i!=null&&Xy(t,e,i,n,o)}}function Hy(e,t){ah(e,t),t[Ge]=null,t[Fe]=null}function Vy(e,t,n,r,o,i){r[Ge]=o,r[Fe]=t,ys(e,r,n,1,o,i)}function ah(e,t){t[ht].changeDetectionScheduler?.notify(9),ys(e,t,t[te],2,null,null)}function $y(e){let t=e[zn];if(!t)return zc(e[_],e);for(;t;){let n=null;if(gt(t))n=t[zn];else{let r=t[ie];r&&(n=r)}if(!n){for(;t&&!t[ke]&&t!==e;)gt(t)&&zc(t[_],t),t=t[ee];t===null&&(t=e),gt(t)&&zc(t[_],t),n=t&&t[ke]}t=n}}function kl(e,t){let n=e[un],r=n.indexOf(t);n.splice(r,1)}function vs(e,t){if(pn(t))return;let n=t[te];n.destroyNode&&ys(e,t,n,3,null,null),$y(t)}function zc(e,t){if(pn(t))return;let n=O(null);try{t[N]&=-129,t[N]|=256,t[xe]&&Wo(t[xe]),zy(e,t),Gy(e,t),t[_].type===1&&t[te].destroy();let r=t[kt];if(r!==null&&ze(t[ee])){r!==t[ee]&&kl(r,t);let o=t[Je];o!==null&&o.detachView(e)}Xc(t)}finally{O(n)}}function Gy(e,t){let n=e.cleanup,r=t[Gn];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Gn]=null);let o=t[dt];if(o!==null){t[dt]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[Br];if(i!==null){t[Br]=null;for(let s of i)s.destroy()}}function zy(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Yr)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];W(4,a,c);try{c.call(a)}finally{W(5,a,c)}}else{W(4,o,i);try{i.call(o)}finally{W(5,o,i)}}}}}function Wy(e,t,n){return qy(e,t.parent,n)}function qy(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Ge];if(dn(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===yt.None||o===yt.Emulated)return null}return mt(r,n)}function Zy(e,t,n){return Qy(e,t,n)}function Yy(e,t,n){return e.type&40?mt(e,n):null}var Qy=Yy,tp;function Fl(e,t,n,r){let o=Wy(e,r,t),i=t[te],s=r.parent||t[Fe],a=Zy(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)ep(i,o,n[c],a,!1);else ep(i,o,n,a,!1);tp!==void 0&&tp(i,r,t,n,o)}function qr(e,t){if(t!==null){let n=t.type;if(n&3)return mt(t,e);if(n&4)return rl(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return qr(e,r);{let o=e[t.index];return ze(o)?rl(-1,o):je(o)}}else{if(n&128)return qr(e,t.next);if(n&32)return Ll(t,e)()||je(e[t.index]);{let r=ch(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Pt(e[_e]);return qr(o,r)}else return qr(e,t.next)}}}return null}function ch(e,t){if(t!==null){let r=e[_e][Fe],o=t.projection;return r.projection[o]}return null}function rl(e,t){let n=ie+e+1;if(n<t.length){let r=t[n],o=r[_].firstChild;if(o!==null)return qr(r,o)}return t[Ft]}function jl(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Qn(je(a),r),n.flags|=2),!Rl(n))if(c&8)jl(e,t,n.child,r,o,i,!1),Zn(t,e,o,a,i);else if(c&32){let l=Ll(n,r),d;for(;d=l();)Zn(t,e,o,d,i);Zn(t,e,o,a,i)}else c&16?Ky(e,t,r,n,o,i):Zn(t,e,o,a,i);n=s?n.projectionNext:n.next}}function ys(e,t,n,r,o,i){jl(n,r,e.firstChild,t,o,i,!1)}function Ky(e,t,n,r,o,i){let s=n[_e],c=s[Fe].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Zn(t,e,o,d,i)}else{let l=c,d=s[ee];jp(r)&&(l.flags|=128),jl(e,t,l,d,o,i,!0)}}function Xy(e,t,n,r,o){let i=n[Ft],s=je(n);i!==s&&Zn(t,e,r,i,o);for(let a=ie;a<n.length;a++){let c=n[a];ys(c[_],c,e,t,r,i)}}function Jy(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:bt.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=bt.Important),e.setStyle(n,r,o,i))}}function lh(e,t,n,r,o){let i=jt(),s=r&2;try{Bt(-1),s&&t.length>le&&sh(e,t,le,!1),W(s?2:0,o,n),n(r,o)}finally{Bt(i),W(s?3:1,o,n)}}function uh(e,t,n){rb(e,t,n),(n.flags&64)===64&&ob(e,t,n)}function Bl(e,t,n=mt){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function eb(e,t,n,r){let i=r.get(qp,Wp)||n===yt.ShadowDom,s=e.selectRootElement(t,i);return tb(s),s}function tb(e){nb(e)}var nb=()=>null;function rb(e,t,n){let r=n.directiveStart,o=n.directiveEnd;dn(n)&&By(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Np(n,t);let i=n.initialInputs;for(let s=r;s<o;s++){let a=e.data[s],c=Yi(t,e,s,n);if(Qn(c,t),i!==null&&ab(t,s-r,c,a,n,i),fn(a)){let l=et(n.index,t);l[Z]=Yi(t,e,s,n)}}}function ob(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=kf();try{Bt(i);for(let a=r;a<o;a++){let c=e.data[a],l=t[a];Pi(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ib(c,l)}}finally{Bt(-1),Pi(s)}}function ib(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function sb(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];_y(t,i.selectors,!1)&&(r??=[],fn(i)?r.unshift(i):r.push(i))}return r}function ab(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];nl(r,n,c,l)}}function dh(e,t,n,r,o){let i=le+n,s=t[_],a=o(s,t,e,r,n);t[i]=a,qn(e,!0);let c=e.type===2;return c?(rh(t[te],a,e),(Tf()===0||_i(e))&&Qn(a,t),_f()):Qn(a,t),ji()&&(!c||!Rl(e))&&Fl(s,t,a,e),e}function fh(e){let t=e;return Nc()?Nf():(t=t.parent,qn(t,!1)),t}function cb(e,t){let n=e[an];if(!n)return;n.get(Ue,null)?.(t)}function ph(e,t,n,r,o){let i=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],f=t.data[l];nl(f,n[l],d,o),a=!0}if(i)for(let c of i){let l=n[c],d=t.data[c];nl(d,l,r,o),a=!0}return a}function lb(e,t){let n=et(t,e),r=n[_];ub(r,n);let o=n[Ge];o!==null&&n[$n]===null&&(n[$n]=Zp(o,n[an])),W(18),Ul(r,n,n[Z]),W(19,n[Z])}function ub(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Ul(e,t,n){ki(t);try{let r=e.viewQuery;r!==null&&el(1,r,n);let o=e.template;o!==null&&lh(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Je]?.finishViewCreation(e),e.staticContentQueries&&Yp(e,t),e.staticViewQueries&&el(2,e.viewQuery,n);let i=e.components;i!==null&&db(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[N]&=-5,Fi()}}function db(e,t){for(let n=0;n<t.length;n++)lb(e,t[n])}function bs(e,t,n,r){let o=O(null);try{let i=t.tView,a=e[N]&4096?4096:16,c=Ol(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[kt]=l;let d=e[Je];return d!==null&&(c[Je]=d.createEmbeddedView(i)),Ul(i,c,n),c}finally{O(o)}}function Qr(e,t){return!t||t.firstChild===null||jp(e)}var np=!1,fb=new D("");function Kr(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(je(i)),ze(i)&&hh(i,r);let s=n.type;if(s&8)Kr(e,t,n.child,r);else if(s&32){let a=Ll(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=ch(t,n);if(Array.isArray(a))r.push(...a);else{let c=Pt(t[_e]);Kr(c[_],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function hh(e,t){for(let n=ie;n<e.length;n++){let r=e[n],o=r[_].firstChild;o!==null&&Kr(r[_],r,o,t)}e[Ft]!==e[Ge]&&t.push(e[Ft])}function gh(e){if(e[Ti]!==null){for(let t of e[Ti])t.impl.addSequence(t);e[Ti].length=0}}var mh=[];function pb(e){return e[xe]??hb(e)}function hb(e){let t=mh.pop()??Object.create(mb);return t.lView=e,t}function gb(e){e.lView[xe]!==e&&(e.lView=null,mh.push(e))}var mb=q(E({},Vo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Vr(e.lView)},consumerOnSignalRead(){this.lView[xe]=this}});function vb(e){let t=e[xe]??Object.create(yb);return t.lView=e,t}var yb=q(E({},Vo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Pt(e.lView);for(;t&&!vh(t[_]);)t=Pt(t);t&&Cc(t)},consumerOnSignalRead(){this.lView[xe]=this}});function vh(e){return e.type!==2}function yh(e){if(e[Br]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Br])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[N]&8192)}}var bb=100;function Hl(e,t=0){let r=e[ht].rendererFactory,o=!1;o||r.begin?.();try{Eb(e,t)}finally{o||r.end?.()}}function Eb(e,t){let n=Oc();try{Pc(!0),ol(e,t);let r=0;for(;Hr(e);){if(r===bb)throw new S(103,!1);r++,ol(e,1)}}finally{Pc(n)}}function bh(e,t){Ac(t?$r.Exhaustive:$r.OnlyDirtyViews);try{Hl(e)}finally{Ac($r.Off)}}function Ib(e,t,n,r){if(pn(t))return;let o=t[N],i=!1,s=!1;ki(t);let a=!0,c=null,l=null;i||(vh(e)?(l=pb(t),c=Go(l)):Ho()===null?(a=!1,l=vb(t),c=Go(l)):t[xe]&&(Wo(t[xe]),t[xe]=null));try{wc(t),Af(e.bindingStartIndex),n!==null&&lh(e,t,n,2,r);let d=(o&3)===3;if(!i)if(d){let p=e.preOrderCheckHooks;p!==null&&Hi(t,p,null)}else{let p=e.preOrderHooks;p!==null&&Vi(t,p,0,null),$c(t,0)}if(s||wb(t),yh(t),Eh(t,0),e.contentQueries!==null&&Yp(e,t),!i)if(d){let p=e.contentCheckHooks;p!==null&&Hi(t,p)}else{let p=e.contentHooks;p!==null&&Vi(t,p,1),$c(t,1)}Sb(e,t);let f=e.components;f!==null&&wh(t,f,0);let m=e.viewQuery;if(m!==null&&el(2,m,r),!i)if(d){let p=e.viewCheckHooks;p!==null&&Hi(t,p)}else{let p=e.viewHooks;p!==null&&Vi(t,p,2),$c(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Di]){for(let p of t[Di])p();t[Di]=null}i||(gh(t),t[N]&=-73)}catch(d){throw i||Vr(t),d}finally{l!==null&&(wa(l,c),a&&gb(l)),Fi()}}function Eh(e,t){for(let n=Up(e);n!==null;n=Hp(n))for(let r=ie;r<n.length;r++){let o=n[r];Ih(o,t)}}function wb(e){for(let t=Up(e);t!==null;t=Hp(t)){if(!(t[N]&2))continue;let n=t[un];for(let r=0;r<n.length;r++){let o=n[r];Cc(o)}}}function Cb(e,t,n){W(18);let r=et(t,e);Ih(r,n),W(19,r[Z])}function Ih(e,t){Mi(e)&&ol(e,t)}function ol(e,t){let r=e[_],o=e[N],i=e[xe],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&zo(i)),s||=!1,i&&(i.dirty=!1),e[N]&=-9217,s)Ib(r,e,r.template,e[Z]);else if(o&8192){let a=O(null);try{yh(e),Eh(e,1);let c=r.components;c!==null&&wh(e,c,1),gh(e)}finally{O(a)}}}function wh(e,t,n){for(let r=0;r<t.length;r++)Cb(e,t[r],n)}function Sb(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Bt(~o);else{let i=o,s=n[++r],a=n[++r];Lf(s,i);let c=t[i];W(24,c),a(2,c),W(25,c)}}}finally{Bt(-1)}}function Vl(e,t){let n=Oc()?64:1088;for(e[ht].changeDetectionScheduler?.notify(t);e;){e[N]|=n;let r=Pt(e);if(Wn(e)&&!r)return e;e=r}return null}function Ch(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Sh(e,t){let n=ie+t;if(n<e.length)return e[n]}function Es(e,t,n,r=!0){let o=t[_];if(Db(o,t,e,n),r){let s=rl(n,e),a=t[te],c=a.parentNode(e[Ft]);c!==null&&Vy(o,e[Fe],a,t,c,s)}let i=t[$n];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Dh(e,t){let n=Xr(e,t);return n!==void 0&&vs(n[_],n),n}function Xr(e,t){if(e.length<=ie)return;let n=ie+t,r=e[n];if(r){let o=r[kt];o!==null&&o!==e&&kl(o,r),t>0&&(e[n-1][ke]=r[ke]);let i=Lr(e,ie+t);Hy(r[_],r);let s=i[Je];s!==null&&s.detachView(i[_]),r[ee]=null,r[ke]=null,r[N]&=-129}return r}function Db(e,t,n,r){let o=ie+r,i=n.length;r>0&&(n[o-1][ke]=t),r<i-ie?(t[ke]=n[o],uc(n,ie+r,t)):(n.push(t),t[ke]=null),t[ee]=n;let s=t[kt];s!==null&&n!==s&&Th(s,t);let a=t[Je];a!==null&&a.insertView(e),Ri(t),t[N]|=128}function Th(e,t){let n=e[un],r=t[ee];if(gt(r))e[N]|=2;else{let o=r[ee][_e];t[_e]!==o&&(e[N]|=2)}n===null?e[un]=[t]:n.push(t)}var Ut=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[_];return Kr(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Z]}set context(t){this._lView[Z]=t}get destroyed(){return pn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ee];if(ze(t)){let n=t[Ur],r=n?n.indexOf(this):-1;r>-1&&(Xr(t,r),Lr(n,r))}this._attachedToViewContainer=!1}vs(this._lView[_],this._lView)}onDestroy(t){Sc(this._lView,t)}markForCheck(){Vl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[N]&=-129}reattach(){Ri(this._lView),this._lView[N]|=128}detectChanges(){this._lView[N]|=1024,Hl(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[an].get(fb,np)}catch{this.exhaustive=np}}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Wn(this._lView),n=this._lView[kt];n!==null&&!t&&kl(n,this._lView),ah(this._lView[_],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t;let n=Wn(this._lView),r=this._lView[kt];r!==null&&!n&&Th(r,this._lView),Ri(this._lView)}};var Jr=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Tb;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let i=bs(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Ut(i)}}return e})();function Tb(){return $l(Me(),G())}function $l(e,t){return e.type&4?new Jr(t,e,er(e,t)):null}function Is(e,t,n,r,o){let i=e.data[t];if(i===null)i=_b(e,t,n,r,o),Pf()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=Rf();i.injectorIndex=s===null?-1:s.injectorIndex}return qn(i,!0),i}function _b(e,t,n,r,o){let i=Rc(),s=Nc(),a=s?i:i&&i.parent,c=e.data[t]=Mb(e,a,n,t,r,o);return xb(e,c,i,s),c}function xb(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function Mb(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return Mf()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ZR=new RegExp(`^(\\d+)*(${yy}|${vy})*(.*)`);function Rb(e){let t=e[bc]??[],r=e[ee][te],o=[];for(let i of t)i.data[zp]!==void 0?o.push(i):Nb(i,r);e[bc]=o}function Nb(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[Gp];for(;n<o;){let i=r.nextSibling;nh(t,r,!1),r=i,n++}}}var Ab=()=>null,Ob=()=>null;function il(e,t){return Ab(e,t)}function _h(e,t,n){return Ob(e,t,n)}var xh=class{},ws=class{},sl=class{resolveComponentFactory(t){throw new S(917,!1)}},ro=class{static NULL=new sl},mn=class{};var Mh=(()=>{class e{static \u0275prov=T({token:e,providedIn:"root",factory:()=>null})}return e})();var Gi={},al=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let o=this.injector.get(t,Gi,r);return o!==Gi||n===Gi?o:this.parentInjector.get(t,n,r)}};function Xi(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=Ka(o,a);else if(i==2){let c=a,l=t[++s];r=Ka(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Ht(e,t=0){let n=G();if(n===null)return P(e,t);let r=Me();return Lp(r,n,be(e),t)}function Pb(e,t,n,r,o){let i=r===null?null:{"":-1},s=o(e,n);if(s!==null){let a=s,c=null,l=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,l]=d.resolveHostDirectives(s);break}Fb(e,t,n,a,i,c,l)}i!==null&&r!==null&&Lb(n,r,i)}function Lb(e,t,n){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new S(-301,!1);r.push(t[o],i)}}function kb(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Fb(e,t,n,r,o,i,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let p=r[m];!c&&fn(p)&&(c=!0,kb(e,n,m)),iy(Np(n,t),e,p.type)}$b(n,e.data.length,a);for(let m=0;m<a;m++){let p=r[m];p.providersResolver&&p.providersResolver(p)}let l=!1,d=!1,f=ih(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let p=r[m];if(n.mergedAttrs=ds(n.mergedAttrs,p.hostAttrs),Bb(e,n,t,f,p),Vb(f,p,o),s!==null&&s.has(p)){let[w,M]=s.get(p);n.directiveToIndex.set(p.type,[f,w+n.directiveStart,M+n.directiveStart])}else(i===null||!i.has(p))&&n.directiveToIndex.set(p.type,f);p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let y=p.type.prototype;!l&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!d&&(y.ngOnChanges||y.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),d=!0),f++}jb(e,n,i)}function jb(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let o=e.data[r];if(n===null||!n.has(o))rp(0,t,o,r),rp(1,t,o,r),ip(t,r,!1);else{let i=n.get(o);op(0,t,i,r),op(1,t,i,r),ip(t,r,!0)}}}function rp(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[i]??=[],s[i].push(r),Rh(t,i)}}function op(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),Rh(t,s)}}function Rh(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function ip(e,t,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=e;if(r===null||!n&&o===null||n&&i===null||Nl(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&o.hasOwnProperty(c)){let l=o[c];for(let d of l)if(d===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){let l=i[c];for(let d=0;d<l.length;d+=2)if(l[d]===t){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function Bb(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=en(o.type,!0)),s=new Yr(i,fn(o),Ht,null);e.blueprint[r]=s,n[r]=s,Ub(e,t,r,ih(e,n,o.hostVars,Et),o)}function Ub(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;Hb(s)!=a&&s.push(a),s.push(n,r,i)}}function Hb(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Vb(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;fn(t)&&(n[""]=e)}}function $b(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Nh(e,t,n,r,o,i,s,a){let c=t[_],l=c.consts,d=tt(l,s),f=Is(c,e,n,r,d);return i&&Pb(c,t,f,tt(l,a),o),f.mergedAttrs=ds(f.mergedAttrs,f.attrs),f.attrs!==null&&Xi(f,f.attrs,!1),f.mergedAttrs!==null&&Xi(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function Ah(e,t){Zv(e,t),Ec(t)&&e.queries.elementEnd(t)}function Gb(e,t,n,r,o,i){let s=t.consts,a=tt(s,o),c=Is(t,e,n,r,a);if(c.mergedAttrs=ds(c.mergedAttrs,c.attrs),i!=null){let l=tt(s,i);c.localNames=[];for(let d=0;d<l.length;d+=2)c.localNames.push(l[d],-1)}return c.attrs!==null&&Xi(c,c.attrs,!1),c.mergedAttrs!==null&&Xi(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Cs(e,t,n){if(n===Et)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function zi(e,t,n){return function r(o){let i=dn(e)?et(e.index,t):t;Vl(i,5);let s=t[Z],a=sp(t,s,n,o),c=r.__ngNextListenerFn__;for(;c;)a=sp(t,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function sp(e,t,n,r){let o=O(null);try{return W(6,t,n),n(r)!==!1}catch(i){return cb(e,i),!1}finally{W(7,t,n),O(o)}}function Oh(e,t,n,r,o,i,s,a){let c=_i(e),l=!1,d=null;if(!r&&c&&(d=zb(t,n,i,e.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,l=!0}else{let f=mt(e,n),m=r?r(f):f;Ey(n,m,i,a);let p=o.listen(m,i,a),y=r?w=>r(je(w[e.index])):e.index;Ph(y,t,n,i,a,p,!1)}return l}function zb(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[Gn],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function Ph(e,t,n,r,o,i,s){let a=t.firstCreatePass?Tc(t):null,c=Dc(n),l=c.length;c.push(o,i),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function ap(e,t,n,r,o,i){let s=t[n],a=t[_],l=a.data[n].outputs[r],f=s[l].subscribe(i);Ph(e.index,a,t,o,i,f,!0)}var cl=Symbol("BINDING");var Ji=class extends ro{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Lt(t);return new Kn(n,this.ngModule)}};function Wb(e){return Object.keys(e).map(t=>{let[n,r,o]=e[t],i={propName:n,templateName:t,isSignal:(r&ms.SignalBased)!==0};return o&&(i.transform=o),i})}function qb(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Zb(e,t,n){let r=t instanceof ce?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new al(n,r):n}function Yb(e){let t=e.get(mn,null);if(t===null)throw new S(407,!1);let n=e.get(Mh,null),r=e.get(nn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Qb(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return eh(t,n,n==="svg"?bf:n==="math"?Ef:null)}var Kn=class extends ws{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Wb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=qb(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Ny(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o,i,s){W(22);let a=O(null);try{let c=this.componentDef,l=Kb(r,c,s,i),d=Zb(c,o||this.ngModule,t),f=Yb(d),m=f.rendererFactory.createRenderer(null,c),p=r?eb(m,r,c.encapsulation,d):Qb(c,m),y=s?.some(cp)||i?.some(L=>typeof L!="function"&&L.bindings.some(cp)),w=Ol(null,l,null,512|oh(c),null,null,f,m,d,null,Zp(p,d,!0));w[le]=p,ki(w);let M=null;try{let L=Nh(le,w,2,"#host",()=>l.directiveRegistry,!0,0);p&&(rh(m,p,L),Qn(p,w)),uh(l,w,L),Qp(l,L,w),Ah(l,L),n!==void 0&&Jb(L,this.ngContentSelectors,n),M=et(L.index,w),w[Z]=M[Z],Ul(l,w,null)}catch(L){throw M!==null&&Xc(M),Xc(w),L}finally{W(23),Fi()}return new es(this.componentType,w,!!y)}finally{O(a)}}};function Kb(e,t,n,r){let o=e?["ng-version","20.1.7"]:Ay(t.selectors[0]),i=null,s=null,a=0;if(n)for(let d of n)a+=d[cl].requiredVars,d.create&&(d.targetIdx=0,(i??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let m of f.bindings){a+=m[cl].requiredVars;let p=d+1;m.create&&(m.targetIdx=p,(i??=[]).push(m)),m.update&&(m.targetIdx=p,(s??=[]).push(m))}}let c=[t];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,m=hc(f);c.push(m)}return Al(0,null,Xb(i,s),1,a,c,null,null,null,[o],null)}function Xb(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function cp(e){let t=e[cl].kind;return t==="input"||t==="twoWay"}var es=class extends xh{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=xi(n[_],le),this.location=er(this._tNode,n),this.instance=et(this._tNode.index,n)[Z],this.hostView=this.changeDetectorRef=new Ut(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,i=ph(r,o[_],o,t,n);this.previousInputValues.set(t,n);let s=et(r.index,o);Vl(s,1)}get injector(){return new gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Jb(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var nr=(()=>{class e{static __NG_ELEMENT_ID__=eE}return e})();function eE(){let e=Me();return kh(e,G())}var tE=nr,Lh=class extends tE{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return er(this._hostTNode,this._hostLView)}get injector(){return new gn(this._hostTNode,this._hostLView)}get parentInjector(){let t=_l(this._hostTNode,this._hostLView);if(xp(t)){let n=Zi(t,this._hostLView),r=qi(t),o=n[_].data[r+8];return new gn(o,n)}else return new gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=lp(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ie}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=il(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Qr(this._hostTNode,s)),a}createComponent(t,n,r,o,i,s,a){let c=t&&!$v(t),l;if(c)l=n;else{let M=n||{};l=M.index,r=M.injector,o=M.projectableNodes,i=M.environmentInjector||M.ngModuleRef,s=M.directives,a=M.bindings}let d=c?t:new Kn(Lt(t)),f=r||this.parentInjector;if(!i&&d.ngModule==null){let L=(c?f:this.parentInjector).get(ce,null);L&&(i=L)}let m=Lt(d.componentType??{}),p=il(this._lContainer,m?.id??null),y=p?.firstChild??null,w=d.create(f,o,y,i,s,a);return this.insertImpl(w.hostView,l,Qr(this._hostTNode,p)),w}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(wf(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[ee],l=new Lh(c,c[Fe],c[ee]);l.detach(l.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return Es(s,o,i,r),t.attachToViewContainerRef(),uc(Wc(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=lp(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Xr(this._lContainer,n);r&&(Lr(Wc(this._lContainer),n),vs(r[_],r))}detach(t){let n=this._adjustIndex(t,-1),r=Xr(this._lContainer,n);return r&&Lr(Wc(this._lContainer),n)!=null?new Ut(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function lp(e){return e[Ur]}function Wc(e){return e[Ur]||(e[Ur]=[])}function kh(e,t){let n,r=t[e.index];return ze(r)?n=r:(n=Ch(r,t,null,e),t[e.index]=n,Pl(t,n)),rE(n,t,e,r),new Lh(n,e,t)}function nE(e,t){let n=e[te],r=n.createComment(""),o=mt(t,e),i=n.parentNode(o);return Ki(n,i,r,n.nextSibling(o),!1),r}var rE=sE,oE=()=>!1;function iE(e,t,n){return oE(e,t,n)}function sE(e,t,n,r){if(e[Ft])return;let o;n.type&8?o=je(r):o=nE(t,n),e[Ft]=o}var ll=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},ul=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Gl(t,n).matches!==null&&this.queries[n].setDirty()}},dl=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=hE(t):this.predicate=t}},fl=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},pl=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,aE(n,i)),this.matchTNodeWithReadOption(t,n,$i(n,t,i,!1,!1))}else r===Jr?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,$i(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===no||o===nr||o===Jr&&n.type&4)this.addMatch(n.index,-2);else{let i=$i(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function aE(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function cE(e,t){return e.type&11?er(e,t):e.type&4?$l(e,t):null}function lE(e,t,n,r){return n===-1?cE(t,e):n===-2?uE(e,t,r):Yi(e,e[_],n,t)}function uE(e,t,n){if(n===no)return er(t,e);if(n===Jr)return $l(t,e);if(n===nr)return kh(t,e)}function Fh(e,t,n,r){let o=t[Je].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=i[l];a.push(lE(t,d,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function hl(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=Fh(e,t,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let l=i[a+1],d=t[-c];for(let f=ie;f<d.length;f++){let m=d[f];m[kt]===m[ee]&&hl(m[_],m,l,r)}if(d[un]!==null){let f=d[un];for(let m=0;m<f.length;m++){let p=f[m];hl(p[_],p,l,r)}}}}}return r}function dE(e,t){return e[Je].queries[t].queryList}function fE(e,t,n){let r=new Qi((n&4)===4);return Df(e,t,r,r.destroy),(t[Je]??=new ul).queries.push(new ll(r))-1}function pE(e,t,n){let r=Be();return r.firstCreatePass&&(gE(r,new dl(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),fE(r,G(),t)}function hE(e){return e.split(",").map(t=>t.trim())}function gE(e,t,n){e.queries===null&&(e.queries=new fl),e.queries.track(new pl(t,n))}function Gl(e,t){return e.queries.getByIndex(t)}function mE(e,t){let n=e[_],r=Gl(n,t);return r.crossesNgTemplate?hl(n,e,t,[]):Fh(n,e,r,t)}var up=new Set;function Vt(e){up.has(e)||(up.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Xn=class{},Ss=class{};var ts=class extends Xn{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ji(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=pc(t);this._bootstrapComponents=Xp(i.bootstrap),this._r3Injector=jc(t,n,[{provide:Xn,useValue:this},{provide:ro,useValue:this.componentFactoryResolver},...r],ft(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ns=class extends Ss{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new ts(this.moduleType,t,[])}};var eo=class extends Xn{injector;componentFactoryResolver=new Ji(this);instance=null;constructor(t){super();let n=new tn([...t.providers,{provide:Xn,useValue:this},{provide:ro,useValue:this.componentFactoryResolver}],t.parent||Fr(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function oo(e,t,n=null){return new eo({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var vE=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gc(!1,n.type),o=r.length>0?oo([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(P(ce))})}return e})();function It(e){return us(()=>{let t=jh(e),n=q(E({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===xl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(vE).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||yt.Emulated,styles:e.styles||Ot,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Vt("NgStandalone"),Bh(n);let r=e.dependencies;return n.directiveDefs=dp(r,yE),n.pipeDefs=dp(r,df),n.id=IE(n),n})}function yE(e){return Lt(e)||hc(e)}function bE(e,t){if(e==null)return on;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=ms.None,c=null),n[i]=[r,a,c],t[i]=s}return n}function EE(e){if(e==null)return on;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function zl(e){return us(()=>{let t=jh(e);return Bh(t),t})}function jh(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||on,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ot,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:bE(e.inputs,t),outputs:EE(e.outputs),debugInfo:null}}function Bh(e){e.features?.forEach(t=>t(e))}function dp(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let o of n){let i=t(o);i!==null&&r.push(i)}return r}:null}function IE(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function wE(e,t,n,r,o,i,s,a){if(n.firstCreatePass){e.mergedAttrs=ds(e.mergedAttrs,e.attrs);let d=e.tView=Al(2,e,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),d.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),qn(e,!1);let c=CE(n,t,e,r);ji()&&Fl(n,t,c,e),Qn(c,t);let l=Ch(c,t,c,e);t[r+le]=l,Pl(t,l),iE(l,e,t)}function rs(e,t,n,r,o,i,s,a,c,l,d){let f=n+le,m;if(t.firstCreatePass){if(m=Is(t,f,4,s||null,a||null),l!=null){let p=tt(t.consts,l);m.localNames=[];for(let y=0;y<p.length;y+=2)m.localNames.push(p[y],-1)}}else m=t.data[f];return wE(m,e,t,n,r,o,i,c),l!=null&&Bl(e,m,d),m}var CE=SE;function SE(e,t,n,r){return Bi(!0),t[te].createComment("")}var Wl=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Wl||{}),io=new D(""),Uh=!1,gl=class extends ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,vf()&&(this.destroyRef=b(hn,{optional:!0})??void 0,this.pendingTasks=b(vt,{optional:!0})??void 0)}emit(t){let n=O(null);try{super.next(t)}finally{O(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof K&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pe=gl;function Hh(e){let t,n;function r(){e=Wr;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function fp(e){return queueMicrotask(()=>e()),()=>{e=Wr}}var ql="isAngularZone",os=ql+"_ID",DE=0,Y=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pe(!1);onMicrotaskEmpty=new pe(!1);onStable=new pe(!1);onError=new pe(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=Uh}=t;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,xE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ql)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new S(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,TE,Wr,Wr);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},TE={};function Zl(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _E(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Hh(()=>{e.callbackScheduled=!1,ml(e),e.isCheckStableRunning=!0,Zl(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),ml(e)}function xE(e){let t=()=>{_E(e)},n=DE++;e._inner=e._inner.fork({name:"angular",properties:{[ql]:!0,[os]:n,[os+n]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(ME(c))return r.invokeTask(i,s,a,c);try{return pp(e),r.invokeTask(i,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),hp(e)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return pp(e),r.invoke(i,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!RE(c)&&t(),hp(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,ml(e),Zl(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function ml(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function pp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function hp(e){e._nesting--,Zl(e)}var is=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pe;onMicrotaskEmpty=new pe;onStable=new pe;onError=new pe;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function ME(e){return Vh(e,"__ignore_ng_zone__")}function RE(e){return Vh(e,"__scheduler_tick__")}function Vh(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var $h=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}return e})();var Yl=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Ql=new D("");function so(e){return!!e&&typeof e.then=="function"}function Gh(e){return!!e&&typeof e.subscribe=="function"}var zh=new D("");var Kl=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=b(zh,{optional:!0})??[];injector=b(Ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=fe(this.injector,o);if(so(i))n.push(i);else if(Gh(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ds=new D("");function Wh(){Sa(()=>{let e="";throw new S(600,e)})}function qh(e){return e.isBoundToModule}var NE=10;var bn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=b(Ue);afterRenderManager=b($h);zonelessEnabled=b(zr);rootEffectScheduler=b(Vc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ne;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=b(vt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(n=>!n))}constructor(){b(io,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=b(ce);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Ke.NULL){return this._injector.get(Y).run(()=>{W(10);let s=n instanceof ws;if(!this._injector.get(Kl).done){let y="";throw new S(405,y)}let c;s?c=n:c=this._injector.get(ro).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=qh(c)?void 0:this._injector.get(Xn),d=r||c.selector,f=c.create(o,[],d,l),m=f.location.nativeElement,p=f.injector.get(Ql,null);return p?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),Zr(this.components,f),p?.unregisterApplication(m)}),this._loadComponent(f),W(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){W(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Wl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new S(101,!1);let n=O(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,O(n),this.afterTick.next(),W(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(mn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<NE;)W(14),this.synchronizeOnce(),W(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Hr(o))continue;let i=r&&!this.zonelessEnabled?0:1;Hl(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Hr(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Zr(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Ds,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Zr(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Zr(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var vl=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),o=Math.max(t,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t))}};function qc(e,t,n,r,o){return e===n&&Object.is(t,r)?1:Object.is(o(e,t),o(n,r))?-1:0}function AE(e,t,n){let r,o,i=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;i<=s&&i<=c;){let l=e.at(i),d=t[i],f=qc(i,l,i,d,n);if(f!==0){f<0&&e.updateValue(i,d),i++;continue}let m=e.at(s),p=t[c],y=qc(s,m,c,p,n);if(y!==0){y<0&&e.updateValue(s,p),s--,c--;continue}let w=n(i,l),M=n(s,m),L=n(i,d);if(Object.is(L,M)){let Ze=n(c,p);Object.is(Ze,w)?(e.swap(i,s),e.updateValue(s,p),c--,s--):e.move(s,i),e.updateValue(i,d),i++;continue}if(r??=new ss,o??=mp(e,i,s,n),yl(e,r,i,L))e.updateValue(i,d),i++,s++;else if(o.has(L))r.set(w,e.detach(i)),s--;else{let Ze=e.create(i,t[i]);e.attach(i,Ze),i++,s++}}for(;i<=c;)gp(e,r,n,i,t[i]),i++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&i<=s;){let d=e.at(i),f=l.value,m=qc(i,d,i,f,n);if(m!==0)m<0&&e.updateValue(i,f),i++,l=c.next();else{r??=new ss,o??=mp(e,i,s,n);let p=n(i,f);if(yl(e,r,i,p))e.updateValue(i,f),i++,s++,l=c.next();else if(!o.has(p))e.attach(i,e.create(i,f)),i++,s++,l=c.next();else{let y=n(i,d);r.set(y,e.detach(i)),s--}}}for(;!l.done;)gp(e,r,n,e.length,l.value),l=c.next()}for(;i<=s;)e.destroy(e.detach(s--));r?.forEach(c=>{e.destroy(c)})}function yl(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function gp(e,t,n,r,o){if(yl(e,t,r,n(r,o)))e.updateValue(r,o);else{let i=e.create(r,o);e.attach(r,i)}}function mp(e,t,n,r){let o=new Set;for(let i=t;i<=n;i++)o.add(r(i,e.at(i)));return o}var ss=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),t(r,n)}}};function rr(e,t,n,r,o,i,s,a){Vt("NgControlFlow");let c=G(),l=Be(),d=tt(l.consts,i);return rs(c,l,e,t,n,r,o,d,256,s,a),Xl}function Xl(e,t,n,r,o,i,s,a){Vt("NgControlFlow");let c=G(),l=Be(),d=tt(l.consts,i);return rs(c,l,e,t,n,r,o,d,512,s,a),Xl}function or(e,t){Vt("NgControlFlow");let n=G(),r=Oi(),o=n[r]!==Et?n[r]:-1,i=o!==-1?as(n,le+o):void 0,s=0;if(Cs(n,r,e)){let a=O(null);try{if(i!==void 0&&Dh(i,s),e!==-1){let c=le+e,l=as(n,c),d=wl(n[_],c),f=_h(l,d,n),m=bs(n,d,t,{dehydratedView:f});Es(l,m,s,Qr(d,f))}}finally{O(a)}}else if(i!==void 0){let a=Sh(i,s);a!==void 0&&(a[Z]=t)}}var bl=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ie}};function Jl(e){return e}var El=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function eu(e,t,n,r,o,i,s,a,c,l,d,f,m){Vt("NgControlFlow");let p=G(),y=Be(),w=c!==void 0,M=G(),L=a?s.bind(M[_e][Z]):s,Ze=new El(w,L);M[le+e]=Ze,rs(p,y,e+1,t,n,r,o,tt(y.consts,i),256),w&&rs(p,y,e+2,c,l,d,f,tt(y.consts,m),512)}var Il=class extends vl{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ie}at(t){return this.getLView(t)[Z].$implicit}attach(t,n){let r=n[$n];this.needsIndexUpdate||=t!==this.length,Es(this.lContainer,n,t,Qr(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,OE(this.lContainer,t)}create(t,n){let r=il(this.lContainer,this.templateTNode.tView.ssrId),o=bs(this.hostLView,this.templateTNode,new bl(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(t){vs(t[_],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Z].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Z].$index=t}getLView(t){return PE(this.lContainer,t)}};function tu(e){let t=O(null),n=jt();try{let r=G(),o=r[_],i=r[n],s=n+1,a=as(r,s);if(i.liveCollection===void 0){let l=wl(o,s);i.liveCollection=new Il(a,r,l)}else i.liveCollection.reset();let c=i.liveCollection;if(AE(c,e,i.trackByFn),c.updateIndexes(),i.hasEmptyBlock){let l=Oi(),d=c.length===0;if(Cs(r,l,d)){let f=n+2,m=as(r,f);if(d){let p=wl(o,f),y=_h(m,p,r),w=bs(r,p,void 0,{dehydratedView:y});Es(m,w,0,Qr(p,y))}else o.firstUpdatePass&&Rb(m),Dh(m,0)}}}finally{O(t)}}function as(e,t){return e[t]}function OE(e,t){return Xr(e,t)}function PE(e,t){return Sh(e,t)}function wl(e,t){return xi(e,t)}function vp(e,t,n,r,o){ph(t,e,n,o?"class":"style",r)}function nu(e,t,n,r){let o=G(),i=o[_],s=e+le,a=i.firstCreatePass?Nh(s,o,2,t,sb,xf(),n,r):i.data[s];if(dh(a,o,e,t,Zh),_i(a)){let c=o[_];uh(c,o,a),Qp(c,a,o)}return r!=null&&Bl(o,a),nu}function ru(){let e=Be(),t=Me(),n=fh(t);return e.firstCreatePass&&Ah(e,n),xc(n)&&Mc(),_c(),n.classesWithoutHost!=null&&Qv(n)&&vp(e,n,G(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Kv(n)&&vp(e,n,G(),n.stylesWithoutHost,!1),ru}function En(e,t,n,r){return nu(e,t,n,r),ru(),En}function Ee(e,t,n,r){let o=G(),i=o[_],s=e+le,a=i.firstCreatePass?Gb(s,i,2,t,n,r):i.data[s];return dh(a,o,e,t,Zh),r!=null&&Bl(o,a),Ee}function He(){let e=Me(),t=fh(e);return xc(t)&&Mc(),_c(),He}function ir(e,t,n,r){return Ee(e,t,n,r),He(),ir}var Zh=(e,t,n,r,o)=>(Bi(!0),eh(t[te],r,Vf()));function ou(){return G()}var ao="en-US";var LE=ao;function Yh(e){typeof e=="string"&&(LE=e.toLowerCase().replace(/_/g,"-"))}function Ts(e,t,n){let r=G(),o=Be(),i=Me();return kE(o,r,r[te],i,e,t,n),Ts}function sr(e,t,n){let r=G(),o=Be(),i=Me();return(i.type&3||n)&&Oh(i,o,r,n,r[te],e,t,zi(i,r,t)),sr}function kE(e,t,n,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=zi(r,t,i),Oh(r,e,t,s,n,o,i,c)&&(a=!1)),a){let l=r.outputs?.[o],d=r.hostDirectiveOutputs?.[o];if(d&&d.length)for(let f=0;f<d.length;f+=2){let m=d[f],p=d[f+1];c??=zi(r,t,i),ap(r,t,m,p,o,c)}if(l&&l.length)for(let f of l)c??=zi(r,t,i),ap(r,t,f,o,o,c)}}function iu(e=1){return Hf(e)}function co(e,t,n){pE(e,t,n)}function lo(e){let t=G(),n=Be(),r=Lc();Li(r+1);let o=Gl(n,r);if(e.dirty&&If(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=mE(t,r);e.reset(i,dy),e.notifyOnChanges()}return!0}return!1}function uo(){return dE(G(),Lc())}function Ui(e,t){return e<<17|t<<2}function vn(e){return e>>17&32767}function FE(e){return(e&2)==2}function jE(e,t){return e&131071|t<<17}function Cl(e){return e|2}function Jn(e){return(e&131068)>>2}function Zc(e,t){return e&-131069|t<<2}function BE(e){return(e&1)===1}function Sl(e){return e|1}function UE(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=vn(s),c=Jn(s);e[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Vn(f,d)>0)&&(l=!0)}else d=n;if(o)if(c!==0){let m=vn(e[a+1]);e[r+1]=Ui(m,a),m!==0&&(e[m+1]=Zc(e[m+1],r)),e[a+1]=jE(e[a+1],r)}else e[r+1]=Ui(a,0),a!==0&&(e[a+1]=Zc(e[a+1],r)),a=r;else e[r+1]=Ui(c,0),a===0?a=r:e[c+1]=Zc(e[c+1],r),c=r;l&&(e[r+1]=Cl(e[r+1])),yp(e,d,r,!0),yp(e,d,r,!1),HE(t,d,e,r,i),s=Ui(a,c),i?t.classBindings=s:t.styleBindings=s}function HE(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Vn(i,t)>=0&&(n[r+1]=Sl(n[r+1]))}function yp(e,t,n,r){let o=e[n+1],i=t===null,s=r?vn(o):Jn(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],l=e[s+1];VE(c,t)&&(a=!0,e[s+1]=r?Sl(l):Cl(l)),s=r?vn(l):Jn(l)}a&&(e[n+1]=r?Cl(o):Sl(o))}function VE(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Vn(e,t)>=0:!1}function _s(e,t){return $E(e,t,null,!0),_s}function $E(e,t,n,r){let o=G(),i=Be(),s=Of(2);if(i.firstUpdatePass&&zE(i,e,s,r),t!==Et&&Cs(o,s,t)){let a=i.data[jt()];QE(i,a,o,o[te],e,o[s+1]=KE(t,n),r,s)}}function GE(e,t){return t>=e.expandoStartIndex}function zE(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[jt()],s=GE(e,n);XE(i,r)&&t===null&&!s&&(t=!1),t=WE(o,i,t,r),UE(o,i,t,n,s,r)}}function WE(e,t,n,r){let o=Ff(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=Yc(null,e,t,n,r),n=to(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=Yc(o,e,t,n,r),i===null){let c=qE(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Yc(null,e,t,c[1],r),c=to(c,t.attrs,r),ZE(e,t,r,c))}else i=YE(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function qE(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Jn(r)!==0)return e[vn(r)]}function ZE(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[vn(o)]=r}function YE(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=to(r,s,n)}return to(r,t.attrs,n)}function Yc(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=to(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function to(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),uf(e,s,n?!0:t[++i]))}return e===void 0?null:e}function QE(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],d=BE(l)?bp(c,t,n,o,Jn(l),s):void 0;if(!cs(d)){cs(i)||FE(l)&&(i=bp(c,null,n,o,a,s));let f=Ic(jt(),n);Jy(r,s,f,o,i)}}function bp(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],l=Array.isArray(c),d=l?c[1]:c,f=d===null,m=n[o+1];m===Et&&(m=f?Ot:void 0);let p=f?Si(m,r):d===r?m:void 0;if(l&&!cs(p)&&(p=Si(c,r)),cs(p)&&(a=p,s))return a;let y=e[o+1];o=s?vn(y):Jn(y)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=Si(c,r))}return a}function cs(e){return e!==void 0}function KE(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ft(Kp(e)))),e}function XE(e,t){return(e.flags&(t?8:16))!==0}function rt(e,t=""){let n=G(),r=Be(),o=e+le,i=r.firstCreatePass?Is(r,o,1,t,null):r.data[o],s=JE(r,n,i,t,e);n[o]=s,ji()&&Fl(r,n,s,i),qn(i,!1)}var JE=(e,t,n,r,o)=>(Bi(!0),Oy(t[te],r));function eI(e,t,n,r=""){return Cs(e,Oi(),n)?t+sc(n)+r:Et}function fo(e){return su("",e),fo}function su(e,t,n){let r=G(),o=eI(r,e,t,n);return o!==Et&&tI(r,jt(),o),su}function tI(e,t,n){let r=Ic(t,e);Py(e[te],r,n)}var ls=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},au=(()=>{class e{compileModuleSync(n){return new ns(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=pc(n),i=Xp(o.declarations).reduce((s,a)=>{let c=Lt(a);return c&&s.push(new Kn(c)),s},[]);return new ls(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var nI=(()=>{class e{zone=b(Y);changeDetectionScheduler=b(nn);applicationRef=b(bn);applicationErrorHandler=b(Ue);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qh=new D("",{factory:()=>!1});function cu({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Y(q(E({},uu()),{scheduleInRootZone:n})),[{provide:Y,useFactory:e},{provide:pt,multi:!0,useFactory:()=>{let r=b(nI,{optional:!0});return()=>r.initialize()}},{provide:pt,multi:!0,useFactory:()=>{let r=b(rI);return()=>{r.initialize()}}},t===!0?{provide:Uc,useValue:!0}:[],{provide:Hc,useValue:n??Uh},{provide:Ue,useFactory:()=>{let r=b(Y),o=b(ce),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(Xe),i.handleError(s))})}}}]}function lu(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=cu({ngZoneFactory:()=>{let o=uu(e);return o.scheduleInRootZone=n,o.shouldCoalesceEventChangeDetection&&Vt("NgZone_CoalesceEvent"),new Y(o)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return sn([{provide:Qh,useValue:!0},{provide:zr,useValue:!1},r])}function uu(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var rI=(()=>{class e{subscription=new K;initialized=!1;zone=b(Y);pendingTasks=b(vt);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Kh=(()=>{class e{applicationErrorHandler=b(Ue);appRef=b(bn);taskService=b(vt);ngZone=b(Y);zonelessEnabled=b(zr);tracing=b(io,{optional:!0});disableScheduling=b(Uc,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new K;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(os):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(b(Hc,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof is||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?fp:Hh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(os+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,fp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oI(){return typeof $localize<"u"&&$localize.locale||ao}var du=new D("",{providedIn:"root",factory:()=>b(du,{optional:!0,skipSelf:!0})||oI()});var eg=Symbol("InputSignalNode#UNSET"),pI=q(E({},qo),{transformFn:void 0,applyValueToInputSignal(e,t){Dr(e,t)}});function tg(e,t){let n=Object.create(pI);n.value=e,n.transformFn=t?.transform;function r(){if($o(n),n.value===eg){let o=null;throw new S(-950,o)}return n.value}return r[at]=n,r}var hI=new D("");hI.__NG_ELEMENT_ID__=e=>{let t=Me();if(t===null)throw new S(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new S(204,!1)};function Xh(e,t){return tg(e,t)}function gI(e){return tg(eg,e)}var ng=(Xh.required=gI,Xh);var fu=new D(""),mI=new D("");function po(e){return!e.moduleRef}function vI(e){let t=po(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Y);return n.run(()=>{po(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Ue),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),po(e)){let i=()=>t.destroy(),s=e.platformInjector.get(fu);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(fu);s.add(i),e.moduleRef.onDestroy(()=>{Zr(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return bI(r,n,()=>{let i=t.get(vt),s=i.add(),a=t.get(Kl);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(du,ao);if(Yh(c||ao),!t.get(mI,!0))return po(e)?t.get(bn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(po(e)){let d=t.get(bn);return e.rootComponent!==void 0&&d.bootstrap(e.rootComponent),d}else return yI?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void i.remove(s))})})}var yI;function bI(e,t,n){try{let r=n();return so(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var xs=null;function EI(e=[],t){return Ke.create({name:t,providers:[{provide:kr,useValue:"platform"},{provide:fu,useValue:new Set([()=>xs=null])},...e]})}function II(e=[]){if(xs)return xs;let t=EI(e);return xs=t,Wh(),wI(t),t}function wI(e){let t=e.get(hs,null);fe(e,()=>{t?.forEach(n=>n())})}var rg=(()=>{class e{static __NG_ELEMENT_ID__=CI}return e})();function CI(e){return SI(Me(),G(),(e&16)===16)}function SI(e,t,n){if(dn(e)&&!n){let r=et(e.index,t);return new Ut(r,r)}else if(e.type&175){let r=t[_e];return new Ut(r,t)}return null}function og(e){W(8);try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=II(r),i=[cu({}),{provide:nn,useExisting:Kh},Gf,...n||[]],s=new eo({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return vI({r3Injector:s.injector,platformInjector:o,rootComponent:t})}catch(t){return Promise.reject(t)}finally{W(9)}}var ag=null;function Ct(){return ag}function hu(e){ag??=e}var ho=class{},gu=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(cg),providedIn:"platform"})}return e})();var cg=(()=>{class e extends gu{_location;_history;_doc=b(se);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ct().getBaseHref(this._doc)}onPopState(n){let r=Ct().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ct().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function lg(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function ig(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function $t(e){return e&&e[0]!=="?"?`?${e}`:e}var Ms=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(dg),providedIn:"root"})}return e})(),ug=new D(""),dg=(()=>{class e extends Ms{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lg(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+$t(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+$t(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+$t(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(P(gu),P(ug,8))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ar=(()=>{class e{_subject=new ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=_I(ig(sg(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+$t(r))}normalize(n){return e.stripTrailingSlash(TI(this._basePath,sg(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+$t(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+$t(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=$t;static joinWithSlash=lg;static stripTrailingSlash=ig;static \u0275fac=function(r){return new(r||e)(P(Ms))};static \u0275prov=T({token:e,factory:()=>DI(),providedIn:"root"})}return e})();function DI(){return new ar(P(Ms))}function TI(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function sg(e){return e.replace(/\/index.html$/,"")}function _I(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function mu(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var go=class{};var fg="browser";var Ns=new D(""),Iu=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(P(Ns),P(Y))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),mo=class{_doc;constructor(t){this._doc=t}manager},vu="ng-app-id";function pg(e){for(let t of e)t.remove()}function hg(e,t){let n=t.createElement("style");return n.textContent=e,n}function xI(e,t,n,r){let o=e.head?.querySelectorAll(`style[${vu}="${t}"],link[${vu}="${t}"]`);if(o)for(let i of o)i.removeAttribute(vu),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function bu(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var wu=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,xI(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,hg);r?.forEach(o=>this.addUsage(o,this.external,bu))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(pg(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])pg(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,hg(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,bu(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(P(se),P(ps),P(gs,8),P(tr))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),yu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cu=/%COMP%/g;var mg="%COMP%",MI=`_nghost-${mg}`,RI=`_ngcontent-${mg}`,NI=!0,AI=new D("",{providedIn:"root",factory:()=>NI});function OI(e){return RI.replace(Cu,e)}function PI(e){return MI.replace(Cu,e)}function vg(e,t){return t.map(n=>n.replace(Cu,e))}var Su=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,c,l=null,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new vo(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof Rs?o.applyToHost(n):o instanceof yo&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case yt.Emulated:i=new Rs(c,l,r,this.appId,d,s,a,f,m);break;case yt.ShadowDom:return new Eu(c,l,n,r,s,a,this.nonce,f,m);default:i=new yo(c,l,r,d,s,a,f,m);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(P(Iu),P(wu),P(ps),P(AI),P(se),P(tr),P(Y),P(gs),P(io,8))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),vo=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(yu[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(gg(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(gg(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=yu[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=yu[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(bt.DashCase|bt.Important)?t.style.setProperty(n,r,o&bt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&bt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=Ct().getGlobalEventTarget(this.doc,t),!t))throw new S(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function gg(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Eu=class extends vo{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,i,s,a,c,l){super(t,i,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=o.styles;d=vg(o.id,d);for(let m of d){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=m,this.shadowRoot.appendChild(p)}let f=o.getExternalStyles?.();if(f)for(let m of f){let p=bu(m,i);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yo=class extends vo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,c,l){super(t,i,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let d=r.styles;this.styles=l?vg(l,d):d,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rs=class extends yo{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,c,l){let d=o+"-"+r.id;super(t,n,r,i,s,a,c,l,d),this.contentAttr=OI(d),this.hostAttr=PI(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var As=class e extends ho{supportsDOMEvents=!0;static makeCurrent(){hu(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=LI();return n==null?null:kI(n)}resetBaseElement(){bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return mu(document.cookie,t)}},bo=null;function LI(){return bo=bo||document.head.querySelector("base"),bo?bo.getAttribute("href"):null}function kI(e){return new URL(e,document.baseURI).pathname}var FI=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),bg=(()=>{class e extends mo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||e)(P(se))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),yg=["alt","control","meta","shift"],jI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Eg=(()=>{class e extends mo{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ct().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yg.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=jI[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),yg.forEach(s=>{if(s!==o){let a=BI[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(P(se))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})();function Du(e,t){let n=E({rootComponent:e},UI(t));return og(n)}function UI(e){return{appProviders:[...zI,...e?.providers??[]],platformProviders:GI}}function HI(){As.makeCurrent()}function VI(){return new Xe}function $I(){return Ml(document),document}var GI=[{provide:tr,useValue:fg},{provide:hs,useValue:HI,multi:!0},{provide:se,useFactory:$I}];var zI=[{provide:kr,useValue:"root"},{provide:Xe,useFactory:VI},{provide:Ns,useClass:bg,multi:!0,deps:[se]},{provide:Ns,useClass:Eg,multi:!0,deps:[se]},Su,wu,Iu,{provide:mn,useExisting:Su},{provide:go,useClass:FI},[]];var Ig=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(P(se))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var A="primary",Ao=Symbol("RouteTitle"),Ru=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function pr(e){return new Ru(e)}function qI(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=e[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function ZI(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ot(e[n],t[n]))return!1;return!0}function ot(e,t){let n=e?Nu(e):void 0,r=t?Nu(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!Mg(e[o],t[o]))return!1;return!0}function Nu(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Mg(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function Rg(e){return e.length>0?e[e.length-1]:null}function Tt(e){return La(e)?e:so(e)?X(Promise.resolve(e)):x(e)}var YI={exact:Ag,subset:Og},Ng={exact:QI,subset:KI,ignored:()=>!0};function wg(e,t,n){return YI[n.paths](e.root,t.root,n.matrixParams)&&Ng[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function QI(e,t){return ot(e,t)}function Ag(e,t,n){if(!wn(e.segments,t.segments)||!Ls(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Ag(e.children[r],t.children[r],n))return!1;return!0}function KI(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Mg(e[n],t[n]))}function Og(e,t,n){return Pg(e,t,t.segments,n)}function Pg(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!wn(o,n)||t.hasChildren()||!Ls(o,n,r))}else if(e.segments.length===n.length){if(!wn(e.segments,n)||!Ls(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!Og(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!wn(e.segments,o)||!Ls(e.segments,o,r)||!e.children[A]?!1:Pg(e.children[A],t,i,r)}}function Ls(e,t,n){return t.every((r,o)=>Ng[n](e[o].parameters,r.parameters))}var Dt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new $([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=pr(this.queryParams),this._queryParamMap}toString(){return ew.serialize(this)}},$=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ks(this)}},In=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=pr(this.parameters),this._parameterMap}toString(){return kg(this)}};function XI(e,t){return wn(e,t)&&e.every((n,r)=>ot(n.parameters,t[r].parameters))}function wn(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function JI(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===A&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==A&&(n=n.concat(t(o,r)))}),n}var Zs=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>new hr,providedIn:"root"})}return e})(),hr=class{parse(t){let n=new Ou(t);return new Dt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Eo(t.root,!0)}`,r=rw(t.queryParams),o=typeof t.fragment=="string"?`#${tw(t.fragment)}`:"";return`${n}${r}${o}`}},ew=new hr;function ks(e){return e.segments.map(t=>kg(t)).join("/")}function Eo(e,t){if(!e.hasChildren())return ks(e);if(t){let n=e.children[A]?Eo(e.children[A],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==A&&r.push(`${o}:${Eo(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=JI(e,(r,o)=>o===A?[Eo(e.children[A],!1)]:[`${o}:${Eo(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[A]!=null?`${ks(e)}/${n[0]}`:`${ks(e)}/(${n.join("//")})`}}function Lg(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Os(e){return Lg(e).replace(/%3B/gi,";")}function tw(e){return encodeURI(e)}function Au(e){return Lg(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fs(e){return decodeURIComponent(e)}function Cg(e){return Fs(e.replace(/\+/g,"%20"))}function kg(e){return`${Au(e.path)}${nw(e.parameters)}`}function nw(e){return Object.entries(e).map(([t,n])=>`;${Au(t)}=${Au(n)}`).join("")}function rw(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Os(n)}=${Os(o)}`).join("&"):`${Os(n)}=${Os(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var ow=/^[^\/()?;#]+/;function Tu(e){let t=e.match(ow);return t?t[0]:""}var iw=/^[^\/()?;=#]+/;function sw(e){let t=e.match(iw);return t?t[0]:""}var aw=/^[^=?&#]+/;function cw(e){let t=e.match(aw);return t?t[0]:""}var lw=/^[^&#]+/;function uw(e){let t=e.match(lw);return t?t[0]:""}var Ou=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $([],{}):new $([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[A]=new $(t,n)),r}parseSegment(){let t=Tu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new In(Fs(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=sw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Tu(this.remaining);o&&(r=o,this.capture(r))}t[Fs(n)]=Fs(r)}parseQueryParam(t){let n=cw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=uw(this.remaining);s&&(r=s,this.capture(r))}let o=Cg(n),i=Cg(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tu(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new S(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=A);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[A]:new $([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function Fg(e){return e.segments.length>0?new $([],{[A]:e}):e}function jg(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=jg(o);if(r===A&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new $(e.segments,t);return dw(n)}function dw(e){if(e.numberOfChildren===1&&e.children[A]){let t=e.children[A];return new $(e.segments.concat(t.segments),t.children)}return e}function gr(e){return e instanceof Dt}function fw(e,t,n=null,r=null){let o=Bg(e);return Ug(o,t,n,r)}function Bg(e){let t;function n(i){let s={};for(let c of i.children){let l=n(c);s[c.outlet]=l}let a=new $(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=Fg(r);return t??o}function Ug(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return _u(o,o,o,n,r);let i=pw(t);if(i.toRoot())return _u(o,o,new $([],{}),n,r);let s=hw(i,o,e),a=s.processChildren?wo(s.segmentGroup,s.index,i.commands):Vg(s.segmentGroup,s.index,i.commands);return _u(o,s.segmentGroup,a,n,r)}function js(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Do(e){return typeof e=="object"&&e!=null&&e.outlets}function _u(e,t,n,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;e===t?s=n:s=Hg(e,t,n);let a=Fg(jg(s));return new Dt(a,i,o)}function Hg(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=Hg(i,t,n)}),new $(e.segments,r)}var Bs=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&js(r[0]))throw new S(4003,!1);let o=r.find(Do);if(o&&o!==Rg(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pw(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Bs(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Bs(n,t,r)}var ur=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function hw(e,t,n){if(e.isAbsolute)return new ur(t,!0,0);if(!n)return new ur(t,!1,NaN);if(n.parent===null)return new ur(n,!0,0);let r=js(e.commands[0])?0:1,o=n.segments.length-1+r;return gw(n,o,e.numberOfDoubleDots)}function gw(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new S(4005,!1);o=r.segments.length}return new ur(r,!1,o-i)}function mw(e){return Do(e[0])?e[0].outlets:{[A]:e}}function Vg(e,t,n){if(e??=new $([],{}),e.segments.length===0&&e.hasChildren())return wo(e,t,n);let r=vw(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new $(e.segments.slice(0,r.pathIndex),{});return i.children[A]=new $(e.segments.slice(r.pathIndex),e.children),wo(i,0,o)}else return r.match&&o.length===0?new $(e.segments,{}):r.match&&!e.hasChildren()?Pu(e,t,n):r.match?wo(e,0,o):Pu(e,t,n)}function wo(e,t,n){if(n.length===0)return new $(e.segments,{});{let r=mw(n),o={};if(Object.keys(r).some(i=>i!==A)&&e.children[A]&&e.numberOfChildren===1&&e.children[A].segments.length===0){let i=wo(e.children[A],t,n);return new $(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Vg(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new $(e.segments,o)}}function vw(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(Do(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Dg(c,l,s))return i;r+=2}else{if(!Dg(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Pu(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(Do(i)){let c=yw(i.outlets);return new $(r,c)}if(o===0&&js(n[0])){let c=e.segments[t];r.push(new In(c.path,Sg(n[0]))),o++;continue}let s=Do(i)?i.outlets[A]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&js(a)?(r.push(new In(s,Sg(a))),o+=2):(r.push(new In(s,{})),o++)}return new $(r,{})}function yw(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Pu(new $([],{}),0,r))}),t}function Sg(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Dg(e,t,n){return e==n.path&&ot(t,n.parameters)}var Co="imperative",ue=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(ue||{}),Ve=class{id;url;constructor(t,n){this.id=t,this.url=n}},mr=class extends Ve{type=ue.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends Ve{urlAfterRedirects;type=ue.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ie=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(Ie||{}),Us=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Us||{}),St=class extends Ve{reason;code;type=ue.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zt=class extends Ve{reason;code;type=ue.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},To=class extends Ve{error;target;type=ue.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hs=class extends Ve{urlAfterRedirects;state;type=ue.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lu=class extends Ve{urlAfterRedirects;state;type=ue.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ku=class extends Ve{urlAfterRedirects;state;shouldActivate;type=ue.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fu=class extends Ve{urlAfterRedirects;state;type=ue.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ju=class extends Ve{urlAfterRedirects;state;type=ue.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bu=class{route;type=ue.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uu=class{route;type=ue.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hu=class{snapshot;type=ue.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vu=class{snapshot;type=ue.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$u=class{snapshot;type=ue.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{snapshot;type=ue.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _o=class{},vr=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function bw(e){return!(e instanceof _o)&&!(e instanceof vr)}function Ew(e,t){return e.providers&&!e._injector&&(e._injector=oo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function qe(e){return e.outlet||A}function Iw(e,t){let n=e.filter(r=>qe(r)===t);return n.push(...e.filter(r=>qe(r)!==t)),n}function br(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return br(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Oo(this.rootInjector)}},Oo=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new zu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(P(ce))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Vs=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Wu(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Wu(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=qu(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return qu(t,this._root).map(n=>n.value)}};function Wu(e,t){if(e===t.value)return t;for(let n of t.children){let r=Wu(e,n);if(r)return r}return null}function qu(e,t){if(e===t.value)return[t];for(let n of t.children){let r=qu(e,n);if(r.length)return r.unshift(t),r}return[]}var Ne=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function lr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var $s=class extends Vs{snapshot;constructor(t,n){super(t),this.snapshot=n,nd(this,t)}toString(){return this.snapshot.toString()}};function $g(e){let t=ww(e),n=new ae([new In("",{})]),r=new ae({}),o=new ae({}),i=new ae({}),s=new ae(""),a=new Cn(n,r,i,s,o,A,e,t.root);return a.snapshot=t.root,new $s(new Ne(a,[]),t)}function ww(e){let t={},n={},r={},o="",i=new dr([],t,r,o,n,A,e,null,{});return new zs("",new Ne(i,[]))}var Cn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(l=>l[Ao]))??x(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(t=>pr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(t=>pr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gs(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:E(E({},t.params),e.params),data:E(E({},t.data),e.data),resolve:E(E(E(E({},e.data),t.data),o?.data),e._resolvedData)}:r={params:E({},e.params),data:E({},e.data),resolve:E(E({},e.data),e._resolvedData??{})},o&&zg(o)&&(r.resolve[Ao]=o.title),r}var dr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ao]}constructor(t,n,r,o,i,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},zs=class extends Vs{url;constructor(t,n){super(n),this.url=t,nd(this,n)}toString(){return Gg(this._root)}};function nd(e,t){t.value._routerState=e,t.children.forEach(n=>nd(e,n))}function Gg(e){let t=e.children.length>0?` { ${e.children.map(Gg).join(", ")} } `:"";return`${e.value}${t}`}function xu(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ot(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),ot(t.params,n.params)||e.paramsSubject.next(n.params),ZI(t.url,n.url)||e.urlSubject.next(n.url),ot(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Zu(e,t){let n=ot(e.params,t.params)&&XI(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Zu(e.parent,t.parent))}function zg(e){return typeof e.title=="string"||e.title===null}var Cw=new D(""),Wg=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=A;activateEvents=new pe;deactivateEvents=new pe;attachEvents=new pe;detachEvents=new pe;routerOutletData=ng(void 0);parentContexts=b(Oo);location=b(nr);changeDetector=b(rg);inputBinder=b(Ys,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Yu(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=zl({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tl]})}return e})(),Yu=class{route;childContexts;parent;outletData;constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===Cn?this.route:t===Oo?this.childContexts:t===Cw?this.outletData:this.parent.get(t,n)}},Ys=new D("");var qg=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=It({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&En(0,"router-outlet")},dependencies:[Wg],encapsulation:2})}return e})();function rd(e){let t=e.children&&e.children.map(rd),n=t?q(E({},e),{children:t}):E({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==A&&(n.component=qg),n}function Sw(e,t,n){let r=xo(e,t._root,n?n._root:void 0);return new $s(r,t)}function xo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=Dw(e,t,n);return new Ne(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>xo(e,a)),s}}let r=Tw(t.value),o=t.children.map(i=>xo(e,i));return new Ne(r,o)}}function Dw(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return xo(e,r,o);return xo(e,r)})}function Tw(e){return new Cn(new ae(e.url),new ae(e.params),new ae(e.queryParams),new ae(e.fragment),new ae(e.data),e.outlet,e.component,e)}var Mo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Zg="ngNavigationCancelingError";function Ws(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=gr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Yg(!1,Ie.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Yg(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Zg]=!0,n.cancellationCode=t,n}function _w(e){return Qg(e)&&gr(e.url)}function Qg(e){return!!e&&e[Zg]}var xw=(e,t,n,r)=>B(o=>(new Qu(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),Qu=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),xu(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=lr(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=lr(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=lr(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=lr(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Gu(i.value.snapshot))}),t.children.length&&this.forwardEvent(new Vu(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(xu(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xu(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},qs=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},fr=class{component;route;constructor(t,n){this.component=t,this.route=n}};function Mw(e,t,n){let r=e._root,o=t?t._root:null;return Io(r,o,n,[r.value])}function Rw(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Er(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!ec(e)?e:t.get(e):r}function Io(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=lr(t);return e.children.forEach(s=>{Nw(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>So(a,n.getContext(s),o)),o}function Nw(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=Aw(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new qs(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Io(e,t,a?a.children:null,r,o):Io(e,t,n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new fr(a.outlet.component,s))}else s&&So(t,a,o),o.canActivateChecks.push(new qs(r)),i.component?Io(e,null,a?a.children:null,r,o):Io(e,null,n,r,o);return o}function Aw(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!wn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!wn(e.url,t.url)||!ot(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zu(e,t)||!ot(e.queryParams,t.queryParams);case"paramsChange":default:return!Zu(e,t)}}function So(e,t,n){let r=lr(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?So(s,t.children.getContext(i),n):So(s,null,n):So(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new fr(t.outlet.component,o)):n.canDeactivateChecks.push(new fr(null,o)):n.canDeactivateChecks.push(new fr(null,o))}function Po(e){return typeof e=="function"}function Ow(e){return typeof e=="boolean"}function Pw(e){return e&&Po(e.canLoad)}function Lw(e){return e&&Po(e.canActivate)}function kw(e){return e&&Po(e.canActivateChild)}function Fw(e){return e&&Po(e.canDeactivate)}function jw(e){return e&&Po(e.canMatch)}function Kg(e){return e instanceof ct||e?.name==="EmptyError"}var Ps=Symbol("INITIAL_VALUE");function yr(){return ye(e=>di(e.map(t=>t.pipe(lt(1),ja(Ps)))).pipe(B(t=>{for(let n of t)if(n!==!0){if(n===Ps)return Ps;if(n===!1||Bw(n))return n}return!0}),Le(t=>t!==Ps),lt(1)))}function Bw(e){return gr(e)||e instanceof Mo}function Uw(e,t){return J(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?x(q(E({},n),{guardsResult:!0})):Hw(s,r,o,e).pipe(J(a=>a&&Ow(a)?Vw(r,i,e,t):x(a)),B(a=>q(E({},n),{guardsResult:a})))})}function Hw(e,t,n,r){return X(e).pipe(J(o=>qw(o.component,o.route,n,t,r)),ut(o=>o!==!0,!0))}function Vw(e,t,n,r){return X(t).pipe(Bn(o=>jn(Gw(o.route.parent,r),$w(o.route,r),Ww(e,o.path,n),zw(e,o.route,n))),ut(o=>o!==!0,!0))}function $w(e,t){return e!==null&&t&&t(new $u(e)),x(!0)}function Gw(e,t){return e!==null&&t&&t(new Hu(e)),x(!0)}function zw(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return x(!0);let o=r.map(i=>xr(()=>{let s=br(t)??n,a=Er(i,s),c=Lw(a)?a.canActivate(t,e):fe(s,()=>a(t,e));return Tt(c).pipe(ut())}));return x(o).pipe(yr())}function Ww(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>Rw(s)).filter(s=>s!==null).map(s=>xr(()=>{let a=s.guards.map(c=>{let l=br(s.node)??n,d=Er(c,l),f=kw(d)?d.canActivateChild(r,e):fe(l,()=>d(r,e));return Tt(f).pipe(ut())});return x(a).pipe(yr())}));return x(i).pipe(yr())}function qw(e,t,n,r,o){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return x(!0);let s=i.map(a=>{let c=br(t)??o,l=Er(a,c),d=Fw(l)?l.canDeactivate(e,t,n,r):fe(c,()=>l(e,t,n,r));return Tt(d).pipe(ut())});return x(s).pipe(yr())}function Zw(e,t,n,r){let o=t.canLoad;if(o===void 0||o.length===0)return x(!0);let i=o.map(s=>{let a=Er(s,e),c=Pw(a)?a.canLoad(t,n):fe(e,()=>a(t,n));return Tt(c)});return x(i).pipe(yr(),Xg(r))}function Xg(e){return Na(oe(t=>{if(typeof t!="boolean")throw Ws(e,t)}),B(t=>t===!0))}function Yw(e,t,n,r){let o=t.canMatch;if(!o||o.length===0)return x(!0);let i=o.map(s=>{let a=Er(s,e),c=jw(a)?a.canMatch(t,n):fe(e,()=>a(t,n));return Tt(c)});return x(i).pipe(yr(),Xg(r))}var Ro=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},No=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function cr(e){return Fn(new Ro(e))}function Qw(e){return Fn(new S(4e3,!1))}function Kw(e){return Fn(Yg(!1,Ie.GuardRejected))}var Ku=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return x(r);if(o.numberOfChildren>1||!o.children[A])return Qw(`${t.redirectTo}`);o=o.children[A]}}applyRedirectCommands(t,n,r,o,i){return Xw(n,o,i).pipe(B(s=>{if(s instanceof Dt)throw new No(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new No(a);return a}))}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new Dt(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,o)}),new $(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new S(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}};function Xw(e,t,n){if(typeof e=="string")return x(e);let r=e,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:l,data:d,title:f}=t;return Tt(fe(n,()=>r({params:l,data:d,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:f})))}var Xu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jw(e,t,n,r,o){let i=Jg(e,t,n);return i.matched?(r=Ew(t,r),Yw(r,t,n,o).pipe(B(s=>s===!0?i:E({},Xu)))):x(i)}function Jg(e,t,n){if(t.path==="**")return eC(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?E({},Xu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||qI)(n,e,t);if(!o)return E({},Xu);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?E(E({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function eC(e){return{matched:!0,parameters:e.length>0?Rg(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Tg(e,t,n,r){return n.length>0&&rC(e,n,r)?{segmentGroup:new $(t,nC(r,new $(n,e.children))),slicedSegments:[]}:n.length===0&&oC(e,n,r)?{segmentGroup:new $(e.segments,tC(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new $(e.segments,e.children),slicedSegments:n}}function tC(e,t,n,r){let o={};for(let i of n)if(Qs(e,t,i)&&!r[qe(i)]){let s=new $([],{});o[qe(i)]=s}return E(E({},r),o)}function nC(e,t){let n={};n[A]=t;for(let r of e)if(r.path===""&&qe(r)!==A){let o=new $([],{});n[qe(r)]=o}return n}function rC(e,t,n){return n.some(r=>Qs(e,t,r)&&qe(r)!==A)}function oC(e,t,n){return n.some(r=>Qs(e,t,r))}function Qs(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function iC(e,t,n){return t.length===0&&!e.children[n]}var Ju=class{};function sC(e,t,n,r,o,i,s="emptyOnly"){return new ed(e,t,n,r,o,s,i).recognize()}var aC=31,ed=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ku(this.urlSerializer,this.urlTree)}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=Tg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(B(({children:n,rootSnapshot:r})=>{let o=new Ne(r,n),i=new zs("",o),s=fw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(t){let n=new dr([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),A,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,A,n).pipe(B(r=>({children:r,rootSnapshot:n})),Nt(r=>{if(r instanceof No)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ro?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,o,!0,i).pipe(B(s=>s instanceof Ne?[s]:[]))}processChildren(t,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return X(i).pipe(Bn(s=>{let a=r.children[s],c=Iw(n,s);return this.processSegmentGroup(t,c,a,s,o)}),Fa((s,a)=>(s.push(...a),s)),At(null),ka(),J(s=>{if(s===null)return cr(r);let a=em(s);return cC(a),x(a)}))}processSegment(t,n,r,o,i,s,a){return X(n).pipe(Bn(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,o,i,s,a).pipe(Nt(l=>{if(l instanceof Ro)return x(null);throw l}))),ut(c=>!!c),Nt(c=>{if(Kg(c))return iC(r,o,i)?x(new Ju):cr(r);throw c}))}processSegmentAgainstRoute(t,n,r,o,i,s,a,c){return qe(r)!==s&&(s===A||!Qs(o,i,r))?cr(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,c):cr(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=Jg(n,o,i);if(!c)return cr(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aC&&(this.allowRedirects=!1));let p=new dr(i,l,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,_g(o),qe(o),o.component??o._loadedComponent??null,o,xg(o)),y=Gs(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(y.params),p.data=Object.freeze(y.data),this.applyRedirects.applyRedirectCommands(d,o.redirectTo,f,p,t).pipe(ye(M=>this.applyRedirects.lineralizeSegments(o,M)),J(M=>this.processSegment(t,r,n,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,o,i,s){let a=Jw(n,r,o,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ye(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(ye(({routes:l})=>{let d=r._loadedInjector??t,{parameters:f,consumedSegments:m,remainingSegments:p}=c,y=new dr(m,f,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,_g(r),qe(r),r.component??r._loadedComponent??null,r,xg(r)),w=Gs(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let{segmentGroup:M,slicedSegments:L}=Tg(n,m,p,l);if(L.length===0&&M.hasChildren())return this.processChildren(d,l,M,y).pipe(B(Oe=>new Ne(y,Oe)));if(l.length===0&&L.length===0)return x(new Ne(y,[]));let Ze=qe(r)===i;return this.processSegment(d,l,M,L,Ze?A:i,!0,y).pipe(B(Oe=>new Ne(y,Oe instanceof Ne?[Oe]:[])))}))):cr(n)))}getChildConfig(t,n,r){return n.children?x({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?x({routes:n._loadedRoutes,injector:n._loadedInjector}):Zw(t,n,r,this.urlSerializer).pipe(J(o=>o?this.configLoader.loadChildren(t,n).pipe(oe(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):Kw(n))):x({routes:[],injector:t})}};function cC(e){e.sort((t,n)=>t.value.outlet===A?-1:n.value.outlet===A?1:t.value.outlet.localeCompare(n.value.outlet))}function lC(e){let t=e.value.routeConfig;return t&&t.path===""}function em(e){let t=[],n=new Set;for(let r of e){if(!lC(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=em(r.children);t.push(new Ne(r.value,o))}return t.filter(r=>!n.has(r))}function _g(e){return e.data||{}}function xg(e){return e.resolve||{}}function uC(e,t,n,r,o,i){return J(s=>sC(e,t,n,r,s.extractedUrl,o,i).pipe(B(({state:a,tree:c})=>q(E({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function dC(e,t){return J(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return x(n);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of tm(c))s.add(l);let a=0;return X(s).pipe(Bn(c=>i.has(c)?fC(c,r,e,t):(c.data=Gs(c,c.parent,e).resolve,x(void 0))),oe(()=>a++),Un(1),J(c=>a===s.size?x(n):me))})}function tm(e){let t=e.children.map(n=>tm(n)).flat();return[e,...t]}function fC(e,t,n,r){let o=e.routeConfig,i=e._resolve;return o?.title!==void 0&&!zg(o)&&(i[Ao]=o.title),xr(()=>(e.data=Gs(e,e.parent,n).resolve,pC(i,e,t,r).pipe(B(s=>(e._resolvedData=s,e.data=E(E({},e.data),s),null)))))}function pC(e,t,n,r){let o=Nu(e);if(o.length===0)return x({});let i={};return X(o).pipe(J(s=>hC(e[s],t,n,r).pipe(ut(),oe(a=>{if(a instanceof Mo)throw Ws(new hr,a);i[s]=a}))),Un(1),B(()=>i),Nt(s=>Kg(s)?me:Fn(s)))}function hC(e,t,n,r){let o=br(t)??r,i=Er(e,o),s=i.resolve?i.resolve(t,n):fe(o,()=>i(t,n));return Tt(s)}function Mu(e){return ye(t=>{let n=e(t);return n?X(n).pipe(B(()=>t)):x(t)})}var nm=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===A);return r}getResolvedTitleForRoute(n){return n.data[Ao]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(gC),providedIn:"root"})}return e})(),gC=(()=>{class e extends nm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(P(Ig))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ks=new D("",{providedIn:"root",factory:()=>({})}),Xs=new D(""),rm=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=b(au);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return x(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Tt(fe(n,()=>r.loadComponent())).pipe(B(om),ye(im),oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Mr(()=>{this.componentLoaders.delete(r)})),i=new kn(o,()=>new ne).pipe(Ln());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=mC(r,this.compiler,n,this.onLoadEndListener).pipe(Mr(()=>{this.childrenLoaders.delete(r)})),s=new kn(i,()=>new ne).pipe(Ln());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function mC(e,t,n,r){return Tt(fe(n,()=>e.loadChildren())).pipe(B(om),ye(im),J(o=>o instanceof Ss||Array.isArray(o)?x(o):X(t.compileModuleAsync(o))),B(o=>{r&&r(e);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(Xs,[],{optional:!0,self:!0}).flat()),{routes:s.map(rd),injector:i}}))}function vC(e){return e&&typeof e=="object"&&"default"in e}function om(e){return vC(e)?e.default:e}function im(e){return x(e)}var od=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(yC),providedIn:"root"})}return e})(),yC=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sm=new D("");var am=new D(""),cm=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ne;transitionAbortWithErrorSubject=new ne;configLoader=b(rm);environmentInjector=b(ce);destroyRef=b(hn);urlSerializer=b(Zs);rootContexts=b(Oo);location=b(ar);inputBindingEnabled=b(Ys,{optional:!0})!==null;titleStrategy=b(nm);options=b(Ks,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=b(od);createViewTransition=b(sm,{optional:!0});navigationErrorHandler=b(am,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>x(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new Bu(o)),r=o=>this.events.next(new Uu(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(q(E({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new ae(null),this.transitions.pipe(Le(r=>r!==null),ye(r=>{let o=!1;return x(r).pipe(ye(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ie.SupersededByNewNavigation),me;this.currentTransition=r,this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?q(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new zt(i.id,this.urlSerializer.serialize(i.rawUrl),c,Us.IgnoredSameUrlNavigation)),i.resolve(!1),me}if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return x(i).pipe(ye(c=>(this.events.next(new mr(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?me:Promise.resolve(c))),uC(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),oe(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=q(E({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Hs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:d,restoredState:f,extras:m}=i,p=new mr(c,this.urlSerializer.serialize(l),d,f);this.events.next(p);let y=$g(this.rootComponentType).snapshot;return this.currentTransition=r=q(E({},i),{targetSnapshot:y,urlAfterRedirects:l,extras:q(E({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,x(r)}else{let c="";return this.events.next(new zt(i.id,this.urlSerializer.serialize(i.extractedUrl),c,Us.IgnoredByUrlHandlingStrategy)),i.resolve(!1),me}}),oe(i=>{let s=new Lu(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),B(i=>(this.currentTransition=r=q(E({},i),{guards:Mw(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),Uw(this.environmentInjector,i=>this.events.next(i)),oe(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw Ws(this.urlSerializer,i.guardsResult);let s=new ku(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),Le(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",Ie.GuardRejected),!1)),Mu(i=>{if(i.guards.canActivateChecks.length!==0)return x(i).pipe(oe(s=>{let a=new Fu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ye(s=>{let a=!1;return x(s).pipe(dC(this.paramsInheritanceStrategy,this.environmentInjector),oe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Ie.NoDataFromResolver)}}))}),oe(s=>{let a=new ju(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Mu(i=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=br(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(oe(d=>{a.component=d}),B(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return di(s(i.targetSnapshot.root)).pipe(At(null),lt(1))}),Mu(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?X(a).pipe(B(()=>r)):x(r)}),B(i=>{let s=Sw(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=q(E({},i),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),oe(()=>{this.events.next(new _o)}),xw(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),lt(1),pi(new H(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Le(()=>!o&&!r.targetRouterState),oe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Ie.Aborted)}))),oe({next:i=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gt(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),pi(this.transitionAbortWithErrorSubject.pipe(oe(i=>{throw i}))),Mr(()=>{o||this.cancelNavigationTransition(r,"",Ie.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nt(i=>{if(this.destroyed)return r.resolve(!1),me;if(o=!0,Qg(i))this.events.next(new St(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),_w(i)?this.events.next(new vr(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new To(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=fe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Mo){let{message:c,cancellationCode:l}=Ws(this.urlSerializer,a);this.events.next(new St(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new vr(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return me}))}))}cancelNavigationTransition(n,r,o){let i=new St(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function bC(e){return e!==Co}var EC=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(IC),providedIn:"root"})}return e})(),td=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},IC=(()=>{class e extends td{static \u0275fac=(()=>{let n;return function(o){return(n||(n=fs(e)))(o||e)}})();static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),lm=(()=>{class e{urlSerializer=b(Zs);options=b(Ks,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=b(ar);urlHandlingStrategy=b(od);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Dt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=$g(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>b(wC),providedIn:"root"})}return e})(),wC=(()=>{class e extends lm{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof mr?this.updateStateMemento():n instanceof zt?this.commitTransition(r):n instanceof Hs?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _o?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof St&&n.code!==Ie.SupersededByNewNavigation&&n.code!==Ie.Redirect?this.restoreHistory(r):n instanceof To?this.restoreHistory(r,!0):n instanceof Gt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,c=E(E({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",c)}else{let a=E(E({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=fs(e)))(o||e)}})();static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function um(e,t){e.events.pipe(Le(n=>n instanceof Gt||n instanceof St||n instanceof To||n instanceof zt),B(n=>n instanceof Gt||n instanceof zt?0:(n instanceof St?n.code===Ie.Redirect||n.code===Ie.SupersededByNewNavigation:!1)?2:1),Le(n=>n!==2),lt(1)).subscribe(()=>{t()})}var CC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},id=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=b(Yl);stateManager=b(lm);options=b(Ks,{optional:!0})||{};pendingTasks=b(vt);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=b(cm);urlSerializer=b(Zs);location=b(ar);urlHandlingStrategy=b(od);injector=b(ce);_events=new ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=b(EC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=b(Xs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!b(Ys,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new K;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof St&&r.code!==Ie.Redirect&&r.code!==Ie.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof vr){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=E({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bC(o.source)},s);this.scheduleNavigation(a,Co,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}bw(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Co,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=E({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(c=>{this.disposed||this.injector.get(Ue)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(rd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=E(E({},this.currentUrlTree.queryParams),i);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=o?o.snapshot:this.routerState.snapshot.root;f=Bg(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return Ug(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=gr(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Co,null,r)}navigate(n,r={skipLocationChange:!1}){return DC(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=E({},CC):r===!1?o=E({},SC):o=r,gr(n))return wg(this.currentUrlTree,n,o);let i=this.parseUrl(n);return wg(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return um(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function DC(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new S(4008,!1)}var TC=new D("");function sd(e,...t){return sn([{provide:Xs,multi:!0,useValue:e},[],{provide:Cn,useFactory:_C,deps:[id]},{provide:Ds,multi:!0,useFactory:xC},t.map(n=>n.\u0275providers)])}function _C(e){return e.routerState.root}function xC(){let e=b(Ke);return t=>{let n=e.get(bn);if(t!==n.components[0])return;let r=e.get(id),o=e.get(MC);e.get(RC)===1&&r.initialNavigation(),e.get(NC,null,{optional:!0})?.setUpPreloading(),e.get(TC,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var MC=new D("",{factory:()=>new ne}),RC=new D("",{providedIn:"root",factory:()=>1});var NC=new D("");var dm=[];var fm={providers:[Bc(),lu({eventCoalescing:!0}),sd(dm)]};var u=class{static CANVAS_LIGHT_RATIO=8;static currentFrame=0;static deltaTime=0;static width=0;static height=0;static ctx={};static ctxLight={};static ctx2={};static arrctx=[this.ctx,this.ctx2,this.ctxLight];static paused=!1;static currentTime=0;static menuMode=!0;static debug=!1;static randomCalls=0};var Lo=6.28318530718;function he(e,t,n){return e>n?n:e<t?t:e}function pm(e,t,n,r){return Math.sqrt((e-n)**2+(t-r)**2)}function Js(e,t,n,r,o,i=!0){let s=(e-t)/(n-t)*(o-r)+r;return i?r<o?he(s,r,o):he(s,o,r):s}function ea(e,t,n){return{x:e*n,y:t*n}}function ad(e){let t=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/t,y:e.y/t}}function it(e=1){let t=Math.random()*Lo;return{x:Math.cos(t)*e,y:Math.sin(t)*e}}function cd(e,t,n=0){return e.x-n<t.x+t.width&&e.x-n+e.width+n*2>t.x&&e.y-n<t.y+t.height&&e.height+n*2+e.y-n>t.y}var Ir=class{static castLight(t,n,r,o="#FFF"){u.ctxLight.save(),u.ctxLight.globalCompositeOperation="destination-out";let i=r*2.5*I.zoom/u.CANVAS_LIGHT_RATIO;u.ctxLight.drawImage(g.tilesetUI.image,64,0,32,32,t/u.CANVAS_LIGHT_RATIO-i|0,n/u.CANVAS_LIGHT_RATIO-i|0,i*2|0,i*2|0),u.ctxLight.restore()}static darken(t,n,r,o,i){u.ctxLight.fillStyle="#000",u.ctxLight.globalAlpha=t,u.ctxLight.fillRect(n/u.CANVAS_LIGHT_RATIO,r/u.CANVAS_LIGHT_RATIO,o/u.CANVAS_LIGHT_RATIO,i/u.CANVAS_LIGHT_RATIO),u.ctxLight.globalAlpha=1}static darkenGradient(t,n,r,o,i,s){let a=u.ctxLight.createLinearGradient(r/u.CANVAS_LIGHT_RATIO,o/u.CANVAS_LIGHT_RATIO,r/u.CANVAS_LIGHT_RATIO,o/u.CANVAS_LIGHT_RATIO+s/u.CANVAS_LIGHT_RATIO);a.addColorStop(0,`rgba(0, 0, 0, ${t})`),a.addColorStop(1,`rgba(0, 0, 0, ${n})`),u.ctxLight.fillStyle=a,u.ctxLight.fillRect(r/u.CANVAS_LIGHT_RATIO,o/u.CANVAS_LIGHT_RATIO,i/u.CANVAS_LIGHT_RATIO,s/u.CANVAS_LIGHT_RATIO)}};var U=class{static particles=[];static uiparticles=[];static process(t){for(let n=t.length-1;n>=0;n--){let r=t[n];r.life-=1*u.deltaTime,r.vector.y+=r.gravity,r.vector=ea(r.vector.x,r.vector.y,r.friction),r.x+=r.vector.x*u.deltaTime,r.y+=r.vector.y*u.deltaTime,r.physic&&r.y>10&&(r.life/=2,r.vector.y=-r.vector.y,r.y=8),r.life<=0&&t.splice(n,1)}}static add(t){I.isVisible(t.x,t.y,1,1)&&this.particles.push(t)}static addUi(t){this.uiparticles.push(t)}static addNotification(t,n,r,o,i=25,s=!1){let a={x:n,y:r,text:t,size:1,color:o,friction:.9,gravity:0,life:i,physic:!1,vector:{x:Math.random()-.5,y:-2}};s?this.addUi(a):this.add(a)}};var g=class e{static tilesCache=[];static layerCache=new Map;static tilesetMonsters;static tilesetTerrain;static tilesetTowers;static tilesetSpells;static tilesetBuildings;static tilesetUI;static tilesetDecors;static tooltipEnabled=!1;static tooltip={title:"",description:[""],ctx:1,width:0,height:0};static FONT_LARGE="50px Metamorphous";static FONT_MEDIUM="16px Metamorphous";static FONT_SMALL="12px Metamorphous";static animFrame=0;static ANIM_FREQ=20;static load(){this.layerCache.clear(),this.tilesCache=[],this.layerCache.set(-2,0),this.layerCache.set(-1,1),this.layerCache.set(0,2);let t=0;for(let n=1;n<h.depthMax;n++)h.layers[t]<n&&t++,this.layerCache.set(n,t+3);for(let n=(-h.width/2/this.tilesetTerrain.width|0)-1;n<=(h.width/2/this.tilesetTerrain.width|0);n+=1)for(let r=-2;r<h.depthMax;r+=1)this.tilesCache[n]||(this.tilesCache[n]=[]),this.tilesCache[n][r]=h.random(n+r,0,4)|0}static loadImages(){this.tilesetTerrain=this.loadTileset("terrain.png",128,32,512,512),this.tilesetTowers=this.loadTileset("towers.png",64,128,256,256),this.tilesetMonsters=this.loadTileset("monsters.png",16,16,256,256),this.tilesetSpells=this.loadTileset("spells.png",16,16,160,160),this.tilesetBuildings=this.loadTileset("buildings.png",16,16,320,320),this.tilesetUI=this.loadTileset("ui.png",32,32,160,160),this.tilesetDecors=this.loadTileset("decors.png",32,32,320,320)}static loadTileset(t,n,r,o,i){let s=new Image;return s.src=`assets/${t}`,{image:s,width:n,height:r,columns:o/n|0,rows:i/r|0}}static drawTerrain(){u.currentFrame%this.ANIM_FREQ==0&&this.animFrame++;for(let t of h.decors)t.display();for(let t=(-h.width/2/this.tilesetTerrain.width|0)-1;t<=(h.width/2/this.tilesetTerrain.width|0);t+=1)for(let n=-2;n<h.depthMax;n+=1){let r=1;n<=-2&&(r=.8),this.drawImageFromSet(t*this.tilesetTerrain.width,n*this.tilesetTerrain.height,this.tilesetTerrain.width,this.tilesetTerrain.height,this.tilesetTerrain,this.tilesCache[t][n],this.layerCache.get(n),r)}}static drawTerrainFog(){Ir.darkenGradient(0,1.1,0,20*I.zoom-I.offsetY,u.width,31*I.zoom),Ir.darken(1,0,50*I.zoom-I.offsetY,u.width,3e3)}static drawObjects(){for(let t of h.groundObjects)t.display();this.drawRect(-10,-60,20,60,"#1e0f03ff"),this.drawImageFromSet(-this.tilesetTowers.width/2,-this.tilesetTowers.height+5,this.tilesetTowers.width,this.tilesetTowers.height,this.tilesetTowers,1,h.tower*this.tilesetTowers.height)}static drawEnemies(){for(let t of h.enemies)if(t)for(let n of t){let r=0;n.damaged>0&&(r=20,n.damaged-=1),this.drawImageFromSetFull(n.x,n.y,n.def.width,n.def.height,this.tilesetMonsters,n.def.spriteCoords[0].x,n.def.spriteCoords[0].y,n.def.spriteCoords[0].w,n.def.spriteCoords[0].h,1,n.facingRight,r),n.display()}}static drawSpells(){for(let t of h.spells)t.display()}static drawBuildings(){for(let t of h.buildings)this.drawImageFromSetFull(t.x,t.y,t.width*v.GRID_SIZE,t.height*v.GRID_SIZE,this.tilesetBuildings,t.def.spriteCoords[this.animFrame%t.def.spriteCoords.length].x,t.def.spriteCoords[this.animFrame%t.def.spriteCoords.length].y,t.width*this.tilesetBuildings.width,t.height*this.tilesetBuildings.height),t.display(),Ir.castLight((t.x+t.width*v.GRID_SIZE/2)*I.zoom-I.offsetX,(t.y+t.height*v.GRID_SIZE/2)*I.zoom-I.offsetY,t.def.light||h.buildingLightPower)}static drawParticles(){u.ctx2.font=this.FONT_SMALL,u.ctx2.textAlign="center",u.ctx2.textBaseline="middle";for(let t of U.particles)if(t.text)u.ctx2.fillStyle=t.color,this.drawTextUi(t.text,t.x*I.zoom-I.offsetX,t.y*I.zoom-I.offsetY);else{let n=Js(t.life,10,1,t.size,.1,!0);this.drawRect(t.x-t.size/2,t.y-t.size/2,n,n,t.color)}for(let t of U.uiparticles)t.text?(u.ctx2.fillStyle=t.color,this.drawTextUi(t.text,t.x,t.y)):this.drawRectUI(t.x-t.size/2,t.y-t.size/2,t.size,t.size,t.color)}static setTooltip(t,n=1,r){if(this.tooltipEnabled=!0,this.tooltip.title==t)return;this.tooltip.title=t,this.tooltip.ctx=n,r?this.tooltip.description=r.split(`
`):this.tooltip.description=[],u.arrctx[this.tooltip.ctx].font=e.FONT_SMALL;let o=0;for(let s of this.tooltip.description){let a=u.arrctx[n].measureText(s).width;o<a&&(o=a)}let i=u.arrctx[n].measureText(t).width;o<i&&(o=i),this.tooltip.width=o+20,this.tooltip.height=25+this.tooltip.description.length*25}static displayTooltip(){if(!this.tooltipEnabled)return;let t=0;if(u.arrctx[this.tooltip.ctx].fillStyle="#2f2f2fb1",C.mouseX<u.width/2?(u.arrctx[this.tooltip.ctx].fillRect(C.mouseX+t,C.mouseY-20,this.tooltip.width,this.tooltip.height),u.arrctx[this.tooltip.ctx].textAlign="left",t=12):(u.arrctx[this.tooltip.ctx].fillRect(C.mouseX+t,C.mouseY-20,-this.tooltip.width,this.tooltip.height),u.arrctx[this.tooltip.ctx].textAlign="right",t=-12),u.arrctx[this.tooltip.ctx].textBaseline="bottom",u.arrctx[this.tooltip.ctx].fillStyle="white",u.arrctx[this.tooltip.ctx].font=e.FONT_SMALL,e.drawTextUi(this.tooltip.title,C.mouseX+t,C.mouseY,!0,this.tooltip.ctx),this.tooltip.description)for(let n=0;n<this.tooltip.description.length;n++)e.drawTextUi(this.tooltip.description[n],C.mouseX+t,C.mouseY+n*20+25,!0,this.tooltip.ctx);this.tooltipEnabled=!1}static drawRect(t,n,r,o,i){i&&(u.ctx.fillStyle=i),u.ctx.fillRect(t*I.zoom-I.offsetX,n*I.zoom-I.offsetY,Math.ceil(r*I.zoom),Math.ceil(o*I.zoom))}static drawCircleStrokeDashAnimated(t,n,r,o,i=1){o&&(u.ctx.strokeStyle=o),u.ctx.lineWidth=i,u.ctx.lineDashOffset=u.currentFrame/2,u.ctx.setLineDash([10,25]),u.ctx.beginPath(),u.ctx.arc(t*I.zoom-I.offsetX,n*I.zoom-I.offsetY,Math.ceil(r*I.zoom),0,Lo),u.ctx.stroke()}static drawImageFromSet(t,n,r,o,i,s,a,c=1,l=!1,d=0){this.drawImageFromSetFull(t,n,r,o,i,s*i.width,a*i.height,i.width,i.height,c,l,d)}static drawImageFromSetFull(t,n,r,o,i,s,a,c,l,d=1,f=!1,m=0){u.ctx.save(),u.ctx.translate((t+r/2)*I.zoom-I.offsetX*d|0,(n+o/2)*I.zoom-I.offsetY|0),f&&u.ctx.scale(-1,1),u.ctx.rotate(m),u.ctx.drawImage(i.image,s,a,c,l,-r/2*I.zoom|0,-o/2*I.zoom|0,I.zoom*r|0,I.zoom*o|0),u.ctx.restore()}static drawLine(t,n,r,o,i){i&&(u.ctx.strokeStyle=i),u.ctx.beginPath(),u.ctx.moveTo(t*I.zoom-I.offsetX,n*I.zoom-I.offsetY),u.ctx.lineTo(r*I.zoom-I.offsetX,o*I.zoom-I.offsetY),u.ctx.stroke()}static drawTextUi(t,n,r,o=!0,i=1){o&&(u.arrctx[i].strokeStyle="rgba(0, 0, 0, 0.5)",u.arrctx[i].lineWidth=3,u.arrctx[i].strokeText(t,n,r)),u.arrctx[i].fillText(t,n,r)}static drawRectUI(t,n,r,o,i){i&&(u.ctx2.fillStyle=i),u.ctx2.fillRect(t,n,r,o)}};var ko=class{constructor(t,n,r,o,i,s,a){this.type=t;this.x=n;this.y=r;this.width=o;this.height=i;this.graphics=s;this.vector=a}display(){g.drawImageFromSetFull(this.x,this.y,this.width,this.height,this.graphics.tileset,this.graphics.x,this.graphics.y,this.graphics.w,this.graphics.h,this.graphics.parralax||1),!u.paused&&this.vector&&(this.x+=this.vector.x,this.y+=this.vector.y)}};var v=class e{def;x;y;width;height;gridx;gridy;_isToBeRemoved=!1;id;static ID=0;static GRID_SIZE=10;static MIN_BUILD_Y=20;constructor(t,n,r){this.def=t,this.x=n,this.y=r,this.width=t.dimension.width,this.height=t.dimension.height,this.gridx=e.getBuildingCoordinateX(this.x),this.gridy=e.getBuildingCoordinateY(this.y),this.id=e.ID++}remove(){this._isToBeRemoved=!0}get isToBeRemoved(){return this._isToBeRemoved}process(){}display(){}getTooltip(){return this.def.name}update(){}static isBuildingAllowedHere(t,n,r){if(n<this.MIN_BUILD_Y)return"Must be placed in the ground";if(t<h.boundsLeft||t>h.boundsRight||n>h.boundsBottom)return"Must be inbound";let o=!1;for(let i=0;i<r.dimension.width;i++)for(let s=0;s<r.dimension.height;s++)if(o||(o=this.hasBlockAdjacent(t+i*e.GRID_SIZE,n+s*e.GRID_SIZE)),e.isBlockOccupied(t+i*e.GRID_SIZE,n+s*e.GRID_SIZE))return"The space is occupied";if(!o)return"Must be next to another building";if(this.getPlaceablesNodesOnBuilding(t,n,r,2)>0)return"Stone is blocking the way";for(let i of r.positionRestrictions){if(i==0&&n>=this.MIN_BUILD_Y+this.GRID_SIZE)return"Must be on the top layer";if(i==1&&this.getPlaceablesNodesOnBuilding(t,n,r,1)<=0)return"Must be placed on iron ore";if(i==2&&this.getPlaceablesNodesOnBuilding(t,n,r,3)<=0)return"Must be placed on coal ore";if(i==3&&this.getPlaceablesNodesOnBuilding(t,n,r,4)<=0)return"Must be placed on a mana crystal"}return null}static getPlaceablesNodesOnBuilding(t,n,r,o){let i=0;for(let s=t;s<t+e.GRID_SIZE*r.dimension.width;s+=e.GRID_SIZE)for(let a=n;a<n+e.GRID_SIZE*r.dimension.height;a+=e.GRID_SIZE){let c=h.getGroundObjectAt(s,a);c&&c.type==o&&i++}return i}static hasBlockAdjacent(t,n){return!!(this.isBlockOccupied(t-this.GRID_SIZE,n)||this.isBlockOccupied(t+this.GRID_SIZE,n)||this.isBlockOccupied(t,n-this.GRID_SIZE)||this.isBlockOccupied(t,n+this.GRID_SIZE))}static isBlockOccupied(t,n){return this.getBuildingIDOnCoordinate(t,n)>=0}static getBuildingIDOnCoordinate(t,n){let r=this.getBuildingCoordinateX(t),o=this.getBuildingCoordinateY(n),i=h.buildingGrid.get(`${r}_${o}`);return i?i.id:-1}static getBuildingCoordinateX(t){return(t/e.GRID_SIZE|0)*e.GRID_SIZE}static getBuildingCoordinateY(t){return(t/e.GRID_SIZE|0)*e.GRID_SIZE}};var Sn=new Map([[0,{name:"Gold",spriteCoords:{x:0,y:32,width:16,height:16}}],[6,{name:"Mana",spriteCoords:{x:96,y:32,width:16,height:16}}],[1,{name:"Iron",spriteCoords:{x:16,y:32,width:16,height:16},color:"#363e40"}],[2,{name:"Mana Crystals",spriteCoords:{x:32,y:32,width:16,height:16}}],[3,{name:"Coal",spriteCoords:{x:48,y:32,width:16,height:16}}],[4,{name:"Steel",spriteCoords:{x:64,y:32,width:16,height:16}}],[5,{name:"Bones",spriteCoords:{x:80,y:32,width:16,height:16}}]]);function ge(e){let t=Sn.get(e);return t||console.error(`Resource ${e} doesn't exist.`),t}var Dn=class e{constructor(t,n,r,o,i,s,a){this.x=t;this.y=n;this.width=r;this.height=o;this.def=i;this.target=s;this.lifetime=this.def.lifetime||e.DEFAULT_LIFETIME,this.modifiers=new Map;for(let c of a)this.modifiers.set(c,(this.modifiers.get(c)||0)+1);this.bounces=this.hasModifier(7),this.width+=this.hasModifier(8),this.height+=this.hasModifier(8),this.splashPowerMod+=this.hasModifier(8)*2,this.onSpawn()}static DEFAULT_LIFETIME=1e3;lifetime;modifiers;bounces=0;splashPowerMod=0;static ElementsColor={0:"#000000",1:"#d314e4ff",2:"#e88310ff",3:"#159eb6ff",4:"#fae94fff",5:"#2ad617ff",6:"#730066ff"};onSpawn(){}process(){this.lifetime-=1;for(let t of this.getTypes()){let n=e.ElementsColor[t];if(n!=e.ElementsColor[0]){let r=Math.random()*10;U.add({x:this.x+this.width/2,y:this.y+this.height/2,size:1,life:12,color:n,friction:.2,gravity:0,physic:!0,vector:it(r)})}}}onDeath(){this.lifetime=0}hasModifier(t){return this.modifiers.get(t)||0}getTypes(){let t=[];return this.hasModifier(11)&&t.push(2),this.hasModifier(12)&&t.push(5),this.hasModifier(13)&&t.push(3),this.hasModifier(14)&&t.push(4),this.hasModifier(15)&&t.push(1),this.def.types.concat(t)}static getDescription(t){let n="";if(t.cost&&t.cost.length>0){n=`
Cost per cast: `;for(let r of t.cost)n+=` ${r.amount} ${ge(r.resource).name}`}return`${t.description}
${n}
        Damages : ${t.damage}
        Speed : ${t.speed}
        Cooldown : ${(t.cooldown/60).toFixed(1)} s
        Splash : ${t.splashRadius||0} m / ${t.splashDamage||0} damages`}};var ta=class extends Dn{destination={x:0,y:0};tile;vector={x:0,y:0};orientation=0;colorRange;noSeekingFrames=0;zigzag=0;constructor(t,n,r,o,i){super(t,n,4,4,o,r,i),this.tile=o.tile,this.colorRange=o.params.colorRange,this.target.x<this.x?this.vector.x=-this.def.speed:this.vector.x=this.def.speed,this.vector.y=-1}display(){g.drawImageFromSet(this.x,this.y,this.width,this.height,g.tilesetSpells,this.tile%g.tilesetSpells.columns,this.tile/g.tilesetSpells.columns|0,1,!1,this.orientation+Math.PI)}process(){if(super.process(),this.moveToDestination(),this.y>10){this.onHit([]),this.splash(),this.onDeath();return}let t=h.getEnemiesAtPosition(this.x,this.y);if(t&&t.length>0){let r=[];for(let o of t)if(cd(this,o)){r.push(o);break}r.length>0&&(this.onHit(r),this.onDeath(),this.splash(t))}let n=Math.random()*2;U.add({x:this.x+this.width/2,y:this.y+this.height/2,size:1,life:20,color:`rgba(${this.colorRange.red[0]+n*this.colorRange.red[1]|0}, ${this.colorRange.green[0]+n*this.colorRange.green[1]|0}, ${this.colorRange.blue[0]+n*this.colorRange.blue[1]|0}, 1)`,friction:.5,gravity:0,physic:!0,vector:it(n)}),this.hasModifier(1)&&this.lifetime%2==0&&U.add({x:this.x+this.width/2,y:this.y+this.height/2,size:1,life:10,color:`rgba(${240+n*10|0}, ${190+n*10|0}, ${70+n*10|0}, 1)`,friction:.5,gravity:0,physic:!0,vector:it(n*3)})}splash(t){if(!this.def.splashRadius||!this.def.splashDamage)return;t||(t=h.getEnemiesAtPosition(this.x,this.y));let n=[];for(let r of t)cd(this,r,this.def.splashRadius+this.splashPowerMod)&&n.push(r);this.onSplashHit(n)}onDeath(){super.onDeath(),this.bounces>0&&(this.lifetime=this.def.lifetime||Dn.DEFAULT_LIFETIME,this.vector.y=-this.vector.y,this.y-=5,this.noSeekingFrames=this.def.seekingPower+1,this.orientation=Math.atan2(this.vector.y,this.vector.x),this.bounces--)}calculateDestination(){if(this.target.life<=0)for(let i=0;i<5;i++){let s=z.getNextTarget();if(s&&s.x*this.x>0){this.target=s;break}}let t=(this.hasModifier(5)+1)/(this.hasModifier(4)+1);this.destination={x:this.target.x+this.target.def.width/2,y:this.target.y+this.target.def.height/2};let n=this.destination.x-this.x,r=this.destination.y-this.y,o=ad({x:n,y:r});if(this.vector.x+=o.x,this.vector.y+=o.y,this.hasModifier(16)){for(let i=0;i<this.hasModifier(16);i++)this.vector.x+=Math.cos(this.zigzag),this.vector.y+=Math.sin(this.zigzag);this.zigzag+=this.def.speed}this.vector=ad(this.vector),this.vector=ea(this.vector.x,this.vector.y,this.def.speed*t),this.orientation=Math.atan2(this.vector.y,this.vector.x)}moveToDestination(){this.noSeekingFrames<=0&&this.lifetime%Math.max(1,this.def.seekingPower-this.hasModifier(6)*2)==0&&this.calculateDestination(),this.noSeekingFrames>0&&this.noSeekingFrames--,this.x+=this.vector.x*u.deltaTime,this.y+=this.vector.y*u.deltaTime}onHit(t){for(let n of t)n.hit(this.def.damage,this.getTypes(),!0,this.modifiers)}onSplashHit(t){for(let n of t)n.hit(this.def.splashDamage,this.getTypes(),!0,this.modifiers);for(let n=0;n<10+(this.def.splashRadius+this.def.splashDamage+this.splashPowerMod)*2;n++){let r=Math.random()*((this.def.splashRadius||1)+this.splashPowerMod)/8;U.add({x:this.x+this.width/2,y:this.y+this.height/2,size:1,life:20,color:`rgba(${this.colorRange.red[0]+r*this.colorRange.red[1]|0}, ${this.colorRange.green[0]+r*this.colorRange.green[1]|0}, ${this.colorRange.blue[0]+r*this.colorRange.blue[1]|0}, 1)`,friction:.8,gravity:0,physic:!0,vector:it(r*2)})}}};function mm(e,t,n,r,o){switch(e.className){case"projectile":return new ta(t,n,r,e,o)}return null}var vm=new Map([["magicmissile",{speed:1.5,cooldown:20,splashRadius:2,splashDamage:5,damage:10,seekingPower:6,tags:[0],types:[1],name:"Magic missile",tile:0,className:"projectile",description:"A ghost projectile, strong against magical enemies.",cost:[],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:100}],params:{colorRange:{red:[100,60],green:[10,60],blue:[232,0]}}}],["bloodshot",{speed:1,cooldown:30,splashRadius:10,splashDamage:10,damage:20,seekingPower:8,tags:[1],types:[0],name:"Blood shot",tile:1,className:"projectile",description:"A physical projectile, blocked by most armors.",costAsBuilding:[{resource:0,amount:250},{resource:1,amount:400}],cost:[{resource:1,amount:10}],params:{colorRange:{red:[255,0],green:[10,60],blue:[10,60]}}}],["fireball",{speed:2,cooldown:30,splashRadius:20,splashDamage:20,damage:5,seekingPower:15,tags:[2],types:[2],name:"Fireball",tile:2,className:"projectile",description:"An unprecise but deadly explosion.",costAsBuilding:[{resource:0,amount:250},{resource:2,amount:50}],cost:[{resource:2,amount:5}],params:{colorRange:{red:[255,0],green:[70,70],blue:[0,10]}}}],["blade",{speed:2.5,cooldown:20,splashRadius:2,splashDamage:2,damage:35,seekingPower:4,tags:[1],types:[0],name:"Blade Summon",tile:3,className:"projectile",description:"A fast and deadly physical blade.",costAsBuilding:[{resource:0,amount:250},{resource:4,amount:200}],cost:[{resource:4,amount:10}],params:{colorRange:{red:[240,15],green:[0,10],blue:[0,10]}}}],["acidball",{speed:.8,cooldown:60,splashRadius:6,splashDamage:6,lifetime:1200,damage:40,seekingPower:15,tags:[2],types:[5],name:"Acid Ball",tile:4,className:"projectile",description:"A slow acid ball.",costAsBuilding:[{resource:0,amount:250},{resource:5,amount:200}],cost:[{resource:5,amount:10}],params:{colorRange:{red:[0,15],green:[255,0],blue:[0,10]}}}],["iceshard",{speed:1.5,cooldown:60,splashRadius:2,splashDamage:2,damage:20,seekingPower:6,tags:[2],types:[3],name:"Ice shard",tile:5,className:"projectile",description:"An ice shard to chill your enemies.",costAsBuilding:[{resource:0,amount:250},{resource:2,amount:50}],cost:[{resource:2,amount:2}],params:{colorRange:{red:[35,0],green:[235,20],blue:[225,20]}}}],["thunderbolt",{speed:4,cooldown:60,splashRadius:10,splashDamage:20,damage:40,seekingPower:3,tags:[2],types:[4],name:"Thunderbolt",tile:6,className:"projectile",description:"A fast and deadly lightning bolt.",costAsBuilding:[{resource:0,amount:250},{resource:2,amount:100}],cost:[{resource:2,amount:4}],params:{colorRange:{red:[235,20],green:[235,20],blue:[80,100]}}}],["iceball",{speed:1.5,cooldown:50,splashRadius:25,splashDamage:20,damage:15,seekingPower:10,tags:[2],types:[3],name:"Ice ball",tile:20,className:"projectile",description:"An ice ball ready to explode.",costAsBuilding:[{resource:0,amount:250},{resource:2,amount:100}],cost:[{resource:2,amount:4}],params:{colorRange:{red:[50,100],green:[235,20],blue:[240,10]}}}],["bloodtear",{speed:1.5,cooldown:20,splashRadius:2,splashDamage:8,damage:15,seekingPower:6,tags:[0],types:[0],name:"Blood tear",tile:21,className:"projectile",description:"A bloody spell, dealing physical damages.",cost:[],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:120}],params:{colorRange:{red:[240,-10],green:[0,10],blue:[40,0]}}}],["firearrow",{speed:1.8,cooldown:20,splashRadius:2,splashDamage:4,damage:16,seekingPower:6,tags:[0],types:[2,0],name:"Fire arrow",tile:22,className:"projectile",description:"A simple fire arrow, summoned by magic.",cost:[],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:120}],params:{colorRange:{red:[255,0],green:[70,70],blue:[0,10]}}}],["acidmaw",{speed:2,cooldown:20,damage:25,splashRadius:2,splashDamage:12,seekingPower:4,tags:[1],types:[5],name:"Acid maw",tile:23,className:"projectile",description:"An acid creature will try to eat any foes in its path.",cost:[{resource:4,amount:15}],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:150}],params:{colorRange:{red:[0,15],green:[255,0],blue:[0,10]}}}],["thunderball",{speed:1.4,cooldown:20,damage:15,splashRadius:2,splashDamage:15,seekingPower:8,tags:[0],types:[4],name:"Thunder Ball",tile:24,className:"projectile",description:"A ball of lightning and thunder.",cost:[],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:150}],params:{colorRange:{red:[235,20],green:[235,20],blue:[80,100]}}}],["poisonshot",{speed:1.8,cooldown:30,damage:6,splashRadius:15,splashDamage:4,seekingPower:6,tags:[1],types:[6],name:"Poison Shot",tile:25,className:"projectile",description:"A ball of poison. Will poison your enemies, dealing a few damages over time.",cost:[{resource:1,amount:10}],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:150}],params:{colorRange:{red:[110,20],green:[8,0],blue:[180,20]}}}],["acidshot",{speed:1.5,cooldown:30,damage:12,splashRadius:2,splashDamage:4,seekingPower:6,tags:[0],types:[5],name:"Acid Shot",tile:26,className:"projectile",description:"A projectile made of acid. Melt the face of your enemies.",cost:[],costAsBuilding:[{resource:0,amount:100},{resource:1,amount:150}],params:{colorRange:{red:[0,20],green:[255,0],blue:[40,20]}}}]]);function _t(e){let t=vm.get(e);return t||console.error(`Spell ${e} doesn't exist.`),t}function na(){return Array.from(vm.keys())}var ym=new Map([[1,{name:"Golden",description:"The kills will earn you more gold.",costAsBuilding:[{resource:0,amount:1e3}],tile:10,cooldown:50,cost:[{resource:4,amount:10}]}],[4,{name:"Projectile Slowness",description:"Makes the spell a bit slower.",costAsBuilding:[{resource:0,amount:200}],tile:13,cooldown:-20}],[5,{name:"Projectile Acceleration",description:"Makes the spell a bit faster.",costAsBuilding:[{resource:0,amount:200}],tile:14,cooldown:-20}],[6,{name:"Better Seeking",description:"Makes the spell better at tracking targets.",costAsBuilding:[{resource:0,amount:600}],tile:15,cooldown:20}],[7,{name:"Bouncing",description:"Makes the spell bounce to another target.",costAsBuilding:[{resource:0,amount:500}],tile:16,cooldown:20,cost:[{resource:2,amount:2}]}],[8,{name:"Projectile size up",description:"Makes the spell BIGGER.",costAsBuilding:[{resource:0,amount:1500}],tile:17,cooldown:20,cost:[{resource:2,amount:3}]}],[10,{name:"Projectile split",description:"Makes the spell divides itself at launch.",costAsBuilding:[{resource:0,amount:2e3}],tile:19,cooldown:20,cost:[{resource:2,amount:3}]}],[11,{name:"Fire element",description:"Adds the fire element to the spell.",costAsBuilding:[{resource:0,amount:500},{resource:2,amount:20}],tile:30,cost:[{resource:2,amount:1}]}],[12,{name:"Acid element",description:"Adds the acid element to the spell.",costAsBuilding:[{resource:0,amount:500},{resource:2,amount:20}],tile:31,cost:[{resource:2,amount:1}]}],[13,{name:"Ice element",description:"Adds the ice element to the spell.",costAsBuilding:[{resource:0,amount:500},{resource:2,amount:20}],tile:32,cost:[{resource:2,amount:1}]}],[14,{name:"Lightning element",description:"Adds the lightning element to the spell.",costAsBuilding:[{resource:0,amount:500},{resource:2,amount:20}],tile:33,cost:[{resource:2,amount:1}]}],[15,{name:"Ghost element",description:"Adds the ghost element to the spell.",costAsBuilding:[{resource:0,amount:500},{resource:2,amount:20}],tile:34,cost:[{resource:2,amount:1}]}],[16,{name:"Zigzag",description:"Makes the projectile spell perform zig-zag patterns.",costAsBuilding:[{resource:0,amount:500}],tile:35,cooldown:-30}]]);function xt(e){let t=ym.get(e);return t||console.error(`Modifier ${e} doesn't exist.`),t}function bm(){return Array.from(ym.keys())}var st=class e extends v{radius;aura;auraColor;static auraMap=new Map;static AURA_GRID_SIZE=10;centerx;centery;constructor(t,n,r){super(t,n,r),this.radius=t.params.radius,this.aura=t.params.aura,this.auraColor=t.params.auraColor,this.centerx=this.x+this.width*v.GRID_SIZE/2,this.centery=this.y+this.height*v.GRID_SIZE/2}display(){e.drawAura(this.centerx,this.centery,this.radius,this.auraColor)}static drawAura(t,n,r,o){g.drawCircleStrokeDashAnimated(t,n,r,o)}calculateAura(){let t=this.x-this.radius,n=this.y-this.radius;for(let r=t;r<=this.centerx+this.radius;r+=e.AURA_GRID_SIZE)for(let o=n;o<=this.centery+this.radius;o+=e.AURA_GRID_SIZE)pm(r,o,this.centerx,this.centery)<=this.radius&&e.addAura(r,o,this.aura)}update(){this.calculateAura()}static resetAura(){this.auraMap.clear()}static addAura(t,n,r){let o=t/this.AURA_GRID_SIZE|0,i=n/this.AURA_GRID_SIZE|0;this.auraMap.has(`${o}_${i}`)||this.auraMap.set(`${o}_${i}`,[]),this.auraMap.get(`${o}_${i}`)?.push(r)}static getAuraAt(t,n){let r=t/this.AURA_GRID_SIZE|0,o=n/this.AURA_GRID_SIZE|0;return this.auraMap.get(`${r}_${o}`)||[]}};var ra=class e{constructor(t,n,r,o){this.x=t;this.def=n;this.mult=r;this.idOverride=o;this.id=o||e.ID++,this.life=n.maxLife*r|0,this.y=h.random(this.id,this.def.y.min,this.def.y.max)-n.height,this.originalY=this.y,this.range=Math.max(h.random(this.id+1,this.def.range.min,this.def.range.max),20),this.basespeed=h.random(this.id+2,this.def.speed.min,this.def.speed.max),n.aura&&(this.aura=n.aura,this.aura.color="#"+n.aura.type.toString(16).padStart(6,"0"),this.aura.type==4278190229&&(this.aura.effect=1996488704),this.aura.type==1431655829&&(this.aura.effect=1717986816),this.aura.type==285147285&&(this.aura.effect=277348352),this.aura.type==277383317&&(this.aura.effect=2281701376)),this.clock=Math.random()*60|0,this.effects=new Map}y;originalY;id;static ID=0;facingRight=!1;life;gravity=.5;vector={x:0,y:0};clock;targetOfSpells=0;damaged=0;range;basespeed;aura;effects;display(){this.aura&&g.drawCircleStrokeDashAnimated(this.x+this.width/2,this.y+this.height/2,this.aura.radius,this.aura.color);let t=0;for(let n of this.effects.keys())g.drawRect(this.x+t,this.y-1,.5,.5,"#"+n.toString(16).padStart(6,"0")),t+=1}process(){this.clock++,this.move(),z.setNextTarget(this),this.clock%60==0&&(this.processEffects(),this.processAura()),this.clock%180==0&&(this.targetOfSpells=0)}move(){this.x>this.range+this.vector.x?(this.vector.x=-(this.speed*u.deltaTime),this.facingRight=!1):this.x<-(this.range+this.vector.x+this.width)?(this.vector.x=this.speed*u.deltaTime,this.facingRight=!0):this.vector.x=0,this.gravity&&this.y<this.originalY+this.vector.y&&(this.vector.y=this.gravity),this.x+=this.vector.x,this.y+=this.vector.y,this.y>this.originalY&&(this.y=this.originalY)}processEffects(){this.hasEffect(14582043)&&this.hit(5,[2],!1),this.hasEffect(1113895)&&this.hit(5,[5],!1),this.hasEffect(7209140)&&this.hit(3,[6],!1),this.hasEffect(277348352)&&this.hit(-5,[],!1);for(let[t,n]of this.effects)this.effects.set(t,n-60),this.effects.get(t)<=0&&this.effects.delete(t)}processAura(){if(!this.aura)return;let t=h.getEnemiesAtPosition(this.x,this.y);for(let n of t)n.effects.set(this.aura.effect,120)}hit(t,n,r=!0,o){if(this.isActive()){this.hasEffect(16710785)&&(t+=t/2|0),this.hasEffect(1717986816)&&(t-=t/2|0),o?.has(1)&&this.effects.set(4089596160,o.get(1)||0);for(let i of n)if(r&&this.applyEffect(i),this.def.resistances){let s=this.def.resistances.find(a=>a.type==i);s&&(t=t-s.amount/n.length)}t<=0||(this.life-=t,this.damaged=10,this.life<=0&&this.onDeath())}}applyEffect(t){switch(t){case 2:this.effects.set(14582043,300);return;case 5:this.effects.set(1113895,300);return;case 3:this.effects.set(2553317,300);return;case 4:this.effects.set(16710785,300);return;case 6:this.effects.set(7209140,600);return}}hasEffect(t){return(this.effects.get(t)||0)>0}isActive(){return this.life>0}isToBeDeleted(){return this.damaged<=0&&this.life<=0}atRange(){return this.x<=this.range*1.1&&this.x+this.width>=-this.range*1.1}onDeath(){let t=this.def.maxLife*this.mult|0;this.hasEffect(4089596160)&&(t+=(t/2|0)*(this.effects.get(4089596160)||0)),h.addResource(0,t),st.getAuraAt(this.x,this.y).includes(0)&&h.addResource(5,5),U.addNotification(`+${t} gold`,this.x,this.y,"rgb(224, 236, 54)")}get width(){return this.def.width}get height(){return this.def.height}get damage(){return this.hasEffect(1996488704)?this.def.damage*this.mult*1.5|0:this.def.damage*this.mult|0}get speed(){let t=1;return this.hasEffect(2553317)&&(t-=.5),this.hasEffect(2281701376)&&(t+=.5),this.basespeed*t}};var oa=class extends ra{constructor(t,n,r,o){super(t,n,r,o)}move(){super.move(),this.y+=Math.sin(this.clock/2)/5,this.clock%this.def.attackSpeed==0&&this.atRange()&&(this.y-=1,z.setLife(-this.damage))}};function ia(e,t,n,r){switch(e.className){case"trooper":return new oa(t,e,n,r);default:return null}}var Em=new Map([["trooper",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.2,max:.25},range:{min:18,max:25},attackSpeed:60,damage:1,maxLife:10,faction:0,spriteCoords:[{x:0,y:0,w:16,h:16}],challengeRating:1,resistances:[{type:0,amount:2}]}],["archer",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.1,max:.18},range:{min:45,max:75},attackSpeed:60,damage:1,maxLife:5,faction:0,spriteCoords:[{x:16,y:0,w:16,h:16}],challengeRating:1,resistances:[{type:0,amount:1}]}],["dualhander",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.3,max:.35},range:{min:18,max:25},attackSpeed:30,damage:1,maxLife:15,faction:0,spriteCoords:[{x:0,y:16,w:16,h:16}],challengeRating:2,resistances:[{type:0,amount:1}]}],["barbarian",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.2,max:.3},range:{min:18,max:30},attackSpeed:60,damage:5,maxLife:25,faction:0,spriteCoords:[{x:16,y:16,w:16,h:16}],challengeRating:2,resistances:[{type:0,amount:2}]}],["shieldshandler",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.1,max:.2},range:{min:18,max:25},attackSpeed:30,damage:2,maxLife:40,faction:0,spriteCoords:[{x:48,y:16,w:16,h:16}],challengeRating:3,resistances:[{type:0,amount:5}]}],["arbalestrier",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.1,max:.15},range:{min:50,max:90},attackSpeed:100,damage:5,maxLife:10,faction:0,spriteCoords:[{x:64,y:16,w:16,h:16}],challengeRating:2,resistances:[{type:0,amount:2}]}],["whitepriest",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.1,max:.15},range:{min:18,max:100},attackSpeed:100,damage:1,maxLife:30,faction:0,spriteCoords:[{x:32,y:0,w:16,h:16}],challengeRating:3,resistances:[{type:0,amount:2}],aura:{type:285147285,radius:15}}],["blackpriest",{className:"trooper",width:5,height:5,y:{min:0,max:8},speed:{min:.1,max:.15},range:{min:18,max:100},attackSpeed:100,damage:1,maxLife:30,faction:0,spriteCoords:[{x:64,y:0,w:16,h:16}],challengeRating:3,resistances:[{type:0,amount:2}],aura:{type:1431655829,radius:15}}],["bannerlord",{className:"trooper",width:5,height:10,y:{min:0,max:8},speed:{min:.1,max:.15},range:{min:18,max:100},attackSpeed:100,damage:1,maxLife:30,faction:0,spriteCoords:[{x:112,y:0,w:16,h:32}],challengeRating:3,resistances:[{type:0,amount:2}],aura:{type:4278190229,radius:15}}],["megatrooper",{className:"trooper",width:10,height:10,y:{min:0,max:8},speed:{min:.1,max:.15},range:{min:18,max:25},attackSpeed:60,damage:10,maxLife:100,faction:0,spriteCoords:[{x:80,y:0,w:32,h:32}],challengeRating:10,resistances:[{type:0,amount:8}]}]]);function Im(e){let t=Em.get(e);return t||console.error(`Enemy ${e} doesn't exist.`),t}function wm(e,t){let n=[];for(let[o,i]of Em)i.challengeRating==e&&n.push(o);let r=h.random(t,0,n.length-.001)|0;return n[r]}var we=class{constructor(t,n={x:0,y:0}){this.resizeFunction=t;this.offset=n;this.resize()}enabled=!0;x=0;y=0;width=0;height=0;id="";tooltip="";tooltipDescription="";hover=!1;display(){C.mouseX>this.x&&C.mouseX<this.x+this.width&&C.mouseY>this.y&&C.mouseY<this.y+this.height?(this.hover=!0,this.tooltip&&g.setTooltip(this.getTooltip(),1,this.tooltipDescription)):this.hover=!1}resize(){let t=this.resizeFunction(this.offset.x,this.offset.y);this.x=he(t.x,2,u.width),this.y=he(t.y,2,u.height),this.width=Math.min(t.w,u.width-2),this.height=Math.min(t.h,u.height-2)}getTooltip(){return this.tooltip}};var Ae=class extends we{constructor(n,r,o,i,s={x:0,y:0},a){super(n,s);this.tiles=o;this.tilesHover=i;this.options=a;this.onClick=r,this.iconSize=this.width/2.5,this.iconPadding=(this.width-this.iconSize)/2,a?.text&&(this.text=a?.text)}pressed=!1;onClick;iconSize=0;iconPadding=0;notification=!1;text;display(){this.pressed&&C.mouseClicked<0&&(this.notification=!1,this.onClick(),this.pressed=!1),this.hover?C.mouseClicked==0&&(this.pressed=!0):this.pressed=!1,this.tilesHover&&this.hover?u.ctx2.drawImage(this.tilesHover.tileset.image,this.tilesHover.x,this.tilesHover.y,this.tilesHover.w,this.tilesHover.h,this.x,this.y,this.width,this.height):u.ctx2.drawImage(this.tiles.tileset.image,this.tiles.x,this.tiles.y,this.tiles.w,this.tiles.h,this.x,this.y,this.width,this.height),this.options?.additionalTile&&u.ctx2.drawImage(this.options.additionalTile.tileset.image,this.options.additionalTile.x,this.options.additionalTile.y,this.options.additionalTile.w,this.options.additionalTile.h,this.x+this.iconPadding,this.y+this.iconPadding,this.iconSize,this.iconSize),this.options?.text&&this.text&&(u.ctx2.fillStyle="#fff",u.ctx2.font=g.FONT_SMALL,u.ctx2.textAlign="center",u.ctx2.textBaseline="middle",g.drawTextUi(this.text,this.x+this.width/2,this.y+this.height/2)),super.display(),this.notification&&(u.ctx2.fillStyle="#d91111ff",u.ctx2.beginPath(),u.ctx2.arc(this.x+1,this.y+1,6+Math.sin(u.currentFrame/15),0,Lo),u.ctx2.fill())}resize(){super.resize(),this.iconSize=this.width/2.5,this.iconPadding=(this.width-this.iconSize)/2}setNotification(n){this.notification=n}};var Wt=class extends we{constructor(n,r,o={x:0,y:0},i){super(n,o);this.resource=r;this.amount=i;this.desc=ge(r),this.tooltip=this.desc.name}desc;display(){u.ctx2.fillStyle="white",this.amount&&this.amount>h.getResource(this.resource)&&(u.ctx2.fillStyle="red"),u.ctx2.textAlign="left",u.ctx2.textBaseline="top",u.ctx2.font=g.FONT_MEDIUM,g.drawTextUi(""+(this.amount||h.getResource(this.resource)),this.x+17,this.y),u.ctx2.drawImage(g.tilesetUI.image,this.desc.spriteCoords.x,this.desc.spriteCoords.y,this.desc.spriteCoords.width,this.desc.spriteCoords.height,this.x,this.y,16,16),super.display()}getTooltip(){return this.amount?`${this.amount} ${this.tooltip}`:super.getTooltip()}};var Mt=class e extends we{enabled=!1;uielements=[];uitabselements=[];static BUTTON_SIZE=40;static BUTTON_SPACING=10;notifications={tabSpells:!0,tabBuilds:!1};static tabs={tabSpells:{categories:[0,1]},tabBuilds:{categories:[3,4,6]}};currentTab=e.tabs.tabBuilds.categories;display(){super.display(),u.ctx2.fillStyle="#d1925fba",u.ctx2.strokeStyle="#904b41",u.ctx2.fillRect(this.x,this.y,this.width,this.height),u.ctx2.strokeRect(this.x,this.y,this.width,this.height);for(let t of this.uielements)t.display();for(let t of this.uitabselements)t.display()}update(){this.uielements=[];let t=new Ae((r,o)=>({x:this.x-110,y:this.y,w:96,h:48}),()=>{this.currentTab=e.tabs.tabSpells.categories,this.setTabs(this.currentTab),this.notifications.tabSpells=!1},{x:48,y:48,w:32,h:16,tileset:g.tilesetUI},{x:80,y:48,w:32,h:16,tileset:g.tilesetUI},{x:0,y:0});t.tooltip="Spells and modifiers",t.setNotification(this.notifications.tabSpells),this.uielements.push(t);let n=new Ae((r,o)=>({x:this.x-110,y:this.y+58,w:96,h:48}),()=>{this.currentTab=e.tabs.tabBuilds.categories,this.setTabs(this.currentTab),this.notifications.tabBuilds=!1},{x:48,y:64,w:32,h:16,tileset:g.tilesetUI},{x:80,y:64,w:32,h:16,tileset:g.tilesetUI},{x:0,y:0});n.tooltip="Buildings",n.setNotification(this.notifications.tabBuilds),this.uielements.push(n),this.setTabs(this.currentTab)}setTabs(t){this.uitabselements=[];let n=e.BUTTON_SPACING,r=e.BUTTON_SPACING,o=0;for(let i of h.availableBuildings){let s=!1;for(let a of i.categories)t.includes(a)&&(s=!0);s&&(n+e.BUTTON_SIZE*i.dimension.width+e.BUTTON_SPACING>this.width&&(r+=e.BUTTON_SIZE*o+e.BUTTON_SPACING,n=e.BUTTON_SPACING,o=0),this.addBuildingButton(i,n,r),o<i.dimension.height&&(o=i.dimension.height),n+=e.BUTTON_SIZE*i.dimension.width+e.BUTTON_SPACING,n+e.BUTTON_SIZE>=this.width&&(r+=e.BUTTON_SIZE*o+e.BUTTON_SPACING,n=e.BUTTON_SPACING,o=0))}}addBuildingButton(t,n,r){let o=e.getBuildingButton(t,(i,s)=>({x:this.x+i,y:this.y+s,w:e.BUTTON_SIZE*t.dimension.width,h:e.BUTTON_SIZE*t.dimension.height}),()=>{Q.setBuildingCursor(t,this.x+n,this.y+r)},n,r,this);this.uitabselements=this.uitabselements.concat(o)}static getBuildingButton(t,n,r,o,i,s){let a=[],c,l=t.name,d="";if(t.className=="spell"){let p=_t(t.params.spell);c={tileset:g.tilesetSpells,x:p.tile%g.tilesetSpells.columns*g.tilesetSpells.width,y:(p.tile/g.tilesetSpells.columns|0)*g.tilesetSpells.height,w:g.tilesetSpells.width,h:g.tilesetSpells.height},l+=` (${p.name})`,d=`

${p.name} : ${Dn.getDescription(p)}`}if(t.className=="modifier"){let p=xt(t.params.modifier);c={tileset:g.tilesetSpells,x:p.tile%g.tilesetSpells.columns*g.tilesetSpells.width,y:(p.tile/g.tilesetSpells.columns|0)*g.tilesetSpells.height,w:g.tilesetSpells.width,h:g.tilesetSpells.height};let y="";if(p.cost)for(let w of p.cost)y+=` ${w.amount} ${ge(w.resource).name}`;l+=` (${p.name})`,d=`

${p.name} : ${p.description}
Cooldown : ${((p.cooldown||0)/60).toFixed(1)} s`,y&&(d+=`
Additional cost: ${y}`)}let f=new Ae(n,r,{x:t.spriteCoords[0].x,y:t.spriteCoords[0].y,w:g.tilesetBuildings.width*t.dimension.width,h:g.tilesetBuildings.height*t.dimension.height,tileset:g.tilesetBuildings},void 0,{x:o,y:i},{additionalTile:c});f.tooltip=l,f.tooltipDescription=t.description+d,a.push(f);let m=1;for(let p of t.cost){let y=new Wt((w,M)=>({x:s.x+w,y:s.y+M,w:50,h:16}),p.resource,{x:o+1,y:i+m},p.amount);a.push(y),m+=20}return a}resize(){if(super.resize(),!!this.uielements){for(let t of this.uielements)t.resize();for(let t of this.uitabselements)t.resize()}}};var sa=class e extends we{enabled=!1;uielements=[];static currentUpgradeCost={resource:1,amount:100};display(){super.display(),u.ctx2.fillStyle="#d1925fba",u.ctx2.strokeStyle="#904b41",u.ctx2.fillRect(this.x,this.y,this.width,this.height),u.ctx2.strokeRect(this.x,this.y,this.width,this.height);for(let t of this.uielements)t.display();h.upgradesToChooseFrom.length>0&&(u.ctx2.fillStyle="#fff",u.ctx2.font=g.FONT_MEDIUM,u.ctx2.textAlign="center",u.ctx2.textBaseline="top",g.drawTextUi("Choose wisely ...",this.x+this.width/2,this.y+20))}update(){if(this.calculateNewPrice(),this.uielements=[],h.upgradesToChooseFrom.length==0){let n=new Ae((o,i)=>({x:this.x+this.width/2-90,y:this.y+20,w:180,h:60}),()=>{this.unlockDiscoveries()},{x:48,y:80,w:48,h:16,tileset:g.tilesetUI},{x:96,y:80,w:48,h:16,tileset:g.tilesetUI},void 0,{text:"Discover new spell"});n.tooltip=`Trade ${e.currentUpgradeCost.amount} resources for 3 new choice of spells and building to choose from !`,this.uielements.push(n);let r=new Wt((o,i)=>({x:this.x+this.width/2+100,y:this.y+38,w:50,h:16}),e.currentUpgradeCost.resource,void 0,e.currentUpgradeCost.amount);this.uielements.push(r)}let t=60;for(let n of h.upgradesToChooseFrom){let r=Mt.getBuildingButton(n,(o,i)=>({x:this.x+o,y:this.y+i,w:Mt.BUTTON_SIZE*n.dimension.width,h:Mt.BUTTON_SIZE*n.dimension.height}),()=>{this.selectNewSpell(n)},50,t,this);this.uielements=this.uielements.concat(r),t+=Mt.BUTTON_SIZE*n.dimension.height+50}}selectNewSpell(t){h.availableBuildings.push(t),h.upgradesToChooseFrom=[],this.update(),Q.buttonBuild.setNotification(!0),t.className=="spell"||t.className=="modifier"?Q.buildMenu.notifications.tabSpells=!0:Q.buildMenu.notifications.tabBuilds=!0}unlockDiscoveries(){if(!(h.upgradesToChooseFrom.length>0)){if(h.getResource(e.currentUpgradeCost.resource)<e.currentUpgradeCost.amount){U.addNotification("Not enough resources",this.x+this.width/2,this.y+20,"#028aa2ff",25,!0);return}h.addResource(e.currentUpgradeCost.resource,-e.currentUpgradeCost.amount),h.currentUpgradeTier+=1,this.calculateNewPrice(),this.getNewBuildingsChoice(),this.update()}}calculateNewPrice(){h.currentUpgradeTier==1&&(e.currentUpgradeCost={resource:1,amount:200}),h.currentUpgradeTier==2&&(e.currentUpgradeCost={resource:4,amount:50}),h.currentUpgradeTier==3&&(e.currentUpgradeCost={resource:4,amount:200}),h.currentUpgradeTier==4&&(e.currentUpgradeCost={resource:2,amount:20}),h.currentUpgradeTier==5&&(e.currentUpgradeCost={resource:2,amount:80}),h.currentUpgradeTier==6&&(e.currentUpgradeCost={resource:6,amount:1}),h.currentUpgradeTier==7&&(e.currentUpgradeCost={resource:6,amount:100}),h.currentUpgradeTier>7&&(e.currentUpgradeCost.amount=h.currentUpgradeTier**3)}getNewBuildingsChoice(){h.upgradesToChooseFrom=[];let t=[];for(let n of Cm())h.availableBuildings.find(r=>r.name==n.name||n.categories.includes(5))||t.push({building:n});for(let n of na())h.availableBuildings.find(r=>r.className=="spell"&&r.params.spell==n)||t.push({building:Tn("spell"),spell:n});for(let n of bm())h.availableBuildings.find(r=>r.className=="modifier"&&r.params.modifier==n)||t.push({building:Tn("modifier"),modifier:n});for(let n=0;n<3&&t.length!=0;n++){let r=h.random(e.currentUpgradeCost.amount+n,0,t.length-.001)|0,o=t.splice(r,1)[0],i=h.getAvailableBuilding("",o.spell,o.modifier,o.building);i&&h.upgradesToChooseFrom.push(i)}}resize(){if(super.resize(),!!this.uielements)for(let t of this.uielements)t.resize()}};var aa=class extends we{pressed=!1;constructor(){super((t,n)=>({x:u.width-50,y:10,w:30,h:30})),this.tooltip="_"}display(){super.display(),this.pressed&&C.mouseClicked<0&&(this.onClick(),this.pressed=!1),this.hover?C.mouseClicked==0&&(this.pressed=!0):this.pressed=!1,u.ctx2.fillStyle="#fff",u.ctx2.font=g.FONT_MEDIUM,u.ctx2.textAlign="center",u.ctx2.textBaseline="middle",u.paused?g.drawTextUi("\u25B6",this.x+this.width/2,this.y+this.height/2):g.drawTextUi("\u23F8",this.x+this.width/2,this.y+this.height/2)}onClick(){u.paused=!u.paused}getTooltip(){return u.paused?"Resume game":"Pause game"}};var ca=class extends we{constructor(n,r={x:0,y:0},o,i,s){super(n,r);this.maxValue=o;this.color=i;this.value=s}display(){u.ctx2.strokeStyle="black",u.ctx2.lineWidth=2,u.ctx2.strokeRect(this.x,this.y,this.width,this.height),u.ctx2.fillStyle=this.color;let n=Js(this.value(),0,this.maxValue(),0,this.width);u.ctx2.fillRect(this.x,this.y,n,this.height),u.ctx2.font=g.FONT_MEDIUM,u.ctx2.textBaseline="middle",u.ctx2.textAlign="left",u.ctx2.fillStyle="white",g.drawTextUi(`${this.value()|0} / ${this.maxValue()|0}`,this.x+2,this.y+this.height/2),super.display()}};var Q=class{static uielements=[];static buildCursor;static destroyCursor=!1;static currentBuildingToDestroy=null;static buttonTroops;static buttonDeleteBuilding;static buttonBuild;static buttonMagicDiscovery;static buildMenu;static magicDiscoveryMenu;static bigNotification={text:"",time:0,wiggle:0};static load(){this.uielements=[],console.log("loading UI"),this.buildMenu=new Mt(()=>({x:u.width-420,y:100,w:410,h:530})),this.buildMenu.id="buildmenu",this.uielements.push(this.buildMenu),this.magicDiscoveryMenu=new sa(()=>({x:u.width/2-400,y:100,w:800,h:500})),this.uielements.push(this.magicDiscoveryMenu),this.buttonTroops=new Ae(()=>({x:u.width-100,y:u.height-100,w:70,h:70}),()=>{Ce.forceNextWave()},{x:0,y:0,w:32,h:32,tileset:g.tilesetUI},{x:32,y:0,w:32,h:32,tileset:g.tilesetUI},{x:0,y:0},{additionalTile:{x:0,y:48,w:16,h:16,tileset:g.tilesetUI}}),this.buttonTroops.tooltip="Force new wave",this.buttonTroops.tooltipDescription="(May result in premature death)",this.uielements.push(this.buttonTroops),this.buttonBuild=new Ae(()=>({x:u.width-100,y:u.height-300,w:70,h:70}),()=>{this.magicDiscoveryMenu.enabled=!1,this.buildMenu.enabled=!this.buildMenu.enabled,this.buildMenu.enabled&&this.buildMenu.update(),this.destroyCursor=!1},{x:0,y:0,w:32,h:32,tileset:g.tilesetUI},{x:32,y:0,w:32,h:32,tileset:g.tilesetUI},{x:0,y:0},{additionalTile:{x:16,y:48,w:16,h:16,tileset:g.tilesetUI}}),this.buttonBuild.tooltip="Buildings",this.buttonBuild.setNotification(!0),this.uielements.push(this.buttonBuild),this.buttonDeleteBuilding=new Ae(()=>({x:u.width-170,y:u.height-280,w:50,h:50}),()=>{this.buildCursor=null,this.destroyCursor=!this.destroyCursor},{x:0,y:0,w:32,h:32,tileset:g.tilesetUI},{x:32,y:0,w:32,h:32,tileset:g.tilesetUI},{x:0,y:0},{additionalTile:{x:32,y:48,w:16,h:16,tileset:g.tilesetUI}}),this.buttonDeleteBuilding.tooltip="Destroy a building",this.uielements.push(this.buttonDeleteBuilding),this.buttonMagicDiscovery=new Ae(()=>({x:u.width-100,y:u.height-200,w:70,h:70}),()=>{this.buildMenu.enabled=!1,this.magicDiscoveryMenu.enabled=!this.magicDiscoveryMenu.enabled,this.magicDiscoveryMenu.enabled&&this.magicDiscoveryMenu.update(),this.destroyCursor=!1},{x:0,y:0,w:32,h:32,tileset:g.tilesetUI},{x:32,y:0,w:32,h:32,tileset:g.tilesetUI},{x:0,y:0},{additionalTile:{x:0,y:64,w:16,h:16,tileset:g.tilesetUI}}),this.buttonMagicDiscovery.tooltip="Magic discovery",this.buttonMagicDiscovery.setNotification(!0),this.uielements.push(this.buttonMagicDiscovery);let t=0;for(let o of Sn.keys()){let i=new Wt((s,a)=>({x:10+s,y:10,w:50,h:16}),o,{x:t,y:0});t+=75,this.uielements.push(i)}let n=new ca((o,i)=>({x:10,y:50,w:220,h:25}),{x:0,y:0},()=>z.stats[1],"green",()=>z.life);n.tooltip="Tower HP (pour l'instant on est immortel mais vous verrez quand le jeu sera fini! VOUS VERREZ !!)",this.uielements.push(n);let r=new aa;this.uielements.push(r)}static display(){let t=v.getBuildingCoordinateX(C.gameMouseX)-(C.gameMouseX<0?v.GRID_SIZE:0),n=v.getBuildingCoordinateY(C.gameMouseY),r=-1;if(this.destroyCursor&&(r=v.getBuildingIDOnCoordinate(t,n),r>0?(!this.currentBuildingToDestroy||this.currentBuildingToDestroy.id!=r)&&(this.currentBuildingToDestroy=h.buildings.find(d=>d.id==r)):this.currentBuildingToDestroy=null,this.currentBuildingToDestroy&&!this.currentBuildingToDestroy.isToBeRemoved&&(u.ctx2.textAlign="left",u.ctx2.textBaseline="top",u.ctx2.fillStyle="red",u.ctx2.font=g.FONT_MEDIUM,g.drawTextUi("Destroy ? (No refund !)",C.mouseX,C.mouseY+15),C.mouseClicked==0&&(h.destroyBuilding(this.currentBuildingToDestroy),this.currentBuildingToDestroy=null))),this.buildCursor){let d=v.isBuildingAllowedHere(t,n,this.buildCursor),f=d==null;f||g.setTooltip(d),g.drawImageFromSetFull(t,n,this.buildCursor.dimension.width*v.GRID_SIZE,this.buildCursor.dimension.height*v.GRID_SIZE,g.tilesetBuildings,this.buildCursor.spriteCoords[0].x,this.buildCursor.spriteCoords[0].y,this.buildCursor.dimension.width*g.tilesetBuildings.width,this.buildCursor.dimension.height*g.tilesetBuildings.height),g.drawRect(t,n,this.buildCursor.dimension.width*v.GRID_SIZE,this.buildCursor.dimension.height*v.GRID_SIZE,f?"rgba(25,214,25,0.3)":"rgba(214,25,25,0.3)"),this.buildCursor.className=="aura"&&st.drawAura(t+this.buildCursor.dimension.width*v.GRID_SIZE/2,n+this.buildCursor.dimension.height*v.GRID_SIZE/2,this.buildCursor.params.radius,this.buildCursor.params.auraColor),C.mouseClicked==0&&f&&this.buildBuilding(t,n)}let o=h.getGroundObjectAt(t,n);if(o&&o.tooltip&&g.setTooltip(o.tooltip,0),r<0&&(r=v.getBuildingIDOnCoordinate(t,n)),r>=0){let d=h.buildings.find(f=>f.id==r);d&&g.setTooltip(d.getTooltip())}this.displayBigNotification(),u.ctx2.fillStyle="#fff",u.ctx2.font=g.FONT_MEDIUM,u.ctx2.textAlign="left",u.ctx2.textBaseline="top",g.drawTextUi(`Wave : ${Ce.currentWave} (CR : ${Ce.currentCR})`,10,100);let i=u.currentTime*16.666|0,s=i%1e3;i=(i-s)/1e3;let a=i%60;i=(i-a)/60;let c=i%60,l=(i-c)/60;g.drawTextUi(`Time : ${this.pad(l)}:${this.pad(c)}:${this.pad(a)}`,10,130);for(let d of this.uielements)d.enabled&&d.display()}static pad(t,n=2){return("00"+t).slice(-n)}static resize(){for(let t of this.uielements)t.resize()}static displayConstructionGrid(){let t=v.getBuildingCoordinateX(C.gameMouseX)-(C.gameMouseX<0?v.GRID_SIZE:0),n=v.getBuildingCoordinateY(C.gameMouseY);if(C.gameMouseY>=v.MIN_BUILD_Y)for(let r=-2;r<3;r++)for(let o=-2;o<3;o++){let i=t+r*v.GRID_SIZE,s=n+o*v.GRID_SIZE,a=v.isBlockOccupied(i,s);if(s>=v.MIN_BUILD_Y&&!a){let c=`rgba(${this.destroyCursor?255:100},100,100, ${1/(1+Math.abs(r)+Math.abs(o))-.2})`;g.drawRect(i+1,s+1,v.GRID_SIZE-2,v.GRID_SIZE-2,c)}}}static setBuildingCursor(t,n,r){if(!this.checkBuildingPrice(t)){U.addNotification("Not enough resources !",n,r,"#ffffffff",25,!0);return}this.buildCursor=t,this.destroyCursor=!1}static buildBuilding(t,n){if(v.isBuildingAllowedHere(t,n,this.buildCursor)!=null||!this.checkBuildingPrice(this.buildCursor))return;for(let o of this.buildCursor.cost)h.addResource(o.resource,-o.amount);let r=_n(this.buildCursor,t,n);h.addBuilding(r),this.checkBuildingPrice(this.buildCursor)||(this.buildCursor=null)}static checkBuildingPrice(t){for(let n of t.cost)if(h.getResource(n.resource)<n.amount)return!1;return!0}static setBigNotification(t,n,r=0){this.bigNotification.text=t,this.bigNotification.time=n,this.bigNotification.wiggle+=r}static displayBigNotification(){if(this.bigNotification.wiggle>0&&(this.bigNotification.wiggle-=1),this.bigNotification.time<=0)return;let t=this.bigNotification.time/10,n=this.bigNotification.wiggle/3;u.ctx2.font=g.FONT_LARGE,u.ctx2.fillStyle=`rgba(235, 235, 235, ${t})`,u.ctx2.textAlign="center",u.ctx2.textBaseline="middle",g.drawTextUi(this.bigNotification.text,u.width/2+Math.cos(this.bigNotification.wiggle)*n,u.height/2+Math.sin(this.bigNotification.wiggle)*n,!0),this.bigNotification.time-=1}static cancel(){if(this.destroyCursor){this.destroyCursor=!1;return}if(this.buildCursor){this.buildCursor=null;return}if(this.buildMenu&&this.buildMenu.enabled){this.buildMenu.enabled=!1;return}if(this.magicDiscoveryMenu&&this.magicDiscoveryMenu.enabled){this.magicDiscoveryMenu.enabled=!1;return}}};var Ce=class{static currentWave=0;static framesBetweenWaves=5*60;static waveDuration=20*60;static remainingWaveFrames=0;static remainingPauseFrames=0;static waveEnemiesCount=0;static MAX_ENEMIES_PER_WAVES=400;static currentWaveEnemies=[];static _currentCR=0;static process(){if(u.menuMode)return;if(this.remainingPauseFrames>0){this.remainingPauseFrames--;return}if(this.remainingWaveFrames<=0){this.remainingPauseFrames=this.framesBetweenWaves,Se.save(),this.createNextWave();return}let t=this.currentWaveEnemies.length/this.remainingWaveFrames;if(t<this.waveEnemiesCount/this.waveDuration){this.remainingWaveFrames-=1;return}for(let n=0;n<t;n++)this.callEnemy(this.currentWaveEnemies.shift());this.remainingWaveFrames-=1}static forceNextWave(){this.canCallNextWave()?(Se.save(),this.createNextWave()):U.addNotification("Too much troops sent on the field ...",Q.buttonTroops.x,Q.buttonTroops.y,"#a30000ff",25,!0)}static createNextWave(){console.log("calling new wave ...");let t=[],n=0,r=h.random(this.currentWave,1,3.99)|0;this._currentCR=(this.currentWave+5)*2+this.currentWave;let o=wm(r,this.currentWave);o||(o="trooper");for(let i=0;i<this.MAX_ENEMIES_PER_WAVES&&(t.push(o),n+=r,!(n>=this.currentCR));i++);this.currentWaveEnemies=this.currentWaveEnemies.concat(t),this.remainingWaveFrames=this.waveDuration,this.waveEnemiesCount=this.currentWaveEnemies.length,this.currentWave+=1,this.currentWave>=1&&Q.setBigNotification(`Wave ${this.currentWave}`,120,12)}static callEnemy(t){if(!t)return;let n=h.random(h.randCount++)<.5,r=30;n?r=h.random(h.randCount++,h.boundsRight,h.boundsRight+30):r=h.random(h.randCount++,h.boundsLeft-30,h.boundsLeft);let o=ia(Im(t),r,this.difficultyMultiplier);o&&h.addEnemy(o)}static canCallNextWave(){let t=0;for(let n of h.enemies)n&&(t+=n.length);return this.currentWaveEnemies.length+t<this.MAX_ENEMIES_PER_WAVES}static betweenWaves(){return this.remainingPauseFrames>0}static get difficultyMultiplier(){return Math.max(1,this.currentWave/8)}static get currentCR(){return this._currentCR}};var Se=class{static SAVENAME="save";static save(){if(z.deathOccured)return;let t=this.serialize();console.log("saving ..."),localStorage.setItem(this.SAVENAME,this.encode(t))}static loadSave(){let t=localStorage.getItem(this.SAVENAME);if(console.log("retreiving save ..."),!t)return;h.buildings=[],h.enemies=[];let n=this.deserialize(this.decode(t));if(!n){console.log("Corrupted save detected. Creating new save ..."),this.newSave();return}this.processSave(n),g.loadImages(),g.load(),h.generate(),Q.load(),h.updateBuildings()}static newSave(){h.generateNewSeed(),g.loadImages(),g.load(),h.generate(),h.getBaseLoadout(),Q.load()}static removeSave(){localStorage.removeItem(this.SAVENAME)}static serialize(){let t=[];for(let i of Sn.keys())t.push({resource:i,amount:h.getResource(i)});let n=[];for(let i of h.buildings)n.push({def:i.def,x:i.x,y:i.y});let r=[];for(let i of h.enemies)if(i)for(let s of i)r.push({def:s.def,x:s.x,mult:s.mult,id:s.id});let o={world:{seed:h.seed,randCount:h.randCount,currentUpgradeTier:h.currentUpgradeTier,upgradesToChooseFrom:h.upgradesToChooseFrom,availableBuildings:h.availableBuildings,buildings:n,resources:t,enemies:r},tower:{type:h.tower,life:z.life,stats:z.stats},wave:{currentWave:Ce.currentWave,currentWaveEnemies:Ce.currentWaveEnemies},technical:{currentTime:u.currentTime}};return JSON.stringify(o)}static deserialize(t){try{return JSON.parse(t)}catch{return}}static processSave(t){u.currentTime=t.technical.currentTime,h.seed=t.world.seed,h.randCount=t.world.randCount,h.currentUpgradeTier=t.world.currentUpgradeTier,h.upgradesToChooseFrom=t.world.upgradesToChooseFrom,h.availableBuildings=t.world.availableBuildings;for(let n of t.world.buildings){let r=_n(n.def,n.x,n.y);r&&h.buildings.push(r)}for(let n of t.world.enemies){let r=ia(n.def,n.x,n.mult,n.id);r&&h.addEnemy(r)}for(let n of t.world.resources)h.setResource(n.resource,n.amount);z.life=t.tower.life,z.stats=t.tower.stats,h.tower=t.tower.type,Ce.currentWave=t.wave.currentWave,Ce.currentWaveEnemies=t.wave.currentWaveEnemies,Ce.createNextWave()}static encode(t){return t}static decode(t){return t}static saveExists(){return localStorage.getItem(this.SAVENAME)!=null}};var z=class{static closestEnemies=[];static furthestClosestEnemy=99999;static targetCycle=0;static origin={x:0,y:-78};static cooldown=0;static spells=[];static currentSpell=0;static accumulatedDamages=0;static accumulatedHeals=0;static deathOccured=!1;static TARGETS_LENGTH=20;static life=400;static stats={1:400,2:250,3:60};static process(){this.closestEnemies=this.closestEnemies.sort((t,n)=>Math.abs(t.x)-Math.abs(n.x)),this.shoot(),u.currentFrame%6==0&&this.accumulatedDamages<0&&(U.addNotification(""+this.accumulatedDamages,0,-20,"red"),this.accumulatedDamages=0),u.currentFrame+3%6==0&&this.accumulatedHeals>0&&(U.addNotification(""+this.accumulatedHeals,0,-20,"green"),this.accumulatedHeals=0)}static shoot(){if(!this.closestEnemies||this.closestEnemies.length==0||!this.spells||this.spells.length==0)return;if(this.cooldown>0){this.cooldown--;return}if(this.currentSpell>=this.spells.length){this.currentSpell=0,this.cooldown=this.stats[3];return}let t=this.spells[this.currentSpell],n=new Map;for(let o of t.spell.cost)n.set(o.resource,o.amount);for(let o of t.modifiers){let i=xt(o);for(let s of i.cost||[])n.set(s.resource,(n.get(s.resource)||0)+s.amount)}for(let[o,i]of n)if(h.getResource(o)<i){U.addNotification("Skip",t.origin.x,t.origin.y,"#ba3a3aff"),this.currentSpell++;return}for(let[o,i]of n)h.addResource(o,-i);let r=0;for(let o of t.modifiers)o==10&&(r+=1);for(let o=0;o<=r;o++){let i=this.getNextTarget();if(i){let s=mm(t.spell,this.origin.x,this.origin.y,i,t.modifiers);this.cooldown=s.def.cooldown;for(let a of t.modifiers){let c=xt(a);this.cooldown+=c.cooldown||0}i.targetOfSpells+=1,h.addSpell(s)}}U.addNotification(t.spell.name,t.origin.x,t.origin.y,"#02e6ffff"),this.currentSpell++}static getNextTarget(){return this.closestEnemies[this.targetCycle++%this.closestEnemies.length]}static setNextTarget(t){if(!t.isActive()||Math.abs(t.x)>this.stats[2])return;let n=!1;this.closestEnemies.length<this.TARGETS_LENGTH?n=!0:Math.abs(t.x)<this.furthestClosestEnemy&&(n=!0,this.furthestClosestEnemy=Math.abs(t.x)),n&&(this.closestEnemies.push(t),this.closestEnemies.length>this.TARGETS_LENGTH&&this.closestEnemies.shift(),Math.abs(t.x)>this.furthestClosestEnemy&&(this.furthestClosestEnemy=Math.abs(t.x)))}static clearTargets(){this.closestEnemies=[],this.furthestClosestEnemy=0,this.targetCycle=0}static updateSpells(){this.spells=[];let t=[];for(let n of h.buildings){if(n.def.className=="modifier"){let r=n.def.params.modifier;t.push(r)}if(n.def.className=="spell"){let r=_t(n.def.params.spell);this.spells.push({spell:r,origin:{x:n.x+n.width*v.GRID_SIZE,y:n.y+n.height*v.GRID_SIZE},modifiers:t}),t=[]}}}static setLife(t){this.life=Math.min(this.life+t,this.stats[1]),t<0?this.accumulatedDamages+=t:this.accumulatedHeals+=t,this.life<=0&&!this.deathOccured&&(this.onDeath(),this.deathOccured=!0)}static onDeath(){console.log("death"),Se.removeSave()}};var wr=class e extends v{static RANGE=100;update(){this.x>h.boundsRight-e.RANGE&&(h.boundsRight=he(this.x+e.RANGE,300,h.width/2-20)),this.x<h.boundsLeft+e.RANGE&&(h.boundsLeft=he(this.x-e.RANGE,-h.width/2+20,-300))}static resetWorldBounds(){h.boundsRight=300,h.boundsLeft=-300}};var la=class extends v{resourceProduced;resourceProducedDescription;placeableToMine;effectiveness;constructor(t,n,r){super(t,n,r),this.placeableToMine=t.params.placeableToMine,this.resourceProduced=t.params.resourceProduced,this.resourceProducedDescription=ge(this.resourceProduced),this.effectiveness=t.params.baseEffectiveness,this.calculateEffectiveness()}process(){if(u.currentFrame%60==0&&h.addResource(this.resourceProduced,this.effectiveness),u.currentFrame%4==0)for(let t=0;t<this.effectiveness;t++){let n=Math.random();U.add({x:this.x+this.width*v.GRID_SIZE/2,y:this.y+Math.random()*this.height*v.GRID_SIZE,size:1,life:20,color:this.def.params.sparksColor,friction:.8,gravity:.1,physic:!1,vector:it(n*2)})}}calculateEffectiveness(){this.effectiveness=v.getPlaceablesNodesOnBuilding(this.x,this.y,this.def,this.placeableToMine)}getTooltip(){return super.getTooltip()+` (Effectiveness: ${this.effectiveness} / s)`}};var ua=class extends v{modifier;constructor(t,n,r){super(t,n,r),this.modifier=xt(t.params.modifier)}display(){g.drawImageFromSet(this.x+6.5,this.y+6,7,7,g.tilesetSpells,this.modifier.tile%g.tilesetSpells.columns,this.modifier.tile/g.tilesetSpells.columns|0),super.display()}getTooltip(){return super.getTooltip()+` (${this.modifier.name})`}};var da=class extends v{};var fa=class extends v{sources;products;freq;producing=!1;constructor(t,n,r){super(t,n,r),this.sources=t.params.sources,this.products=t.params.products,this.freq=t.params.freq}process(){if(u.currentFrame%this.freq==0){for(let t of this.sources)if(h.getResource(t.resource)<t.count){this.producing=!1;return}for(let t of this.sources)h.addResource(t.resource,-t.count);for(let t of this.products)h.addResource(t.resource,t.count);this.producing=!0}}display(){if(super.display(),!!this.producing&&u.currentFrame%6==0)for(let t of this.products)for(let n=0;n<5;n++){let r=Math.random();U.add({x:this.x+this.width*v.GRID_SIZE/2,y:this.y+this.height*v.GRID_SIZE/2,size:1,life:20,color:t.color,friction:.8,gravity:.1,physic:!1,vector:it(r*2)})}}};var pa=class extends v{spell;constructor(t,n,r){super(t,n,r),this.spell=_t(t.params.spell)}display(){g.drawImageFromSet(this.x+6.5,this.y+6,7,7,g.tilesetSpells,this.spell.tile%g.tilesetSpells.columns,this.spell.tile/g.tilesetSpells.columns|0),super.display()}getTooltip(){return super.getTooltip()+` (${this.spell.name})`}};var Cr=class extends v{stat;amount;constructor(t,n,r){super(t,n,r),this.stat=t.params.stat,this.amount=t.params.amount}update(){z.stats[this.stat]+=this.amount}static resetStats(){z.stats[1]=400,z.stats[2]=250,z.stats[3]=60}};function _n(e,t,n){switch(e.className){case"spell":return new pa(e,t,n);case"modifier":return new ua(e,t,n);case"mining":return new la(e,t,n);case"prod":return new fa(e,t,n);case"aura":return new st(e,t,n);case"limitexpander":return new wr(e,t,n);case"statsenhancer":return new Cr(e,t,n);case"neutral":return new da(e,t,n);default:return null}}var dd=new Map([["spell",{name:"Spell catalyser",cost:[],categories:[0],spriteCoords:[{x:0,y:0}],description:`Launches a spell.
Can only be placed on the top layer.`,className:"spell",dimension:{width:2,height:2},positionRestrictions:[0],params:{}}],["modifier",{name:"Spell enhancer",cost:[],categories:[1],spriteCoords:[{x:0,y:64}],description:`Enhances the next spell.
Can only be placed on the top layer.`,className:"modifier",dimension:{width:2,height:2},positionRestrictions:[0],params:{}}],["tower_base",{name:"Tower base",cost:[],categories:[5],spriteCoords:[{x:128,y:0}],description:"The tower base.",className:"neutral",dimension:{width:1,height:3},positionRestrictions:[],params:{}}],["mining_iron",{name:"Iron Extractor",cost:[{resource:0,amount:100}],categories:[3,2],spriteCoords:[{x:32,y:0},{x:32,y:48}],description:`Extract iron from the soil.
Needs to be placed on iron node.`,className:"mining",dimension:{width:2,height:3},positionRestrictions:[1],params:{resourceProduced:1,placeableToMine:1,baseEffectiveness:0,sparksColor:"#825453"}}],["mining_coal",{name:"Coal Extractor",cost:[{resource:0,amount:150},{resource:1,amount:100}],spriteCoords:[{x:144,y:0},{x:144,y:48}],categories:[3,2],description:`Extract coal from the soil.
Needs to be placed on coal node.`,className:"mining",dimension:{width:2,height:3},positionRestrictions:[2],params:{resourceProduced:3,placeableToMine:3,baseEffectiveness:0,sparksColor:"#3a3a3aff"}}],["mining_mana",{name:"Mana Crystals Extractor",cost:[{resource:0,amount:350},{resource:4,amount:100}],categories:[3,2],spriteCoords:[{x:176,y:0},{x:176,y:48}],description:`Extract mana crytals from the soil.
Needs to be placed on a Mana Crystal.`,className:"mining",dimension:{width:2,height:3},positionRestrictions:[3],params:{resourceProduced:2,placeableToMine:4,baseEffectiveness:0,sparksColor:"#00ddffff"}}],["tunnel_horizontal",{name:"Tunnel (horizontal)",cost:[{resource:0,amount:20}],categories:[4,2],spriteCoords:[{x:64,y:16}],description:"A tunnel to expand your base",className:"neutral",dimension:{width:3,height:1},positionRestrictions:[],params:{}}],["tunnel_vertical",{name:"Tunnel (vertical)",cost:[{resource:0,amount:20}],categories:[4,2],spriteCoords:[{x:112,y:0}],description:"A tunnel to expand your base",className:"neutral",dimension:{width:1,height:3},positionRestrictions:[],params:{}}],["light",{name:"Tunnel light",cost:[{resource:0,amount:150}],categories:[4,2],spriteCoords:[{x:80,y:0}],description:"A light to shine in the dark tunnels",className:"neutral",dimension:{width:1,height:1},positionRestrictions:[],light:40,params:{}}],["limitexpander",{name:"Limits expander",cost:[{resource:0,amount:1e3},{resource:4,amount:50},{resource:6,amount:50}],categories:[4,2],spriteCoords:[{x:32,y:112},{x:64,y:112},{x:96,y:112}],description:"A beacon that can expands your building limits.",className:"limitexpander",dimension:{width:2,height:2},positionRestrictions:[],light:20,params:{}}],["prod_steel",{name:"Steel foundry",cost:[{resource:0,amount:300},{resource:1,amount:100}],categories:[3,2],spriteCoords:[{x:128,y:96},{x:128,y:128}],description:`A machine that will create steel in exchange for iron and coal.
Sources: 20 iron / s, 10 coal / s
Products: 5 steel / s`,className:"prod",dimension:{width:3,height:2},positionRestrictions:[],params:{sources:[{resource:1,count:20},{resource:3,count:10}],products:[{resource:4,count:5,color:"#515151ff"}],freq:60}}],["bone_collector",{name:"Bone collector",cost:[{resource:0,amount:400}],categories:[3],spriteCoords:[{x:96,y:48}],description:"A machine that collect bones from enemies defeated in its aura",className:"aura",dimension:{width:2,height:2},positionRestrictions:[],params:{radius:40,aura:0,auraColor:"#ffffff8a"}}],["bone_mender",{name:"Bone Mender",cost:[{resource:0,amount:2e3},{resource:5,amount:2e3}],categories:[3],spriteCoords:[{x:64,y:80}],description:`Necromancers will trade bones against some reparations for the Tower.
Source : 100 bones / m
Product: 20 HP / m`,className:"prod",dimension:{width:4,height:2},positionRestrictions:[],params:{sources:[{resource:5,count:100}],products:[{resource:"life",count:20,color:"#bcbcbcff"}],freq:60*60}}],["alchemy",{name:"Alchemy",cost:[{resource:0,amount:800},{resource:2,amount:1}],categories:[3,2],spriteCoords:[{x:176,y:96}],description:`Create raw mana from mana crystals and gold. 
Sources: 1 mana crystals / 5 s, 10 gold / 5 s
Products: 1 raw mana / 5 s`,className:"prod",dimension:{width:3,height:3},positionRestrictions:[],params:{sources:[{resource:2,count:1},{resource:0,count:10}],products:[{resource:6,count:1,color:"#00d5ffff"}],freq:60*5}}],["rangeenhancer",{name:"Range enhancer",cost:[{resource:0,amount:1e3},{resource:4,amount:100}],categories:[6],spriteCoords:[{x:208,y:0}],description:"Upgrade the tower range by 20 meters.",className:"statsenhancer",dimension:{width:2,height:4},positionRestrictions:[],params:{stat:2,amount:20}}],["lifeenhancer",{name:"Life Catalyst",cost:[{resource:0,amount:1e3},{resource:5,amount:2e3}],categories:[6],spriteCoords:[{x:240,y:0}],description:`Use necromantic arts to push back the limits of death.
Increase max life by 50 HP.`,className:"statsenhancer",dimension:{width:2,height:4},positionRestrictions:[],params:{stat:1,amount:50}}]]);function Tn(e){let t=dd.get(e);return t||console.error(`Building ${e} doesn't exist.`),t}function Cm(){return Array.from(dd.values())}function Dm(){return Array.from(dd.keys())}var h=class{static seed=0;static width=2e3;static boundsRight=300;static boundsLeft=-300;static boundsTop=-300;static boundsBottom=300;static cameraMaxUnzoom=4.5;static depthMax=64;static randCount=0;static tower=0;static buildingLightPower=15;static currentUpgradeTier=0;static upgradesToChooseFrom=[];static layers=[4,5,8,9,16,17,35];static enemies=[];static enemyGrid=new Map;static GRID_SPLIT_SIZE=12;static spells=[];static buildings=[];static buildingGrid=new Map;static availableBuildings=[];static decors=[];static groundObjects=[];static groundMap=new Map;static resources=new Map;static generate(){this.decors=[],this.addResource(0,300);let t=Tn("tower_base"),n=_n(t,(1/v.GRID_SIZE|0)*v.GRID_SIZE,(20/v.GRID_SIZE|0)*v.GRID_SIZE);n&&this.addBuilding(n),this.generateGroundObjects();for(let r=0;r<5;r++)this.generateClouds(1,this.random(r,-(Math.abs(this.boundsLeft)+this.boundsRight),0))}static getAvailableBuilding(t,n,r,o){let i=structuredClone(o||Tn(t));if(!i)return console.error(`Building ${t} doesn't exist.`),null;if(n){let s=_t(n);i.params.spell=n,i.cost=s.costAsBuilding}if(r){let s=xt(r);i.params.modifier=r,i.cost=s.costAsBuilding}return i}static addEnemy(t){let n=t.y+t.height+20|0;this.enemies[n]||(this.enemies[n]=[]),this.enemies[n].push(t)}static addSpell(t){this.spells.push(t)}static getBaseLoadout(){let t=this.getRandomSpellKey(i=>i.tags.includes(0),0),n=this.getAvailableBuilding("spell",t);this.availableBuildings.push(n);let r=_n(n,(11/v.GRID_SIZE|0)*v.GRID_SIZE,(20/v.GRID_SIZE|0)*v.GRID_SIZE);r&&this.addBuilding(r);let o=this.getRandomSpellKey(i=>i.tags.includes(1),1);this.availableBuildings.push(this.getAvailableBuilding("spell",o));for(let i of Dm())Tn(i).categories.includes(2)&&this.availableBuildings.push(this.getAvailableBuilding(i))}static getRandomSpellKey(t,n,r=!0){let o=[];for(let s of na()){let a=_t(s);t(a)&&(r&&this.availableBuildings.find(c=>c.className=="spell"&&c.params.spell==s)||o.push(s))}let i=this.random(n,0,o.length-.001)|0;return o[i]}static processEnemies(){this.enemyGrid.clear(),z.clearTargets();for(let t of this.enemies)if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(r.isActive()){r.process();let o=this.getGridFromPosition(r.x+r.def.width/2,r.y+r.def.height/2);this.enemyGrid.has(o)||this.enemyGrid.set(o,[]),this.enemyGrid.get(o)?.push(r)}r.isToBeDeleted()&&t.splice(n,1)}}static getGridFromPosition(t,n){return`${t/this.GRID_SPLIT_SIZE|0}_${n/this.GRID_SPLIT_SIZE|0}`}static getEnemiesAtPosition(t,n){let r=t/this.GRID_SPLIT_SIZE|0,o=n/this.GRID_SPLIT_SIZE|0,i=[];for(let s=-1;s<=1;s++)for(let a=-1;a<=1;a++)i=i.concat(this.enemyGrid.get(`${r-s}_${o-a}`)||[]);return i}static process(){u.currentFrame%1e3==0&&this.generateClouds()}static processSpells(){for(let t=this.spells.length-1;t>=0;t--)this.spells[t].process(),this.spells[t].lifetime<=0&&this.spells.splice(t,1)}static processBuildings(){for(let t of this.buildings)t.process()}static destroyBuilding(t){t.remove();for(let n=this.buildings.length-1;n>=0;n--)if(this.buildings[n].isToBeRemoved){this.buildings.splice(n,1),this.updateBuildings();continue}}static addBuilding(t){this.buildings.push(t),this.updateBuildings()}static updateBuildings(){this.buildings.sort((t,n)=>t.x-n.x),st.resetAura(),wr.resetWorldBounds(),Cr.resetStats(),z.updateSpells(),this.buildingGrid.clear();for(let t of this.buildings){t.update();for(let n=0;n<t.width;n++)for(let r=0;r<t.height;r++)this.buildingGrid.set(`${t.gridx+n*v.GRID_SIZE}_${t.gridy+r*v.GRID_SIZE}`,{className:t.def.className,id:t.id})}}static getResource(t){return this.resources.has(t)?this.resources.get(t):(this.resources.set(t,0),0)}static setResource(t,n){this.resources.set(t,n)}static addResource(t,n){t=="life"?z.setLife(n):this.resources.set(t,this.getResource(t)+n)}static generateClouds(t=.7,n=0){if(this.random(this.randCount++)>t)return;let r=[{x:0,y:0,w:160,h:64},{x:160,y:0,w:128,h:32},{x:160,y:32,w:128,h:64}],o=r[this.random(this.randCount++,0,r.length-.1)|0],i=this.random(this.randCount++,1,3);this.decors.push(new ko(0,this.boundsRight+20+n,this.random(this.randCount++,-30,0)-o.h*i,o.w*i,o.h*i,{x:o.x,y:o.y,w:o.w,h:o.h,tileset:g.tilesetDecors,parralax:.7},{x:-.1,y:0}));for(let s=this.decors.length-1;s>=0;s--)this.decors[s].type==0&&this.decors[s].x<-this.width/2&&this.decors.splice(s,1)}static generateGroundObjects(){this.groundObjects=[],this.groundMap.clear();let t=0;this.generateOreNodes(2,[{tileset:g.tilesetDecors,x:0,y:192,w:64,h:64,ow:2,oh:2},{tileset:g.tilesetDecors,x:64,y:192,w:128,h:64,ow:4,oh:2},{tileset:g.tilesetDecors,x:192,y:160,w:64,h:96,ow:2,oh:3},{tileset:g.tilesetDecors,x:256,y:192,w:64,h:64,ow:2,oh:2}],3,60,1,3,50,t++,"Stone",3);let n=[{tileset:g.tilesetDecors,x:0,y:128,w:32,h:32,ow:1,oh:1},{tileset:g.tilesetDecors,x:32,y:128,w:32,h:32,ow:1,oh:1},{tileset:g.tilesetDecors,x:64,y:128,w:32,h:32,ow:1,oh:1}];this.generateOreNodes(1,n,4,25,3,15,30,t++,ge(1).name),this.generateOreNodes(1,n,4,12,3,6,2,t++,ge(1).name,1,-50,50);let r=[{tileset:g.tilesetDecors,x:160,y:128,w:32,h:32,ow:1,oh:1},{tileset:g.tilesetDecors,x:192,y:128,w:32,h:32,ow:1,oh:1},{tileset:g.tilesetDecors,x:224,y:128,w:32,h:32,ow:1,oh:1},{tileset:g.tilesetDecors,x:256,y:128,w:32,h:32,ow:1,oh:1}];this.generateOreNodes(3,r,12,30,2,6,35,t++,ge(3).name),this.generateOreNodes(3,r,12,30,2,6,2,t++,ge(3).name,1,-50,50);let o=[{tileset:g.tilesetDecors,x:0,y:160,w:32,h:32,ow:1,oh:1}];this.generateOreNodes(4,o,10,40,1,1,25,t++,ge(2).name),this.generateOreNodes(4,o,10,40,1,1,2,t++,ge(2).name,1,-50,50)}static generateOreNodes(t,n,r,o,i,s,a,c,l,d=1,f,m){let p=0,y=0;for(;p<a&&y<a*4;){let w=v.getBuildingCoordinateX(this.random(y+c,f||-this.width/2,m||this.width/2)),M=v.getBuildingCoordinateY(this.random(y+1e3+c,v.MIN_BUILD_Y+r*v.GRID_SIZE,v.MIN_BUILD_Y+o*v.GRID_SIZE)),L=he(this.random(y+2e3+c,i,s)|0,1,s),Ze=!1;for(let Oe=0;Oe<L;Oe++){let Ye=Math.ceil(this.random(y*Oe+Oe+c+1,0,d)),Pe=n[this.random(y*Oe+Oe+c+y,0,n.length-.1)|0],jo=this.random(y*Oe*10+c,0,4.2)|0;jo==0?M-=v.GRID_SIZE*Pe.oh*Ye:jo==1?M+=v.GRID_SIZE*Pe.oh*Ye:jo==2?w+=v.GRID_SIZE*Pe.ow*Ye:jo==3?w-=v.GRID_SIZE*Pe.ow*Ye:M+=v.GRID_SIZE*Pe.oh;let fd=!0;for(let qt=0;qt<Pe.ow*Ye;qt++)for(let Zt=0;Zt<Pe.oh*Ye;Zt++)this.groundMap.has(`${w+qt*v.GRID_SIZE}_${M+Zt*v.GRID_SIZE}`)&&(fd=!1);if(fd&&!(M<v.MIN_BUILD_Y+r*v.GRID_SIZE)){for(let qt=0;qt<Pe.ow*Ye;qt++)for(let Zt=0;Zt<Pe.oh*Ye;Zt++)this.groundMap.set(`${w+qt*v.GRID_SIZE}_${M+Zt*v.GRID_SIZE}`,{type:t,tooltip:l});this.groundObjects.push(new ko(t,w,M,v.GRID_SIZE*Pe.ow*Ye,v.GRID_SIZE*Pe.oh*Ye,Pe)),Ze=!0}}Ze&&p++,y++}}static getGroundObjectAt(t,n){let r=v.getBuildingCoordinateX(t),o=v.getBuildingCoordinateY(n);return this.groundMap.get(`${r}_${o}`)}static random(t,n=0,r=1){return u.randomCalls++,this.splitmix32(this.seed+t)*(r-n)+n}static splitmix32(t){t|=0,t=t+2654435769|0;let n=t^t>>>16;return n=Math.imul(n,569420461),n=n^n>>>15,n=Math.imul(n,1935289751),((n=n^n>>>15)>>>0)/4294967296}static generateNewSeed(){this.seed=Math.random()*2**32>>>0,console.log("SEED",this.seed)}};var I=class e{static offsetX=-830;static offsetY=-602;static softZoom=5;static ratioZoom=1;static CAMERA_VISIBILITY_MARGIN=50;static get zoom(){return this.softZoom*this.ratioZoom|0}static changeZoom(t){u.menuMode||(this.softZoom+=he(t*-.01,-.5,.5),this.softZoom=he(this.softZoom,h.cameraMaxUnzoom,20),this.boundCamera())}static cameraPan(t,n){u.menuMode||(this.offsetX+=t,this.offsetY+=n,this.boundCamera())}static centerCamera(){this.offsetX=-u.width/2,this.offsetY=-u.height*.92}static boundCamera(){let t=u.width/1920;t>1?this.ratioZoom=t:this.ratioZoom=1,this.offsetX>h.boundsRight*this.zoom-u.width&&(this.offsetX=h.boundsRight*this.zoom-u.width|0),this.offsetX<h.boundsLeft*this.zoom&&(this.offsetX=h.boundsLeft*this.zoom|0),this.offsetY>h.boundsBottom*this.zoom-u.height&&(this.offsetY=h.boundsBottom*this.zoom-u.height|0),this.offsetY<h.boundsTop*this.zoom&&(this.offsetY=h.boundsTop*this.zoom|0)}static isVisible(t,n,r,o,i=1){let s=t*e.zoom-e.offsetX;if(s+r*e.zoom<-this.CAMERA_VISIBILITY_MARGIN*i||s>u.width+this.CAMERA_VISIBILITY_MARGIN*i)return!1;let a=n*e.zoom-e.offsetY;return!(a+o*e.zoom<-this.CAMERA_VISIBILITY_MARGIN*i||a>u.height+this.CAMERA_VISIBILITY_MARGIN*i)}};var C=class e{static keyboardMapping={right:["d","ArrowRight"],left:["q","a","ArrowLeft"],jump:[" ","ArrowUp"],activate:["e","Enter"]};static LEFT=!1;static RIGHT=!1;static JUMP=!1;static ACTIVATE=!1;static mouseX=-99999;static mouseY=-99999;static mouseClicked=-1;static lastMouseClickedCoords={x:0,y:0,button:-1};static keyboardKeyDown(t){this.keyboardMapping.right.includes(t)&&(e.RIGHT=!0),this.keyboardMapping.left.includes(t)&&(e.LEFT=!0),this.keyboardMapping.jump.includes(t)&&(e.JUMP=!0),this.keyboardMapping.activate.includes(t)&&(e.ACTIVATE=!0),t=="escape"&&this.cancelUI(),t==" "&&(u.paused=!u.paused)}static keyboardKeyUp(t){this.keyboardMapping.right.includes(t)&&(e.RIGHT=!1),this.keyboardMapping.left.includes(t)&&(e.LEFT=!1),this.keyboardMapping.jump.includes(t)&&(e.JUMP=!1),this.keyboardMapping.activate.includes(t)&&(e.ACTIVATE=!1)}static setMouseScreenCoords(t,n){this.mouseClicked>=1&&this.mouseX>-100&&this.mouseY>-100&&I.cameraPan(this.mouseX-t,this.mouseY-n),this.mouseX=t,this.mouseY=n}static resetMousePosition(){this.mouseX=-99999,this.mouseY=-99999}static get gameMouseX(){return(e.mouseX+I.offsetX)/I.zoom}static get gameMouseY(){return(e.mouseY+I.offsetY)/I.zoom}static click(t){this.lastMouseClickedCoords={x:e.mouseX,y:e.mouseY,button:t},this.mouseClicked=t}static release(){this.mouseClicked=-1,this.lastMouseClickedCoords.button==2&&Math.abs(this.lastMouseClickedCoords.x-this.mouseX)<10&&Math.abs(this.lastMouseClickedCoords.y-this.mouseY)<10&&this.cancelUI()}static cancelUI(){Q.cancel()}};var PC=["canvas"],LC=["canvasLight"],kC=["canvas2"],ha=class e{constructor(t){this.ngZone=t}canvas={};canvasLight={};canvas2={};lastTick=0;frameRate=0;lastFPSs=[];debugDisableDarkness=!1;ngOnInit(){u.ctx=this.canvas.nativeElement.getContext("2d"),u.ctx2=this.canvas2.nativeElement.getContext("2d"),u.ctxLight=this.canvasLight.nativeElement.getContext("2d"),u.arrctx[0]=u.ctx,u.arrctx[1]=u.ctx2,u.arrctx[2]=u.ctxLight,this.resizeCanvas(),Se.newSave(),I.centerCamera(),this.ngZone.runOutsideAngular(()=>this.loop())}loop(){if(u.ctx.clearRect(0,0,u.width,u.height),u.ctx2.clearRect(0,0,u.width,u.height),u.ctxLight.clearRect(0,0,u.width,u.height),this.getFPS(),u.menuMode||u.currentTime++,g.drawTerrain(),this.debugDisableDarkness||g.drawTerrainFog(),g.drawSpells(),g.drawEnemies(),Q.displayConstructionGrid(),g.drawParticles(),g.drawObjects(),u.menuMode||(g.drawBuildings(),Q.display(),g.displayTooltip()),u.paused||(h.process(),h.processEnemies(),h.processSpells(),h.processBuildings(),z.process(),U.process(U.particles),U.process(U.uiparticles),Ce.process()),this.frameRate<58&&(u.ctx2.fillStyle="red",u.ctx2.fillRect(2,u.height-12,10,10)),u.debug){u.ctx2.font="10px Silkscreen-Regular",u.ctx2.textAlign="left",u.ctx2.fillStyle="#535353ff";for(let r=0;r<this.lastFPSs.length;r++)u.ctx2.fillRect(20+r*4,50-this.lastFPSs[r]/4+130,2,this.lastFPSs[r]/4);u.ctx2.fillText("fps: "+Math.floor(this.frameRate),20,190),u.ctx2.fillText("CAMx: "+I.offsetX.toFixed(2),20,210),u.ctx2.fillText("CAMy: "+I.offsetY.toFixed(2),20,230),u.ctx2.fillText("gamemousex: "+C.gameMouseX.toFixed(2),120,210),u.ctx2.fillText("gamemousey: "+C.gameMouseY.toFixed(2),120,230),u.ctx2.fillText("buildgridx: "+v.getBuildingCoordinateX(C.gameMouseX),220,210),u.ctx2.fillText("buildgridy: "+v.getBuildingCoordinateY(C.gameMouseY),220,230),u.ctx2.fillText("Camera zoom: "+I.zoom,20,250),u.ctx2.fillText("Random calls: "+u.randomCalls,20,270);let n=0;for(let r of h.enemies)r&&(n+=r.length);u.ctx2.fillText("Enemies: "+n,20,290),u.ctx2.fillText("Spells: "+h.spells.length,20,310),u.ctx2.fillText("Buildings: "+h.buildings.length,120,310),u.ctx2.fillText("Particles: "+U.particles.length,20,330),u.randomCalls=0,u.ctx2.fillStyle="white",C.mouseClicked==2&&(u.ctx.fillStyle="green"),C.mouseClicked==0&&(u.ctx.fillStyle="red"),u.ctx2.fillRect(C.mouseX,C.mouseY,3,3)}requestAnimationFrame(()=>{this.loop()})}get isDead(){return z.life<=0}resizeCanvas(){u.width=this.canvas.nativeElement.width=this.canvas2.nativeElement.width=this.canvas.nativeElement.clientWidth,u.height=this.canvas.nativeElement.height=this.canvas2.nativeElement.height=this.canvas.nativeElement.clientHeight,u.ctx.imageSmoothingEnabled=!1,u.ctx2.imageSmoothingEnabled=!1,u.ctxLight.imageSmoothingEnabled=!1,u.ctx.textRendering="optimizeSpeed",u.ctx2.textRendering="optimizeSpeed",this.canvasLight.nativeElement.width=u.width/u.CANVAS_LIGHT_RATIO,this.canvasLight.nativeElement.height=u.height/u.CANVAS_LIGHT_RATIO,Q.resize(),I.boundCamera()}keyUp(t){C.keyboardKeyUp(t.key.toLowerCase())}mouseMove(t){let n=this.canvas.nativeElement.getBoundingClientRect();C.setMouseScreenCoords(t.clientX-n.left,t.clientY-n.top),t.preventDefault()}mousedown(t){C.click(t.button),t.preventDefault()}mouseup(t){C.release(),t.preventDefault()}contextmenu(t){t.preventDefault()}mouseWheel(t){I.changeZoom(t.deltaY)}keyDown(t){if(C.keyboardKeyDown(t.key.toLowerCase()),t.key=="\xB2"&&(u.debug=!u.debug),t.key=="p"&&(u.paused=!u.paused),t.key=="d"&&(this.debugDisableDarkness=!this.debugDisableDarkness),t.key=="r")for(let n of Sn.keys())h.addResource(n,1e3);t.key=="m"&&h.addResource(6,1e4),t.key=="s"&&Se.save(),t.key=="l"&&Se.loadSave()}prevTouchDiff=-10;touchStart(t){if(t.touches.length>=2){C.click(2);let n=Math.abs(t.touches[0].clientX-t.touches[1].clientX);this.prevTouchDiff>0&&I.changeZoom(n-this.prevTouchDiff),this.prevTouchDiff=n}else t.touches.length==1&&C.click(0);t.preventDefault()}touchEnd(t){C.release(),C.resetMousePosition()}touchMove(t){let n=this.canvas.nativeElement.getBoundingClientRect();C.setMouseScreenCoords(t.touches[0].clientX-n.left,t.touches[0].clientY-n.top)}getFPS(){if(u.currentFrame++,!this.lastTick){this.lastTick=performance.now();return}u.deltaTime=(performance.now()-this.lastTick)/1e3*60,this.lastTick=performance.now(),u.currentFrame%60==0&&(this.frameRate=1/u.deltaTime*60),u.deltaTime=he(u.deltaTime,.1,3),this.lastFPSs.push(this.frameRate),this.lastFPSs.length>180&&this.lastFPSs.shift()}static \u0275fac=function(n){return new(n||e)(Ht(Y))};static \u0275cmp=It({type:e,selectors:[["app-canvas"]],viewQuery:function(n,r){if(n&1&&(co(PC,7),co(LC,7),co(kC,7)),n&2){let o;lo(o=uo())&&(r.canvas=o.first),lo(o=uo())&&(r.canvasLight=o.first),lo(o=uo())&&(r.canvas2=o.first)}},hostBindings:function(n,r){n&1&&Ts("resize",function(){return r.resizeCanvas()},Re)("keyup",function(i){return r.keyUp(i)},Re)("mousemove",function(i){return r.mouseMove(i)},Re)("mousedown",function(i){return r.mousedown(i)},Re)("mouseup",function(i){return r.mouseup(i)},Re)("contextmenu",function(i){return r.contextmenu(i)},Re)("wheel",function(i){return r.mouseWheel(i)},Re)("keydown",function(i){return r.keyDown(i)},Re)("touchstart",function(i){return r.touchStart(i)},Re)("touchend",function(i){return r.touchEnd(i)},Re)("touchmove",function(i){return r.touchMove(i)},Re)},decls:9,vars:2,consts:[["canvas",""],["canvasLight",""],["canvas2",""],[1,"game-canvas"],[1,"gamerender"],[1,"shadow-youcancheatifyouwantidontfuckingcare"],[1,"gameui"],[1,"preview-message"]],template:function(n,r){n&1&&(Ee(0,"div",3),ir(1,"canvas",4,0)(3,"canvas",5,1)(5,"canvas",6,2),Ee(7,"div",7),rt(8,"Preview version - Everything may change"),He()()),n&2&&_s("redsky",r.isDead)},styles:['@property --color1{syntax: "<color>"; initial-value: #5ea1ff; inherits: false;}@property --color2{syntax: "<color>"; initial-value: #cdfaef; inherits: false;}.game-canvas[_ngcontent-%COMP%]{display:inline-block;width:100%;height:100%;cursor:crosshair;background:linear-gradient(var(--color1),var(--color2));transition:--color1 2s,--color2 2s}.game-canvas.redsky[_ngcontent-%COMP%]{--color1: #cf3030;--color2: #000000}canvas[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0;left:0}.preview-message[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:16;color:#fff;font-size:10px;font-family:Courier New,Courier,monospace}']})};var Sr=class e{state="menu";static \u0275fac=function(n){return new(n||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})};function FC(e,t){if(e&1){let n=ou();Ee(0,"button",2),sr("click",function(){Ni(n);let o=iu();return Ai(o.continueGame())}),rt(1,"CONTINUE"),He()}}function jC(e,t){e&1&&(Ee(0,"p",3),rt(1,"The current save will be deleted ! Confirm ?"),He())}function BC(e,t){if(e&1&&(Ee(0,"p"),rt(1),He()),e&2){let n=t.$implicit;yn(),fo(n)}}var ga=class e{constructor(t){this.statesService=t;let n=["Arcane Defender","Mystic Fortress","Enchanted Bastion","Spellbound Tower","Wizard's Keep","Arcane Barrier","Magic Bulwark","Enchanted Citadel","Sorcerer's Stronghold","Arcane Guardians","Mystic Shield","Spellcaster's Defense","Enchanted Fortress","Wizard's Tower","Arcane Sanctuary","Magic Fortress","Enchanted Keep","Sorcerer's Tower","Arcane Bastion","Mystic Defense","Spellbound Keep","Enchanted Guardians","Wizard's Sanctuary","Arcane Citadel","Magic Bastion","Enchanted Stronghold","Sorcerer's Defense","Arcane Shield","Mystic Tower","Spellcaster's Keep","Enchanted Bulwark","Wizard's Fortress","Arcane Defense","Magic Keep","Enchanted Sanctuary","Sorcerer's Bastion","Arcane Guardians","Mystic Stronghold","Spellbound Fortress","Enchanted Defense","Wizard's Bulwark","Arcane Keep","Magic Sanctuary","Enchanted Tower","Sorcerer's Shield","Arcane Fortress","Mystic Bastion","Spellcaster's Stronghold","Enchanted Guardians","Wizard's Citadel","Pierre-Alain retourne travailler"],r=Math.random()*n.length|0,o=["","","","","I","II","III","IV","V","VI",": Requiem",": Resurrection",": The Reckoning",": Revenge"],i=Math.random()*o.length|0;this.title=`${n[r%n.length]} ${o[i%o.length]}`,this.saveExists=Se.saveExists()}title;saveExists=!1;confirmNewGame=!1;credits=[];newGame(){if(this.saveExists&&!this.confirmNewGame){this.confirmNewGame=!0;return}this.statesService.state="game",u.menuMode=!1}continueGame(){this.statesService.state="game",Se.loadSave(),u.menuMode=!1}displayCredits(){let t=["Author","Director","Lead Game designer","Lead Catering Manager","Lead sound designer","Lead programmer","Programmer #1","Programmer #2","Executive Game Director","Lead Assets Designer","Troubadour","Lead Architect","Level designer","Art director","CTO","CFO","CEO","Composer"],n=Math.random()*t.length|0;this.credits.push(`${t[n%t.length]}: Me`)}static \u0275fac=function(n){return new(n||e)(Ht(Sr))};static \u0275cmp=It({type:e,selectors:[["app-main-menu"]],decls:13,vars:3,consts:[[1,"title"],[1,"main-menu-box"],[3,"click"],[1,"confirmdelete"],[1,"blackscreen"]],template:function(n,r){n&1&&(Ee(0,"div",0)(1,"h1"),rt(2),He()(),Ee(3,"div",1),rr(4,FC,2,0,"button"),Ee(5,"button",2),sr("click",function(){return r.newGame()}),rt(6,"NEW GAME "),rr(7,jC,2,0,"p",3),He(),Ee(8,"button",2),sr("click",function(){return r.displayCredits()}),rt(9," CREDITS "),eu(10,BC,2,1,"p",null,Jl),He()(),ir(12,"div",4)),n&2&&(yn(2),fo(r.title),yn(2),or(r.saveExists?4:-1),yn(3),or(r.confirmNewGame?7:-1),yn(3),tu(r.credits))},styles:[".blackscreen[_ngcontent-%COMP%]{background-color:#000;animation-name:_ngcontent-%COMP%_fadeIn;animation-duration:1s;animation-timing-function:ease-in;animation-fill-mode:forwards;width:100%;height:100%;display:inline;position:absolute;top:0;z-index:-10}.main-menu-box[_ngcontent-%COMP%]{margin:10% auto auto;display:flex;justify-content:center;align-items:center;max-width:500px;flex-direction:column}button[_ngcontent-%COMP%]{width:250px;background-color:#d2691ecd;color:#fff;border:1px solid rgb(248,248,37);margin:10px;padding:10px;min-height:36px;box-shadow:1px 1px 4px #000000c7;font-family:Metamorphous;text-shadow:1px 1px 2px rgba(0,0,0,.653);transition:all .1s;max-height:350px;overflow-y:auto;scrollbar-color:rgb(255,255,89) rgb(152,152,152);scrollbar-width:thin}button[_ngcontent-%COMP%]:hover{background-color:#d2691e;cursor:pointer}.confirmdelete[_ngcontent-%COMP%]{color:red}.title[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{font-size:6em;text-shadow:1px 1px 2px rgba(0,0,0,.653);color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:1}30%{opacity:1}to{opacity:0}}"]})};function UC(e,t){e&1&&En(0,"app-main-menu")}var ma=class e{constructor(t){this.statesService=t}title=Gr("tower-game");static \u0275fac=function(n){return new(n||e)(Ht(Sr))};static \u0275cmp=It({type:e,selectors:[["app-root"]],decls:2,vars:1,template:function(n,r){n&1&&(rr(0,UC,1,0,"app-main-menu"),En(1,"app-canvas")),n&2&&or(r.statesService.state=="menu"?0:-1)},dependencies:[ha,ga],encapsulation:2})};Du(ma,fm).catch(e=>console.error(e));
